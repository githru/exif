{"version":3,"sources":["json sync /^/.//.*/.commits/.json$","json sync /^/.//.*/.score/.json$","json sync /^/.//.*/.corpus/.json$","json sync /^/.//.*/.pulls/.json$","components/analyzer/GithruClasses.js","modules/index.js","components/ColorClasses.js","components/CalSimilarity.js","components/analyzer/GitAnalyzer.js","components/TemporalFilter.js","components/TemporalSelector.js","components/ValueSlider.js","components/analyzer/FileStructureAnalyzer.js","components/FileIcicleSummary.js","components/NodeDetailList.js","components/GroupSummary.js","components/BranchSummary.js","components/CommitGraphDrawCluster.js","components/CommitGraph.js","components/CommitGraphClustering.js","components/KeywordTextAreaFilter.js","components/PreferenceSliders.js","components/ManageParameters.js","components/InformationFragments.js","components/container/SidePanelContentUnit.js","components/CaptureTab.js","components/UserIntererests.js","components/LegendIcons.js","components/Detail.js","components/Inspection.js","components/library/wordCloudGenerator.js","components/DetailCompare.js","components/CompareSummary.js","components/HighlightQuery.js","AppV2.js","Home.js","App.js","serviceWorker.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","CommitNode","commit","this","seq","hasNoFirstParentChild","isMainStem","isRoot","implicitBranchNo","isMergeCommit","isMergeTraversed","mergedToNode","undefined","isLeaf","pullRequestHeads","pullRequestMerges","mergeNodes","mergeSquashCommit","mergeNodesContainRelease","mergeNodesContainMajorRelease","cloc","isFiltered","tags","branches","firstParentTreeBranchNames","firstParentTreeLeafNode","branchNumbers","traversed","isMajorRelease","isRelease","releaseTagString","locStat","LOCStat","calCLOCStat","entries","diffStat","files","forEach","entry","value","clocSum","insertions","deletions","insertLocSum","deleteLocSum","console","log","ratio","addStat","targetStat","CommitEdge","childId","parentId","fromNodeId","toNodeId","CommitCluster","node","pref","nodeCount","mergedNodeCount","onPullRequestBranch","nodeList","cluster","length","parent","child","scoresList","score","push","DataTypeByNameMap","message","corpus","authors","authorsLOCStat","keywords","commitTypes","commitTypesLOCStat","clocByFiles","insertionByFiles","deletionByFiles","touchCountByFiles","clocByDirs","insertionByDirs","deletionByDirs","touchCountByDirs","fileToAuthor","commitCount","ClusterData","corpusData","useHeuristicMerge","idxToTfidfSum","keywordsByRank","name","analyze","mockKeywords","idx","isHM","cloneDeep","author","Array","commitType","increaseMapValueByKeyArray","reduce","prev","cur","c","increaseMapValueByKey","commitNode","subCommit","fileInfos","file","hasOwnProperty","count","dict","tfidf","alreadyIncreased","fileName","f","addValueToMap","fileNameSlice","split","slice","i","prevDir","dir","sort","a","b","key","keyArray","addLOCStatValueToMap","ClusterNode","y","blockList","x","width","height","color","branchType","isNonConfilctMerge","isIncludeFiltered","isExcludeFiltered","ClusterBlock","startCommitSeq","endCommitSeq","containsMergedNodes","containsMergeTraversedNodes","mergedToNodeList","clusterNode","isNonConflictMergedSource","isNonConflictMergedTarget","containsMajorRelease","releaseNodeList","HALinkIds","KeywordFilter","isIncludes","attrName","keyword","CapturedSummaryInfo","clusterNodes","groupingParameters","interestedItemList","CommitAttributeNames","PreferenceList","PreferenceWeights","commitDate","BranchTypes","updateClusterOverviewHeight","createAction","updateGlobalCommitsByTemporalFilter","updateCommitsByTemporalFilter","udpateCommitsByTemporalBrush","updateClusterThreshold","updateNonConflictGroupingLevel","updateReleaseBinningLevel","updateSummaryByLOC","updateKeywordFilterList","updatePreferenceWeights","updateHideFiles","updateUseHeuristicMerge","addCapturedSummaryInfoList","removeCapturedSummaryInfoList","updateCurrentCapturedSummaryInfoId","addItemsToCapturedSummaryInfo","removeItemFromCaptureSummaryInfo","addFragmentHistory","clearFragments","registerFavoriteFragment","unregisterFavoriteFragment","updateCapturedSummaryInfoListForCompare","updateHighlightQuery","updateShowMergeLink","updateBranchShowMapByType","updateScrollToRight","summaryPane","initialState","gitAnalyzer","globalCommitSeqSelectionByTemporalFilter","commitSeqSelectionByTemporalFilter","commitSeqSelection","layout","overviewWidth","leftPaneWidth","rightPaneWidth","rightPaneMargin","clusterOverviewSliderWidth","clusterOverviewWidth","temporalAreaHeight","temporalSelectorHeight","orgClusterOverviewHeight","clusterOverviewHeight","inspectionPaneWidth","titlePanelHeight","screenWidth","preferenceWeights","threshold","nonConflictGroupingLevel","releaseBinningLevel","keywordFilterList","branchShowMapByType","EXPLICIT","IMPLICIT","PR_MERGED","PR_CLOSED","PR_OPEN","highlightQuery","showMergeLink","summaryParameters","summaryByLOC","hideFiles","searchResultList","capturedSummaryInfoSeq","capturedSummaryInfoList","currentCapturedSummaryInfoId","favoriteFragments","fragmentHistory","capturedSummaryInfoListForCompare","scrollToRight","handleActions","state","action","payload","type","bool","concat","splice","itemList","info","findIndex","d","newItems","filter","item","fragment","exists","fi","index","BranchColors","MAIN_STEM","colors","getListOfColors","colorRange","AttributeColors","date","highlight","ScoreColorMap","changeRGBColorByOpacity","opacity","d3","r","g","getScoreTemp","getFileList","getJaccardSimilarity","test","intersectionLen","intersection","unionLen","union","getTfidfCosineSimilarity","aVector","bVector","aKeys","bKeys","innerProduct","shift","aLengthSqr","bLengthSqr","k","Math","sqrt","GitAnalyzer","json","scoreJson","corpusJson","pullJson","defaultThresholdStep","repoName","releasePrefix","mainStemBranchName","keywordMatch","kfList","toLowerCase","val","indexOf","lowLevel","roots","allNodeList","nodesMap","edges","firstParentIdMap","childIdMap","parentIdMap","maxY","headId","branchesMap","gitData","scoreData","pullData","pullMapByNumber","mergeSquashCommitNumber","buildContextAbstractionGraph","isHead","edge","getNodeById","rootNode","startsWith","initStack","n","pop","more","no","from","add","Set","p","number","tfidfList","pull","commits","reverse","addNode","parents","addRoot","head","sha","merge_commit_sha","childCommit","merge","substring","addEdge","tag","join","items","branchedNodesNotHead","branchedNodes","FPTreeNodeListMapByNodeId","branchedNode","firstParentNodesOrderedList","isHeadBranch","bno","rootCount","firstParentChildNodes","getChildNodes","childNode","findMerges","branchNames","branchBackTracking","selection","prefMap","filters","getClusters","isExcludes","inKF","exKF","isFilteredOut","thresholdSet","parentNode","nextFirstParentChildNodeWithSameBranchNo","scores","getScoreByPreferences","sum","sortedThresholdList","container","clusterMapByNodeSeq","prefNormalizedThreshold","targetNodeList","isClusterCut","firstParentChildNode","doneSet","has","sameBranchClusters","lastBranchName","lastNode","prNum","Number","closed","merged","node1","node2","maxCommitHours","verbose","commit1","commit2","dateNormFunc","range","domain","diffHours","min","abs","Date","toFixed","dataName","endsWith","vs","toUpperCase","str","searchStr","replaceStr","findAttrs","resultNodeList","foundMap","attr","values","v","dt","toISOString","parseTime","trimYYYYMMDD","branchClusterNodes","cn","useStyles","makeStyles","theme","formControl","margin","dateField","fontSize","padding","SearchDiv","props","RadioGroup","style","onChange","className","Radio","icon","checkedIcon","Select","release","heandleReleaseChange","native","root","disableRipple","TextField","startRelease","defaultValue","defaultDateValue","event","handleDateChange","target","TemporalFilter","classes","React","useState","fromType","setFromType","toType","setToType","startDate","setStartDate","endDate","setEndDate","headSeq","rootSeq","defaultStartSeq","defaultEndSeq","setStartRelease","endRelease","setEndRelease","dispatch","useDispatch","rootDate","headDate","getSeqByDate","isStart","FormControl","component","alignItems","defaultReleaseValue","Button","size","variant","onClick","fromSeq","toSeq","actions","commitBrush","commitSeqXScale","navRender","globalStartSeq","globalEndSeq","arrowSvgHeight","focusRelativeHeightPosition","globalFilteredNodeList","handleTemporalLabel","xTemporalScale","leftAlignWidth","rightAlignWidth","text","getTemporalLabelByDate","invert","handleCommitLabel","newXScale","rangeRound","newSel","startLabel","endLabel","drawTemporalToCommitArrow","tSel","cSel","drawSelectionArrow","drawCommitToClusterArrow","svg","rangeX","rangeY","selectAll","remove","data","enter","append","navigationSvg","brushHandleSize","bandwidth","histogram","thresholds","ticks","bins","temporalYSizeHalf","yTemporalCommitCountScale","yTemporalCLOCScale","tempArea","datum","x0","y0","y1","curve","alpha","temporalAxisHeight","tempAxis","call","tickSizeOuter","tickSize","releaseTagNodeList","links","on","pageX","pageY","focusHeight","extent","temporalBrush","move","newSelection","startBinIndex","endBinIndex","getCommitBrushSelectionsTriggeredByTemporalBrush","commitSeqScale","round","commitBrushFunc","brushG","select","_groups","__brush","TemporalSelector","useSelector","sel","isInitRef","useRef","useEffect","current","position","zIndex","float","top","PrettoSlider","spacing","button","minWidth","withStyles","thumb","backgroundColor","border","marginTop","marginLeft","boxShadow","active","valueLabel","left","track","borderRadius","rail","mark","Slider","ValueSlider","defaultStepValue","stepValue","setStepValue","max","setMax","divId","thresholdList","arrayIndices","aIndex","sv","align","onChangeCommitted","newValue","changeThreshold","marks","step","orientation","valueLabelDisplay","fontWeight","FileStructureAnalyzer","rawData","file2Author","path","fileStructure","analyzePath","compressStructure","updateAuthorInfo","pathDirectories","includes","curDirectory","subPath","childNum","children","childAuthors","FileIcicleSummary","rawModLocData","rawInsertLocData","rawDeleteLocData","rawModNumData","pageNum","partition","format","rectHeight","x1","labelVisible","focus","currentCLocMode","fileAnalyzer","rawModData","widthScale","getFileStructure","curHeight","cell","descendants","each","rect","tspan","t","transition","duration","title","authorArray","rootData","hover","textDecoration","hout","fill","table","tableCell","paddingLeft","paddingRight","paddingTop","paddingBottom","verticalAlign","display","flexDirection","maxHeight","maxWidth","overflowY","bar","div","font","vseparator","MessagePrint","flexWrap","trim","line","li","word","cursor","onMouseOver","onMouseOut","NodeDetail","isParent","isChild","TableRow","visibility","TableCell","childClass","visible","getTextValue","body","Fragment","wordBreak","NodeDetailList","Table","TableBody","mn","Cause","scoreSumMap","scoreMap","prefName","normedScore","scoreSumList","colorIndex","xWidth","background","strokeWidth","overflow","BarChartSummary","ref","dataNameList","clusterData","totalCount","numByDataName","dataList","authorList","commitTypeList","keywordList","processKey","replace","xScale","yAuthorScale","paddingInner","paddingOuter","yCommitTypeScale","svgAuthor","svgCommitType","yAuthorAxis","tickSizeInner","yCommitTypeAxis","xAxis","tickFormat","rectsAuthor","nameMargin","xAxisRenderAuthor","yAxisRenderAuthor","rectsCommitType","xAxisRenderCommitType","yAxisRenderCommitType","aMin","aMax","WordCloud","document","getElementById","list","wait","rotateRatio","weightFactor","dimension","GroupSummary","selectedClusterNode","arrowStartX","arrowWidth","rightWidth","arrowHeight","pointerEvents","x2","y2","stroke","strokeOpacity","fileSummaryWidth","barChartWidth","marginRight","branchSummaryValueRectMouseover","rectMargin","sameValueElements","newColor","clusterId","branchSummaryValueRectMouseleave","orgColor","BranchSummary","branchNo","showAttrs","showAttrValueCount","showAttrRenderFlow","showByCommitCountOnly","selectedClusterNodeIndex","setSelectedClusterNodeIndex","divHeight","itemMinWidth","totalCommitCount","totalCLOC","totalValue","arrowDivWidth","getBranchNamesFromBranchClusterNodes","rectWidths","branchName","drawSummary","branchSummaryClusterRectStr","topDataList","attrList","attrIndex","parentIndex","itemHeight","useLayoutEffect","JSON","stringify","prevIndex","currentX","branchNum","containReleaseList","block","containReleaseNames","arrowDivStartX","startCurrentX","whiteSpace","summaryStartX","overWidth","moverLinks","l","mleaveLinks","link","getClusterNodeColor","getFileSetForCluster","ignoreFiles","highlightKeywordMatchBlock","currentClusterNodeList","searchResultCommitSeqList","matchSvg","blockNode","commitRect","CommitGraph","parse","sliderWidth","minBlockShow","setThresholdList","prevSelectedClusterNodesInfo","selectedClusterNodesInfo","setSelectedClusterNodesInfo","clusteringResult","clusterNodesResult","clusterNodesByBranchNo","groupSvgWidth","totalStat","showGroupSummaryFunc","currentClusterNodes","multi","shiftKey","buildAndDrawClusterNodes","clusterList","clusterNodeList","startPoint","endPoint","xArray","clusterNodeMapByCluster","cIndex","getClusterBranchType","blockStartSeq","blockIndex","prevClusterIndexOfBlock","currentClusterIndexOfBlock","maxBlockIndex","yArray","startX","endX","endXOfClusterTree","pc","buildClusterNodes","defaultBlockOpacity","defaultClusterOpacity","startBlockIndex","endBlockIndex","maxHeightCommitCount","summaryLineHeight","yRange","minHeight","xBandScale","yBandScale","xRectScale","blockHeightScale","clusterOverviewSvg","colorByBranchNo","brushedClusterNodeList","branchNodesListForSwitching","branchNodes","fileSetList","fileSetOrg","fileSetSkip","fileSetTarget","targetClusterNode","blockMapByNode","toBlockListMapByBlock","toBlockList","matchedBlock","toBlock","blocksBox","boxWidth","boxHeight","clusterColor","drawBlockList","linkVertical","linkHorizontal","dataset","source","linkFunc","releaseBlockList","releases","pushDataSet","sx","sy","tx","ty","minNX","maxNX","elem","branchUnderlineWidth","html","drawClusters","searchByKeywords","getOverviewClusters","th","justifyContent","alert","textArea","marginBottom","KeywordTextAreaFilter","includeFilterStr","setIncludeFilterStr","excludeFilterStr","setExcludeFilterStr","parseFilterStr","noValidate","autoComplete","Form","Control","as","rows","placeholder","prefDiv","textAlign","textTransform","buttons","HorizontalSlider","circle","PreferenceSliders","setPref","newPref","ManageParameters","hideFilesStr","setHideFilesStr","Checkbox","checked","fList","SectionTitle","borderBottom","favorites","history","InformationFragments","addInterestsItems","fragments","viewBox","isPinned","SidePanelContentUnit","show","setShow","CaptureTab","checkedDic","setCheckedDic","capturedInfo","firstCommit","endCommit","getCommitName","window","scrollTo","disabled","checkedList","cList","ShowCheckBox","UserInterests","checkSvgWidth","itemNameWidth","detailNodeEdgeWidthRatio","clusters","nodes","defaultClass","counts","ki","textAnchor","removeInterestsItem","ci","found","findInterestItemInCluster","colWidth","AttributeIconSpecs","Detail","capturedSummaryInfoId","capturedSummaryInfo","detailStatDataNames","initRef","firstClusterNodes","setThreshold","currentClusters","setCurrentClusters","suffix","fragmentClick","showCommitListInfo","setShowCommitListInfo","closeShowCommitListInfo","newClusters","detailNodeSvg","detailNode","detailNodesHeight","clusterDataMapByClusterId","eachClusterStatListSortedByValue","dirDepth","mapList","attrValueMapToSortedList","keyMap","prevMap","stat","sortedAllValues","topKeys","statTotalHeight","yScale","colorArray","attrColorScale","heads","highlightDataItem","rollBackHighlightDataItem","dataSvg","prevItems","changeTextOver","txt","changeTextOut","clusterIndex","valueList","pos","curItems","detailStatRender","detailNodeRender","Icon","showCommitListWidth","IconButton","Inspection","capturedClusterNodes","KeywordCloud","aList","bList","interList","canvas1","canvas2","changeOpacity","bMin","bMax","DetailCompare","aCapturedSummaryInfo","bCapturedSummaryInfo","aName","bName","reducingCapturedSummary","aCapturedSummaryInfoKeywordDict","bCapturedSummaryInfoKeywordDict","aCapturedSummaryInfoKeyword","bCapturedSummaryInfoKeyword","aCloc","bCloc","aCommitNum","bCommitNum","interAuthorList","aAuthorData","bAuthorData","aAuthorArrayDataLoc","bAuthorArrayDataLoc","aAuthorArrayDataCommit","bAuthorArrayDataCommit","aCommitTypeArrayDataLoc","bCommitTypeArrayDataLoc","aCommitTypeArrayDataCommit","bCommitTypeArrayDataCommit","clusterNodesList","newCluster","aClusterNode","bClusterNode","aAuthorArrayData","bAuthorArrayData","aCommitTypeArrayData","bCommitTypeArrayData","authorCollector","rawAuthor","authorDataCollector","authorData","commitNum","inIntersection","authorKey","loc","accumulatingLoc","sortByLoc","accumulatingCommitNum","sortByCommitNum","commitTypeCollector","interCommitTypeList","commitTypeDataCollector","commitTypeData","aCommitTypeData","bCommitTypeData","commitTypeKey","interKeywords","aClusterKeywordData","bClusterKeywordData","presentingKeywordNum","aKeywords","bKeywords","generateFileDirData","aData","bData","aArray","bArray","aSum","bSum","aDataTempArray","bDataTempArray","interArray","reducingCapturedSummaryCloc","fileDict","reducingCapturedSummaryCommitNum","aRawModLocFileData","aRawModNumFileData","bRawModLocFileData","bRawModNumFileData","aLocFileArray","bLocFileArray","aNumFileArray","bNumFileArray","aFileArray","bFileArray","num","array","currentLocSum","currentCommitSum","updateXAxis","updateAuthorSvg","updateCommitTypeSvg","updateKeywordSvg","updatefileSvg","updateLegends","aChecked","interChecked","bChecked","isLoc","xAxisScale","aAuthorSvgMolds","aAuthorRects","aAuthorTexts","bAuthorSvgMolds","bAuthorRects","bAuthorTexts","aCommitTypeSvgMolds","aCommitTypeRects","aCommitTypeTexts","bCommitTypeSvgMolds","bCommitTypeRects","bCommitTypeTexts","aFileSvg","bFileSvg","showFileFullPath","mainSvg","interPoints","r0","r1","dx","dy","h","rx","ry","calIntersection","vennSvg","updateVennText","xAxisLength","initBarGraphElement","svgMolds","arrayDataLoc","rects","texts","defualtColor","raise","lower","updateBarGraphElement","arrayData","defaultColor","authorX","authorSvg","authorY","authorAxis","aAuthorSvg","bAuthorSvg","aArrayData","bArrayData","commitTypeX","commitTypeSvg","commitTypeY","commitTypeAxis","aCommitTypeSvg","bCommitTypeSvg","keywordsX","keywordsWidth","keywordsY","keywordsAxisScale","generate","rectSingleHeight","keywordsHeight","rectSingleY","initSmallChart","graphX","yourKeywordsSvg","keywordsData","componentSvg","fileFullnameView","reduceLongName","updateSmallChart","fileX","fileWidth","fileSvg","fileY","fileAxisScale","fileAxis","aria-label","label","defaultChecked","CompareSummary","HighlightQuery","query","setQuery","qList","AppV2","gitAnalyzerRef","repo","match","params","require","shallowEqual","prevUseHeuristicMergeRef","overflowX","class","ScrollButton","Component","App","exact","v2","Boolean","location","hostname","store","createStore","reducers","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.fd9d3146.chunk.js","sourcesContent":["var map = {\n\t\"./githru.commits.json\": 249,\n\t\"./omnitrack_android.commits.json\": 250,\n\t\"./pyconkr.commits.json\": 251,\n\t\"./realm-java.commits.json\": 252\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 248;","var map = {\n\t\"./githru.score.json\": 254,\n\t\"./omnitrack_android.score.json\": 255,\n\t\"./pyconkr.score.json\": 256,\n\t\"./realm-java.score.json\": 257\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 253;","var map = {\n\t\"./githru.corpus.json\": 259,\n\t\"./omnitrack_android.corpus.json\": 260,\n\t\"./pyconkr.corpus.json\": 261,\n\t\"./realm-java.corpus.json\": 262\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 258;","var map = {\n\t\"./githru.pulls.json\": 264,\n\t\"./omnitrack_android.pulls.json\": 265,\n\t\"./pyconkr.pulls.json\": 266,\n\t\"./realm-java.pulls.json\": 267\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 263;","import { cloneDeep } from 'lodash';\r\n\r\nexport class ViewNode {\r\n    constructor(node) {\r\n        this.node = node;\r\n        this.x = undefined;\r\n        this.y = undefined;\r\n    }\r\n}\r\n\r\nexport class ViewCluster {\r\n    constructor(cluster) {\r\n        this.cluster = cluster;\r\n    }\r\n}\r\n\r\nexport class CommitNode {\r\n    constructor(id, commit) {\r\n        // default\r\n        this.id = id;\r\n        this.commit = commit;\r\n        this.seq = 0;\r\n\r\n        // toplology\r\n        this.hasNoFirstParentChild = false;\r\n        this.isMainStem = false;\r\n        this.isRoot = false;\r\n        this.implicitBranchNo = -1;\r\n\r\n        // context\r\n        this.isMergeCommit = false;\r\n        this.isMergeTraversed = false;\r\n        this.mergedToNode = undefined;\r\n\r\n        this.isLeaf = false;\r\n        this.pullRequestHeads = [];\r\n        this.pullRequestMerges = [];\r\n\r\n        this.mergeNodes = [];\r\n        this.mergeSquashCommit = undefined;\r\n        this.mergeNodesContainRelease = false;\r\n        this.mergeNodesContainMajorRelease = false;\r\n        this.cloc = 0;\r\n\r\n        // Filtering\r\n        this.isFiltered = true;\r\n\r\n        // \r\n        this.tags = [];\r\n        this.branches = [];\r\n        // this.notFirstParentTreeBranchNames = [];\r\n        // this.notFirstParentTreeLeafNode = undefined;\r\n        this.firstParentTreeBranchNames = [];\r\n        this.firstParentTreeLeafNode = undefined;\r\n        this.branchNumbers = [];\r\n        this.traversed = false;\r\n        \r\n        this.isMajorRelease = false;\r\n        this.isRelease = false;\r\n        this.releaseTagString = undefined;\r\n\r\n        // this.cluster = undefined;\r\n        this.locStat = new LOCStat();\r\n        this.calCLOCStat();\r\n    }\r\n\r\n    calCLOCStat() {\r\n        if (this.commit === undefined) {\r\n            console.log(\"COMMIT UNDEFINED\");\r\n            return;\r\n        }\r\n        \r\n        Object.entries(this.commit.diffStat.files).forEach( entry => {\r\n            // files\r\n            let [fileName, value] = entry;\r\n            this.locStat.clocSum += value.insertions + value.deletions;\r\n            this.locStat.insertLocSum += value.insertions;\r\n            this.locStat.deleteLocSum += value.deletions;\r\n        });\r\n    }\r\n}\r\n\r\nexport class LOCStat {\r\n    constructor(locStat, ratio = 1) {\r\n        this.clocSum = 0;\r\n        this.insertLocSum = 0;\r\n        this.deleteLocSum = 0;\r\n        if (locStat !== undefined) this.addStat(locStat, ratio);\r\n    }\r\n    \r\n    addStat(targetStat, ratio = 1) {\r\n        this.clocSum += targetStat.clocSum * ratio;\r\n        this.insertLocSum += targetStat.insertLocSum * ratio;\r\n        this.deleteLocSum += targetStat.deleteLocSum * ratio;\r\n    }\r\n}\r\n\r\nexport class CommitEdge {\r\n    constructor(childId, parentId) {\r\n        this.fromNodeId = childId;\r\n        this.toNodeId = parentId;\r\n    }\r\n}\r\n\r\nexport class CommitCluster {\r\n    constructor(id, node, pref) {\r\n        this.nodeCount = 0;\r\n        this.mergedNodeCount = 0;\r\n        this.locStat = new LOCStat();\r\n        this.onPullRequestBranch = false;\r\n        \r\n        if (id === undefined) {\r\n            this.id = -1;\r\n            this.nodeList = [];\r\n            return;\r\n        } else {\r\n            this.id = id;\r\n            this.nodeList = [node];\r\n            node.cluster = this;\r\n            this.nodeCount++;\r\n            this.mergedNodeCount += node.mergeNodes.length;\r\n\r\n            this.locStat.addStat(node.locStat);\r\n        }\r\n\r\n        this.parent = undefined;\r\n        this.child = undefined;\r\n\r\n        this.pref = pref;\r\n        this.branches = [];\r\n\r\n        this.scoresList = [];\r\n    }\r\n\r\n    addNode(node, score = 0) {\r\n        node.cluster = this;\r\n        this.nodeList.push(node);\r\n        this.nodeCount++;\r\n        this.mergedNodeCount += node.mergeNodes.length;\r\n        this.locStat.addStat(node.locStat);\r\n\r\n        this.scoresList = [score];\r\n    }\r\n}\r\n\r\nexport class CommitAuthor {\r\n    constructor(name, email, githubId) {\r\n        this.name = name;\r\n        this.email = email;\r\n        this.githubId = githubId;\r\n    }\r\n}\r\n\r\nexport const DataTypeByNameMap = {\r\n    id:\"id\",\r\n    message:\"message\",\r\n    corpus:\"corpus\",\r\n\r\n    authors:\"author\",\r\n    authorsLOCStat:\"author\",\r\n    keywords:\"keyword\",\r\n    commitTypes:\"commitType\",\r\n    commitTypesLOCStat:\"commitType\",\r\n    clocByFiles:\"file\",\r\n    insertionByFiles:\"file\",\r\n    deletionByFiles:\"file\",\r\n    touchCountByFiles:\"file\",\r\n    clocByDirs:\"dir\",\r\n    insertionByDirs:\"dir\",\r\n    deletionByDirs:\"dir\",\r\n    touchCountByDirs:\"dir\",\r\n    fileToAuthor:\"file\",\r\n    commitCount:\"commit\",\r\n}\r\n\r\n// export const ClusterDataNames = [\r\n//     \"authors\",\r\n//     \"authorsLOCStat\",\r\n//     \"keywords\",\r\n//     \"commitTypes\",\r\n//     \"commitTypesLOCStat\",\r\n\r\n// ];\r\n\r\nexport class ClusterData {\r\n    constructor(cluster, corpusData, useHeuristicMerge) {\r\n        this.cluster = cluster;\r\n        this.corpusData = corpusData;\r\n        // this.fileToAuthor = {};\r\n        this.idxToTfidfSum = {};\r\n        this.keywordsByRank = [];\r\n        // this.idxToTfidfLOCStatSum = {};\r\n\r\n        // init\r\n        Object.keys(DataTypeByNameMap).forEach( (name) => this[name] = {});\r\n        // Object.keys(ClusterLOCDataNamesMap).forEach( (name) => this[name] = {});\r\n        this.analyze(cluster, useHeuristicMerge);\r\n    }\r\n\r\n    analyze(cluster, useHeuristicMerge) {\r\n        // additional infos \r\n        // this.wordTfIdfRank = [];\r\n\r\n        // by jeonhyun97\r\n        let mockKeywords = {};\r\n        // let mockKeywordsLOCStat = {};\r\n\r\n        cluster.nodeList.forEach( (node) => {\r\n            let isHM = useHeuristicMerge && node.mergeSquashCommit !== undefined ? true : false;\r\n            let commit = cloneDeep(useHeuristicMerge && node.mergeSquashCommit !== undefined ? node.mergeSquashCommit : node.commit);\r\n            // temporary\r\n            if (!(commit.author instanceof Array)) commit.author = [commit.author];\r\n            if (!(commit.commitType instanceof Array)) commit.commitType = [commit.commitType];\r\n\r\n            this.increaseMapValueByKeyArray(this.authors, commit.author);\r\n            this.increaseMapValueByKeyArray(this.authorsLOCStat, commit.author, node.locStat);\r\n            this.increaseMapValueByKeyArray(this.commitTypes, commit.commitType);\r\n            this.increaseMapValueByKeyArray(this.commitTypesLOCStat, commit.commitType, node.locStat);\r\n\r\n            let uniqCorpus = Object.keys(commit.corpus.reduce( (prev, cur) => {prev[cur] = true; return prev;}, {}));\r\n            uniqCorpus.forEach( (c) => this.increaseMapValueByKey(mockKeywords, c));\r\n            // uniqCorpus.forEach( (c) => this.addLOCStatValueToMap(mockKeywordsLOCStat, c, node.locStat, ));\r\n            // for (let file in commit.diffStat.files) {\r\n            //     commit.author.forEach(author => {\r\n            //         if (this.fileToAuthor[file] != undefined) {\r\n            //             if(!this.fileToAuthor[file].includes(author) ){\r\n            //                 this.fileToAuthor[file].push(author);\r\n            //             }\r\n            //         }\r\n            //         else {\r\n            //             this.fileToAuthor[file] = [];\r\n            //             this.fileToAuthor[file].push(author);\r\n            //         }\r\n            //     })\r\n            // }\r\n\r\n            if(!isHM) {\r\n                let fileInfos = commit.diffStat.files;\r\n// console.log(\"INFO\", fileInfos);\r\n                for(let file in fileInfos) {\r\n\r\n                    if(this.fileToAuthor[file] == undefined) \r\n                        this.fileToAuthor[file] = {};\r\n                    if(this.fileToAuthor[file] != undefined) {\r\n                        let author = commit.author;\r\n                        if(this.fileToAuthor[file].hasOwnProperty(author)) { // if file already holding author\r\n                            this.fileToAuthor[file][author].insertions += fileInfos[file].insertions;\r\n                            this.fileToAuthor[file][author].deletions += fileInfos[file].deletions;\r\n                            this.fileToAuthor[file][author].count += 1;\r\n                        }\r\n                        else {\r\n                            let dict = {\r\n                                insertions : fileInfos[file].insertions,\r\n                                deletions : fileInfos[file].deletions,\r\n                                count : 1\r\n                            }\r\n                            this.fileToAuthor[file][author] = dict;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            else {\r\n                node.mergeNodes.forEach(commitNode => {\r\n                    let subCommit = commitNode.commit;\r\n                    let fileInfos = subCommit.diffStat.files;\r\n                    let author = subCommit.author;\r\n                    for(let file in fileInfos) {\r\n                        if(this.fileToAuthor[file] == undefined) \r\n                            this.fileToAuthor[file] = {};\r\n                        \r\n                        if(this.fileToAuthor[file].hasOwnProperty(author)) {\r\n                            this.fileToAuthor[file][author].insertions += fileInfos[file].insertions;\r\n                            this.fileToAuthor[file][author].deletions += fileInfos[file].deletions;\r\n                            this.fileToAuthor[file][author].count += 1;\r\n                        }\r\n                        else {\r\n                            let dict = {\r\n                                insertions : fileInfos[file].insertions,\r\n                                deletions : fileInfos[file].deletions,\r\n                                count : 1\r\n                            }\r\n                            this.fileToAuthor[file][author] = dict;;\r\n                        }\r\n                    }\r\n                })\r\n\r\n            }\r\n\r\n            for (let idx in commit.tfidf) {\r\n                if (this.idxToTfidfSum[idx] != undefined) {\r\n                    this.idxToTfidfSum[idx] += commit.tfidf[idx];\r\n                    // this.idxToTfidfLOCStatSum[idx].addStat(node.locStat);\r\n                }\r\n                else {\r\n                    this.idxToTfidfSum[idx] = commit.tfidf[idx];\r\n                    // this.idxToTfidfLOCStatSum[idx] = node.locStat;\r\n                }\r\n            }\r\n\r\n            let alreadyIncreased= {};\r\n            Object.keys(commit.diffStat.files).forEach( (fileName) => {\r\n                // files\r\n                let f = commit.diffStat.files;\r\n                let clocSum = f[fileName].insertions + f[fileName].deletions;\r\n                \r\n                if (!(fileName in alreadyIncreased)) {\r\n                    this.increaseMapValueByKey(this.touchCountByFiles, fileName);\r\n                    alreadyIncreased[fileName] = true;\r\n                }\r\n                this.addValueToMap(this.clocByFiles, fileName, clocSum);\r\n                this.addValueToMap(this.insertionByFiles, fileName, f[fileName].insertions);\r\n                this.addValueToMap(this.deletionByFiles, fileName, f[fileName].deletions);\r\n\r\n                // dirs\r\n                let fileNameSlice = fileName.split(\"/\");\r\n                if (fileNameSlice.length > 1) {\r\n                    let dirs = fileNameSlice.slice(0, fileNameSlice.length - 2).reduce( (prev, cur, i) => {\r\n                        let prevDir = (i > 0 ? prev[prev.length - 1] + \"/\" : \"\");\r\n                        prev.push(prevDir + cur);\r\n                        return prev;\r\n                    }, []);\r\n\r\n                    dirs.forEach( dir => {\r\n                        if (!(dir in alreadyIncreased)) {\r\n                            this.increaseMapValueByKey(this.touchCountByDirs, dir);\r\n                            alreadyIncreased[dir] = true;\r\n                        }\r\n                        this.addValueToMap(this.clocByDirs, dir, clocSum);\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        for (let idx in this.idxToTfidfSum) {\r\n            this.keywordsByRank.push([this.corpusData[idx], this.idxToTfidfSum[idx]])\r\n        }\r\n        this.keywordsByRank.sort(function (a,b) {\r\n            return b[1] - a[1];\r\n        });\r\n\r\n        \r\n        this.keywordsByRank.forEach(e => {\r\n            this.keywords[e[0]] = [mockKeywords[e[0]], e[1]];\r\n            // this.keywordsLOCStat[e[0]] = [mockKeywordsLOCStat[e[0]], e[1]];\r\n        });\r\n\r\n\r\n        // console.log(this.keywordsByRank)\r\n        // console.log(mockKeywords)\r\n// console.log(\"mockKeywords\", mockKeywords);\r\n        // this.keywords = mockKeywords;\r\n    }\r\n\r\n    increaseMapValueByKey(map, key) {\r\n        this.addValueToMap(map, key, 1);\r\n    }\r\n\r\n    increaseMapValueByKeyArray(map, keyArray, locStat) {\r\n        if (locStat === undefined) {\r\n            keyArray.forEach(key => this.addValueToMap(map, key, 1/keyArray.length));\r\n        } else {\r\n            keyArray.forEach(key => this.addLOCStatValueToMap(map, key, locStat, 1/keyArray.length));\r\n        }\r\n    }\r\n\r\n    addValueToMap(map, key, value) {\r\n        if (map[key] !== undefined) map[key] += value;\r\n        else map[key] = value;\r\n    }\r\n\r\n    addLOCStatValueToMap(map, key, locStat, ratio) {\r\n        if (map[key] !== undefined) map[key].addStat(locStat, ratio);\r\n        else map[key] = new LOCStat(locStat, ratio);\r\n    }\r\n}\r\n\r\nexport class ClusterNode {\r\n    constructor(cluster) {\r\n        this.cluster = cluster;\r\n\r\n        // this.startX = 0;\r\n        // this.endX = 0;\r\n\r\n        this.y = 0;\r\n        this.blockList = [];\r\n\r\n        // box layout\r\n        this.x = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.color = undefined;\r\n        this.branchType = undefined;\r\n        this.isNonConfilctMerge = false;\r\n\r\n        this.isIncludeFiltered = false;\r\n        this.isExcludeFiltered = false;\r\n    }\r\n}\r\n\r\nexport class ClusterBlock {\r\n    constructor(id, nodeList, startCommitSeq, endCommitSeq, x, \r\n            containsMergedNodes = false, containsMergeTraversedNodes = false, mergedToNodeList = [], clusterNode) {\r\n        this.id = id;\r\n        this.startCommitSeq = startCommitSeq;\r\n        this.endCommitSeq = endCommitSeq;\r\n        this.commitCount = nodeList.length;\r\n\r\n        this.x = x;\r\n\r\n        this.nodeList = nodeList;\r\n        this.isNonConflictMergedSource = false;\r\n        this.isNonConflictMergedTarget = false;\r\n        this.containsMergedNodes = containsMergedNodes;\r\n        this.containsMergeTraversedNodes = containsMergeTraversedNodes;\r\n        this.containsMajorRelease = false;\r\n        this.mergedToNodeList = mergedToNodeList;\r\n\r\n        this.releaseTagString = \"\";\r\n        this.releaseNodeList = [];\r\n\r\n        this.clusterNode = clusterNode;\r\n        \r\n        this.HALinkIds = [];\r\n    }\r\n}\r\n\r\nexport class KeywordFilter {\r\n    constructor (isIncludes, attrName, keyword) {\r\n        this.isIncludes = isIncludes;\r\n        this.attrName = attrName;\r\n        this.keyword = keyword;\r\n    }\r\n}\r\n\r\nexport class CapturedSummaryInfo {\r\n    constructor(id, clusterNodes, groupingParameters, interestedItemList = []) {\r\n        this.id = id;\r\n        this.clusterNodes = clusterNodes;\r\n        this.groupingParameters = groupingParameters;\r\n        this.interestedItemList = interestedItemList;        \r\n    }\r\n}\r\n\r\n\r\nexport var CommitAttributeNames = [\r\n    \"id\", \"parents\", \"files\", \"message\", \"author\", \"commitType\", \"corpus\", \"branches\", \"tags\",\r\n];\r\n\r\nexport var PreferenceList = [\r\n    \"author\", \r\n    \"message\",\r\n    \"file\", \r\n    \"commitType\",\r\n    \"commitDate\", \r\n];\r\n\r\nexport var PreferenceWeights = {\r\n    author: 1,\r\n    commitDate: 1,\r\n    file: 1,\r\n    message: 1,\r\n    commitType: 1,\r\n};\r\n\r\nexport var AttrsAbbreviationMap = {\r\n    \"authors\": \"Ⓐ\",\r\n    \"keywords\": \"Ⓜ\", \r\n    \"commitTypes\": \"Ⓣ\",\r\n    \"touchCountByFiles\": \"Ⓕ\", \r\n    \"touchCountByDirs\": \"Ⓓ\",\r\n}\r\n\r\nexport var BranchTypes = {\r\n    MAIN_STEM: \"MAIN_STEM\",\r\n    EXPLICIT: \"EXPLICIT\", \r\n    IMPLICIT: \"IMPLICIT\",\r\n    PR_MERGED: \"PR_MERGED\",\r\n    PR_CLOSED: \"PR_CLOSED\",\r\n    PR_OPEN: \"PR_OPEN\",\r\n}\r\n\r\n// export class CommitClusterContainer {\r\n//     constructor() {\r\n//         this.clusterList = [];\r\n//     }\r\n\r\n//     getClusterCount() {\r\n//         return this.clusterList.length;\r\n//     }\r\n\r\n//     addCluster(cluster) {\r\n//         this.clusterList.push(cluster);\r\n//     }\r\n// }","import { createAction, handleActions } from 'redux-actions';\nimport { PreferenceWeights, CapturedSummaryInfo, BranchTypes } from \"../components/analyzer/GithruClasses\";\n\nconst UPDATE_CLUSTER_OVERVIEW_HEIGHT = \"./UPDATE_CLUSTER_OVERVIEW_HEIGHT\";\nconst UPDATE_GLOBAL_COMMITS_BY_TEMPORAL_FILTER = './UPDATE_GLOBAL_COMMITS_BY_TEMPORAL_FILTER';\nconst UPDATE_COMMITS_BY_TEMPORAL_FILTER = './UPDATE_COMMITS_BY_TEMPORAL_FILTER';\nconst UPDATE_COMMITS_BY_TEMPORAL_BRUSH = \"./UPDATE_COMMITS_BY_TEMPORAL_BRUSH\";\nconst UPDATE_CLUSTER_THRESHOLD = \"./UPDATE_CLUSTER_THRESHOLD\";\n// const UPDATE_SELECTED_CLUSTER_DATA_FOR_SUMMARY = \"./UPDATE_SELECTED_CLUSTER_DATA_FOR_SUMMARY\";\nconst UPDATE_NONCONFLICT_GROUPING_LEVEL = \"./UPDATE_NONCONFLICT_GROUPING_LEVEL\";\nconst UPDATE_RELEASE_BINNING_LEVEL = \"./UPDATE_RELEASE_BINNING_LEVEL\";\nconst UPDATE_SUMMARY_BY_LOC = \"./UPDATE_SUMMARY_BY_LOC\";\nconst UPDATE_KEYWORD_FILTER_LIST = \"./UPDATE_KEYWORD_FILTER_LIST\";\nconst UPDATE_PREFERENCE_WEIGHTS = \"./UPDATE_PREFERENCE_WEIGHTS\";\nconst UPDATE_HIDE_FILES = \"./UPDATE_HIDE_FILES\";\nconst UPDATE_HEURISTIC_MERGE = \"./UPDATE_HEURISTIC_MERGE\";\n\nconst ADD_CAPTURED_SUMMARY_INFO_LIST = \"./ADD_CAPTURED_SUMMARY_INFO_LIST\";\nconst REMOVE_CAPTURED_SUMMARY_INFO_LIST = \"./REMOVE_CAPTURED_SUMMARY_INFO_LIST\";\nconst UPDATE_CURRENT_CAPTURED_SUMMARY_INFO_ID = \"./UPDATE_CURRENT_CAPTURED_SUMMARY_INFO_ID\";\nconst ADD_ITEMS_TO_CAPTURED_SUMMARY_INFO = \"./ADD_ITEMS_TO_CAPTURED_SUMMARY_INFO\";\nconst REMOVE_ITEM_FROM_CAPTURED_SUMMARY_INFO = \"./REMOVE_ITEM_FROM_CAPTURED_SUMMARY_INFO\";\n\nconst ADD_FRAGMENT_HISTORY = \"./ADD_FRAGMENT_HISTORY\";\nconst CLEAR_FRAGMENTS = \"./CLEAR_FRAGMENTS;\"\nconst REGISTER_FAVORITE_FRAGMENT = \"./REGISTER_FAVORITE_FRAGMENT\";\nconst UNREGISTER_FAVORITE_FRAGMENT = \"./UNREGISTER_FAVORITE_FRAGMENT\";\nconst UPDATE_CAPTURED_SUMMARY_INFO_LIST_FOR_COMPARE = \"./UPDATE_CAPTURED_SUMMARY_INFO_LIST_FOR_COMPARE\";\n// const UPDATE_SHOW_PULL_REQUEST_BRANCH = \"./UPDATE_SHOW_PULL_REQUEST_BRANCH\";\nconst UPDATE_HIGHLIGHT_QUERY = \"./UPDATE_HIGHLIGHT_QUERY\";\nconst UPDATE_SHOW_MERGE_LINK = \"./UPDATE_SHOW_MERGE_LINK\";\nconst UPDATE_BRANCH_SHOW_BY_TYPE = \"./UPDATE_BRANCH_SHOW_BY_TYPE\";\nconst UPDATE_SCROLL_TO_RIGHT = \"./UPDATE_SCROLL_TO_RIGHT\";\n\nexport const updateClusterOverviewHeight = createAction(UPDATE_CLUSTER_OVERVIEW_HEIGHT);\nexport const updateGlobalCommitsByTemporalFilter = createAction(UPDATE_GLOBAL_COMMITS_BY_TEMPORAL_FILTER);\nexport const updateCommitsByTemporalFilter = createAction(UPDATE_COMMITS_BY_TEMPORAL_FILTER);\nexport const udpateCommitsByTemporalBrush = createAction(UPDATE_COMMITS_BY_TEMPORAL_BRUSH);\nexport const updateClusterThreshold = createAction(UPDATE_CLUSTER_THRESHOLD);\n// export const updateSelectedClusterDataForSummary = createAction(UPDATE_SELECTED_CLUSTER_DATA_FOR_SUMMARY);\nexport const updateNonConflictGroupingLevel = createAction(UPDATE_NONCONFLICT_GROUPING_LEVEL);\nexport const updateReleaseBinningLevel = createAction(UPDATE_RELEASE_BINNING_LEVEL);\nexport const updateSummaryByLOC = createAction(UPDATE_SUMMARY_BY_LOC);\nexport const updateKeywordFilterList = createAction(UPDATE_KEYWORD_FILTER_LIST);\nexport const updatePreferenceWeights = createAction(UPDATE_PREFERENCE_WEIGHTS);\nexport const updateHideFiles = createAction(UPDATE_HIDE_FILES);\nexport const updateUseHeuristicMerge = createAction(UPDATE_HEURISTIC_MERGE);\n// export const updateShowPullRequestBranch = createAction(UPDATE_SHOW_PULL_REQUEST_BRANCH);\n\nexport const addCapturedSummaryInfoList = createAction(ADD_CAPTURED_SUMMARY_INFO_LIST);\nexport const removeCapturedSummaryInfoList = createAction(REMOVE_CAPTURED_SUMMARY_INFO_LIST);\nexport const updateCurrentCapturedSummaryInfoId = createAction(UPDATE_CURRENT_CAPTURED_SUMMARY_INFO_ID);\nexport const addItemsToCapturedSummaryInfo = createAction(ADD_ITEMS_TO_CAPTURED_SUMMARY_INFO);\nexport const removeItemFromCaptureSummaryInfo = createAction(REMOVE_ITEM_FROM_CAPTURED_SUMMARY_INFO);\n\nexport const addFragmentHistory = createAction(ADD_FRAGMENT_HISTORY);\nexport const clearFragments = createAction(CLEAR_FRAGMENTS);\nexport const registerFavoriteFragment = createAction(REGISTER_FAVORITE_FRAGMENT);\nexport const unregisterFavoriteFragment = createAction(UNREGISTER_FAVORITE_FRAGMENT);\n\nexport const updateCapturedSummaryInfoListForCompare = createAction(UPDATE_CAPTURED_SUMMARY_INFO_LIST_FOR_COMPARE);\nexport const updateHighlightQuery = createAction(UPDATE_HIGHLIGHT_QUERY);\nexport const updateShowMergeLink = createAction(UPDATE_SHOW_MERGE_LINK);\nexport const updateBranchShowMapByType = createAction(UPDATE_BRANCH_SHOW_BY_TYPE);\n\nexport const updateScrollToRight = createAction(UPDATE_SCROLL_TO_RIGHT);\n\nconst summaryPane = { \n    width: 1850,\n    left: 250,\n    right: 200,\n    rightPaneMargin: 10,\n};\nconst inspectionPane = {\n    width: 1600,\n};\nconst initBranchShowMapByType = {\n    // MASTER: true,\n    EXPLICIT: true,\n    IMPLICIT: true,\n    PR_MERGED: false,\n    PR_CLOSED: false,\n    PR_OPEN: true,\n}\n\nconst initialState = {\n    gitAnalyzer: undefined,\n    globalCommitSeqSelectionByTemporalFilter: undefined,\n    commitSeqSelectionByTemporalFilter: undefined,\n    commitSeqSelection: undefined,\n\n    layout: {\n        overviewWidth: summaryPane.width - summaryPane.left - summaryPane.right,\n        leftPaneWidth: summaryPane.left,\n        rightPaneWidth: summaryPane.right - summaryPane.rightPaneMargin * 2,\n        rightPaneMargin: summaryPane.rightPaneMargin,\n\n        width: summaryPane.width - summaryPane.left - summaryPane.right,\n\n        clusterOverviewSliderWidth: 34,\n        clusterOverviewWidth: summaryPane.width - summaryPane.left - summaryPane.right,\n        \n        temporalAreaHeight: 80,\n        temporalSelectorHeight: 150,\n        \n        orgClusterOverviewHeight: 400,\n        clusterOverviewHeight: 400,\n        inspectionPaneWidth: inspectionPane.width,\n\n        titlePanelHeight: 43,\n\n        screenWidth: 3600, //summaryPane.width + inspectionPane.width + \n    },\n    \n    groupingParameters: {\n        preferenceWeights: PreferenceWeights,\n        threshold: 0,\n        nonConflictGroupingLevel: 0,\n        releaseBinningLevel: 1,\n        keywordFilterList: [],\n        useHeuristicMerge: true,\n        // showPullRequestBranch: false,\n        branchShowMapByType: initBranchShowMapByType,\n    },\n\n    highlightQuery: [],\n\n    showMergeLink: false,\n\n    summaryParameters: {\n        summaryByLOC: false,\n        hideFiles: [\"CHANGELOG.md\", \"version.txt\"],  \n    },\n    searchResultList: [],\n    // selectedClusters: new Set(),\n    // selectedClusterDataForSummary: undefined,\n\n    capturedSummaryInfoSeq: 0,\n    capturedSummaryInfoList: [],\n    currentCapturedSummaryInfoId: undefined,\n\n    favoriteFragments: [],\n    fragmentHistory: [],\n\n    capturedSummaryInfoListForCompare: undefined,\n\n    scrollToRight: false,\n};\n\nexport default handleActions({\n    [updateClusterOverviewHeight]: (state, action) => {\n        return {\n            ...state,\n            layout: {\n                ...state.layout,\n                clusterOverviewHeight: action.payload,\n            },\n        }\n    },\n    [updateGlobalCommitsByTemporalFilter]: (state, action) => {\n        return {\n            ...state,\n            globalCommitSeqSelectionByTemporalFilter: action.payload,\n        }\n    },\n    [updateCommitsByTemporalFilter]: (state, action) => {\n        return {\n            ...state,\n            commitSeqSelectionByTemporalFilter: action.payload\n        };\n    },\n    [udpateCommitsByTemporalBrush]: (state, action) => {\n        return {\n            ...state,\n            commitSeqSelection: action.payload,\n        }\n    },\n    \n    // GROUP PARAMETERS\n    [updateClusterThreshold]: (state, action) => {\n        return {\n            ...state,\n            groupingParameters: {\n                ...state.groupingParameters,\n                threshold: action.payload,\n            }\n        }\n    },\n    // [updateSelectedClusterDataForSummary]: (state, action) => {\n    //     return {\n    //         ...state,\n    //         selectedClusterDataForSummary: action.payload,\n    //     }\n    // },\n    [UPDATE_NONCONFLICT_GROUPING_LEVEL]: (state, action) => {\n        return {\n            ...state,\n            groupingParameters: {\n                ...state.groupingParameters,\n                nonConflictGroupingLevel: action.payload,\n            }\n        }\n    },\n    [UPDATE_RELEASE_BINNING_LEVEL]: (state, action) => {\n        return {\n            ...state,\n            groupingParameters: {\n                ...state.groupingParameters,\n                releaseBinningLevel: action.payload,\n            }\n        }\n    },\n    [UPDATE_KEYWORD_FILTER_LIST]: (state, action) => {\n        return {\n            ...state,\n            groupingParameters: {\n                ...state.groupingParameters,\n                keywordFilterList: action.payload,\n            }\n        }\n    },\n    [updateUseHeuristicMerge]: (state, action) => {\n        return {\n            ...state,\n            groupingParameters: {\n                ...state.groupingParameters,\n                useHeuristicMerge: action.payload,\n            }\n        }\n    },\n    [UPDATE_PREFERENCE_WEIGHTS]: (state, action) => {\n        return {\n            ...state,\n            groupingParameters: {\n                ...state.groupingParameters,\n                preferenceWeights: action.payload,\n            }\n        }\n    },\n    // [UPDATE_SHOW_PULL_REQUEST_BRANCH]: (state, action) => {\n    //     return {\n    //         ...state,\n    //         groupingParameters: {\n    //             ...state.groupingParameters,\n    //             showPullRequestBranch: action.payload,\n    //         }\n    //     }\n    // },\n    [updateBranchShowMapByType]: (state, action) => {\n        let [type, bool] = action.payload;\n        \n        let map = {...state.groupingParameters.branchShowMapByType};\n        map[type] = bool;\n\n        return {\n            ...state,\n            groupingParameters: {\n                ...state.groupingParameters,\n                branchShowMapByType: map,\n            }\n        }\n    },\n\n    // SUMMARY PARAMS\n    [UPDATE_SUMMARY_BY_LOC]: (state, action) => {\n        return {\n            ...state,\n            summaryParameters: {\n                ...state.summaryParameters,\n                summaryByLOC: action.payload,\n            }\n        }\n    },\n    [updateHideFiles]: (state, action) => {\n        return {\n            ...state,\n            summaryParameters: {\n                ...state.summaryParameters,\n                hideFiles: action.payload,\n            }\n        }\n    },\n    \n\n    // CAPTURED SUMMARY INFO\n    [addCapturedSummaryInfoList]: (state, action) => {\n        return {\n            ...state,\n            capturedSummaryInfoSeq: state.capturedSummaryInfoSeq+1,\n            capturedSummaryInfoList: \n                state.capturedSummaryInfoList.concat(\n                    new CapturedSummaryInfo(state.capturedSummaryInfoSeq, action.payload[0], {...action.payload[1]}))\n        }\n    },\n    [removeCapturedSummaryInfoList]: (state, action) => {\n        state.capturedSummaryInfoList.splice(+action.payload, 1);\n\n        return {\n            ...state,\n            capturedSummaryInfoList: state.capturedSummaryInfoList,\n        }\n    },\n    [updateCurrentCapturedSummaryInfoId]: (state, action) => {\n        return {\n            ...state,\n            currentCapturedSummaryInfoId: action.payload,\n        }\n    },\n    [addItemsToCapturedSummaryInfo]: (state, action) => {\n        if (state.currentCapturedSummaryInfoId === undefined) return state;\n\n        const itemList = action.payload;\n        let info = state.capturedSummaryInfoList[state.capturedSummaryInfoList.findIndex(d => d.id===state.currentCapturedSummaryInfoId)];\n// console.log(\"NONONO\", itemList, info );\n        let newItems = itemList.filter( item => info.interestedItemList.findIndex(d => d[0] === item[0] && d[1] === item[1]) < 0);\n        info.interestedItemList = info.interestedItemList.concat(newItems);\n\n// console.log(\"addItemsToCapturedSummaryInfo\", newItems, state.capturedSummaryInfoList, info.interestedItemList);\n        return {\n            ...state,\n            capturedSummaryInfoList: [].concat(state.capturedSummaryInfoList)\n        }\n    },\n    [removeItemFromCaptureSummaryInfo]: (state, action) => {\n        let info = state.capturedSummaryInfoList[state.capturedSummaryInfoList.findIndex(d => d.id===state.currentCapturedSummaryInfoId)];\n        // let info = state.capturedSummaryInfoList[state.currentCapturedSummaryInfoId];\n        info.interestedItemList.splice(+action.payload, 1);\n        info.interestedItemList = [].concat(info.interestedItemList);\n\n// console.log(\"addItemsToCapturedSummaryInfo\", newItems, state.capturedSummaryInfoList, info.interestedItemList);\n        return {\n            ...state,\n            capturedSummaryInfoList: [].concat(state.capturedSummaryInfoList)\n        }\n    },\n    \n    \n    // FRAGMENTS\n    [addFragmentHistory]: (state, action) => {\n        return {\n            ...state,\n            fragmentHistory: state.fragmentHistory.concat([action.payload]),\n        }\n    },\n    [clearFragments]: (state, action) => {\n        return {\n            ...state,\n            fragmentHistory: [],\n            favoriteFragments: [],\n        }\n    },\n    [registerFavoriteFragment]: (state, action) => {\n// console.log(\"registerFavoriteFragment\", state.favoriteFragments, action.payload)\n        let fragment = action.payload;\n        let exists = false;\n        for (let fi = 0; fi < state.favoriteFragments.length; fi++) {\n            let d = state.favoriteFragments[fi];\n            if (d[0] === fragment[0] && d[1] === fragment[1]) {\n                exists = true;\n                break;\n            }\n        }\n        if (!exists) {\n            return {\n                ...state,\n                favoriteFragments: state.favoriteFragments.concat([fragment]),\n            }\n        } else return state;\n    },\n    [unregisterFavoriteFragment]: (state, action) => {\n        let fragment = action.payload;\n        let index = state.favoriteFragments.findIndex(d => d[0] === fragment[0] && d[1] === fragment[1]);\n        state.favoriteFragments.splice(index, 1);\n// console.log(\"unregisterFavoriteFragment\", fragment, index)\n        if (index >= 0) {\n            return {\n                ...state,\n                favoriteFragments: [].concat(state.favoriteFragments),\n            }\n        } else return state;\n    },\n    [updateCapturedSummaryInfoListForCompare]: (state, action) => {\n        return {\n            ...state,\n            capturedSummaryInfoListForCompare: action.payload,\n        }\n    },\n    [UPDATE_HIGHLIGHT_QUERY]: (state, action) => {\n        return {\n            ...state,\n            highlightQuery: action.payload,\n        }\n    },\n    [UPDATE_SHOW_MERGE_LINK]: (state, action) => {\n        return {\n            ...state,\n            showMergeLink: action.payload,\n        }\n    },\n    [UPDATE_SCROLL_TO_RIGHT]: (state, action) => {\n        return {\n            ...state,\n            scrollToRight: action.payload,\n        }\n    },\n}, initialState);","import * as colors from \"@material-ui/core/colors\";\nimport * as d3 from \"d3\";\n\nexport const BranchColors = {\n    MAIN_STEM: colors.blue[900],\n    EXPLICIT: colors.cyan[700],\n    IMPLICIT: colors.grey[400],\n    PR_MERGED: colors.purple[600],\n    PR_CLOSED: colors.pink[600],\n    PR_OPEN: colors.green[300],\n};\n\n// const colorRange = d3.range(5, 0, -1);\n\nconst getListOfColors = (color) => {\n    // let colorRange = [7, 4, 2, 1].map(d => d * 100);\n    let colorRange = [\"A700\", 600, 400, 200, 100];\n    if (!(\"A700\" in color)) colorRange[0] = 700;\n    return colorRange.map(d => color[d]);\n}\n\nexport const AttributeColors = {\n    id: getListOfColors(colors.blueGrey),\n    message: getListOfColors(colors.teal),\n    corpus: getListOfColors(colors.teal),\n\n    author: getListOfColors(colors.brown),\n    keyword: getListOfColors(colors.teal),\n    commitType: getListOfColors(colors.lightGreen),\n    file: getListOfColors(colors.amber),\n    dir: getListOfColors(colors.orange),\n    // commit: [\n    //     \"#90a4ae\",\n    //     \"#b0bec5\",\n    //     \"#cfd8dc\",\n    //     \"#eceff1\",\n    //     \"#78909c\",\n    // ],\n    commit: [600, 400, 300, 200, 100].map(d => colors.blueGrey[d]),\n    date: [\n        \"#90a4ae\",\n        \"#b0bec5\",\n        \"#cfd8dc\",\n        \"#eceff1\",\n        \"#78909c\",\n    ],\n    highlight: getListOfColors(colors.red),\n}\n\nconst ScoreColorMap = {\n    author: AttributeColors.author,\n    commitDate: AttributeColors.date,\n    file: AttributeColors.file,\n    message: AttributeColors.keyword,\n    commitType: AttributeColors.commitType,\n}\n\nexport function getScoreColor(name, colorIndex) {\n    return ScoreColorMap[name][colorIndex];\n}\n\nexport function changeRGBColorByOpacity(color, opacity) {\n    let c = d3.rgb(color);\n    return \"rgb(\" + c.r + \",\" + c.g + \",\" + c.b + \", \" + opacity + \")\";\n}\n\n// export const ClusterColorMap = {\n//     master: colors.blue[900],\n//     // stale: blueGrey[400],\n//     implicit: colors.grey[400],\n//     staleAndImplicit: colors.blueGrey[600],\n// }\n\nexport const Tableau10 = [\"#4e79a7\",\"#f28e2c\",\"#e15759\",\"#76b7b2\",\"#59a14f\",\"#edc949\",\"#af7aa1\",\"#ff9da7\",\"#9c755f\",\"#bab0ab\"];\n","import { intersection, union } from \"lodash\";\n\nexport function getScoreTemp(a, b, verbose = false) {\n    function getFileList(commit) {\n        if (\"diffStat\" in commit && \"files\" in commit.diffStat) {\n            return Object.keys(commit[\"diffStat\"][\"files\"]);\n        } else {\n            return [];\n        }\n    }\n\n    function getJaccardSimilarity(a, b, test) {\n        a = (!(a instanceof Array) ? [a] : a);\n        b = (!(b instanceof Array) ? [b] : b);\n\n        let intersectionLen = intersection(a, b).length;\n        let unionLen = union(a, b).length;\n\n        return (unionLen !== 0 ? (intersectionLen / unionLen) : 1);\n    }\n\n    function getTfidfCosineSimilarity(a,b) {\n        let aVector = a;\n        let bVector = b;\n\n        if (\"-1\" in aVector || \"-1\" in bVector) return 0;\n        \n        let aKeys = Object.keys(aVector);\n        let bKeys = Object.keys(bVector);\n\n        let innerProduct = 0;\n        while (aKeys.length > 0 && bKeys.length > 0) {\n            if      (aKeys[0] < bKeys[0]) { aKeys.shift(); }\n            else if (aKeys[0] > bKeys[0]) { bKeys.shift(); }\n            else {\n                innerProduct = innerProduct + aVector[aKeys[0]] * bVector[bKeys[0]];\n                aKeys.shift();\n                bKeys.shift();\n            }\n        }\n\n        let aLengthSqr = 0, bLengthSqr = 0;\n\n        Object.keys(aVector).forEach(k => {\n            aLengthSqr += aVector[k] * aVector[k];\n        })\n\n        Object.keys(bVector).forEach(k => {\n            bLengthSqr += bVector[k] * bVector[k];\n        })\n\n        let cosine_sim = innerProduct / Math.sqrt(aLengthSqr * bLengthSqr);\n        return cosine_sim;\n    }\n\n    let score = {}\n\n    // committer\n    // score[\"committer\"] = (a.author === b.author ? 1 : 0);\n    score[\"author\"] = getJaccardSimilarity(a.author, b.author, \"author\");\n    // commit type\n    score[\"commitType\"] = getJaccardSimilarity(a.commitType, b.commitType, \"type\");\n    // file\n    score[\"file\"] = getJaccardSimilarity(getFileList(a), getFileList(b), \"file\");\n    // message\n    score[\"message\"] = getTfidfCosineSimilarity(a[\"tfidf\"], b[\"tfidf\"]);\n\n    return score;\n}","import { CommitCluster, CommitNode, CommitEdge, CommitAttributeNames, PreferenceWeights, BranchTypes } from \"./GithruClasses\";\r\nimport * as d3 from 'd3';\r\nimport { BranchColors, Tableau10, AttributeColors } from \"../ColorClasses\";\r\nimport { getScoreTemp } from \"../CalSimilarity\";\r\n\r\nexport class GitAnalyzer {\r\n    \"use strict\";\r\n\r\n    constructor(json, scoreJson, corpusJson, pullJson, defaultThresholdStep, repoName, releasePrefix = \"\", mainStemBranchName) {\r\n        this.lowLevel = 2;\r\n\r\n        this.roots = [];\r\n        this.allNodeList = [];\r\n        this.nodesMap = {};\r\n        this.edges = [];\r\n\r\n        this.firstParentIdMap = {};\r\n        this.childIdMap = {};\r\n        this.parentIdMap = {};\r\n\r\n        this.maxY = 0;\r\n        this.headId = \"\";\r\n\r\n        this.branchesMap = {};\r\n\r\n        this.gitData = json;\r\n        this.scoreData = scoreJson;\r\n        this.corpusData = corpusJson;\r\n        this.pullData = (pullJson === undefined ? [] : pullJson);\r\n        this.pullMapByNumber = {};\r\n        this.defaultThresholdStep = defaultThresholdStep;\r\n        this.pref = PreferenceWeights;\r\n\r\n        this.repoName = repoName;\r\n        this.mainStemBranchName = mainStemBranchName;\r\n        // this.pullMap = {};\r\n        this.releasePrefix = (releasePrefix === undefined ? \"\" : releasePrefix);\r\nconsole.log(\"URL Params:\", this.repoName, this.mainStemBranchName);\r\n        this.mergeSquashCommitNumber = -1;\r\n\r\n        this.buildContextAbstractionGraph();\r\n    }\r\n\r\n    getNodeById(id) {\r\n        return this.nodesMap[id];\r\n    }\r\n\r\n    addRoot(node) {\r\n        node.isRoot = true;\r\n        this.roots.push(node);\r\n    }\r\n\r\n    addNode(node) {\r\n        // if (node.commit.isHead === true) {\r\n        if ( (this.mainStemBranchName === undefined && node.commit.isHead === true)\r\n                || (this.mainStemBranchName !== undefined \r\n                    && node.commit.branches !== undefined\r\n                    && node.commit.branches.filter( b => b === \"origin/\" + this.mainStemBranchName).length > 0)) {\r\n            this.headId = node.id;\r\n            node.isMainStem = true;\r\n            node.implicitBranchNo = 0;\r\n            // node.y = 1;\r\nconsole.log(\"meet head\", node);\r\n        }\r\n        this.nodesMap[node.id] = node;\r\n    }\r\n\r\n    // 중복처리 해야함.\r\n    addEdge(edge) {\r\n        if (edge.fromNodeId in this.parentIdMap) this.parentIdMap[edge.fromNodeId].push(edge.toNodeId);\r\n        else this.parentIdMap[edge.fromNodeId] = [edge.toNodeId];\r\n\r\n        if (edge.toNodeId in this.childIdMap) this.childIdMap[edge.toNodeId].push(edge.fromNodeId);\r\n        else this.childIdMap[edge.toNodeId] = [edge.fromNodeId];\r\n\r\n        this.edges.push(edge);\r\n    }\r\n\r\n    getChildNodes(node) {\r\n        if (this.childIdMap[node.id] === undefined) return [];\r\n        return this.childIdMap[node.id].map( (id) => this.getNodeById(id));\r\n    }\r\n\r\n    getParentNodes(node) {\r\n        if (this.parentIdMap[node.id] === undefined) return [];\r\n        return this.parentIdMap[node.id].map( (id) => this.getNodeById(id));\r\n    }\r\n    \r\n    ////////////////////////////////////////////////\r\n    // RECURSIVELY FIND MERGE NODES\r\n    findMerges(rootNode) {\r\nif (rootNode.id.startsWith(\"461cc1\")) console.log(\"rootNode\", rootNode)\r\n        let initStack = rootNode.commit[\"parents\"]\r\n            .filter( (d, i) => i !== 0 ) // not first Parent\r\n            .map( id => this.getNodeById(id))\r\n            .filter( node => (!node.isMainStem && !node.isMergeTraversed && (node.implicitBranchNo !== rootNode.implicitBranchNo) ));\r\n        \r\n        while (initStack.length > 0) {\r\n            let n = initStack.pop();\r\n            n.isMergeTraversed = true;\r\n            n.mergedToNode = rootNode;\r\n            rootNode.mergeNodes.push(n);\r\n            if (n.isRelease) rootNode.mergeNodesContainRelease = true;\r\n            if (n.isMajorRelease) rootNode.mergeNodesContainMajorRelease = true;\r\n\r\n            let more = n.commit[\"parents\"]\r\n                .map( id => this.getNodeById(id) )\r\n                .filter( node => (!node.isMainStem && !node.isMergeTraversed && node.implicitBranchNo !== rootNode.implicitBranchNo) );\r\n                // .filter( node => (!node.isMainStem && !node.isMergeTraversed) );// &&node.implicitBranchNo !== rootNode.implicitBranchNo) );\r\n            if (more.length > 0) initStack = initStack.concat(more);\r\n// if (n.id.startsWith(\"1848f7d\")) console.log(\"root \", rootNode, initStack.map(d=>d))\r\n// if (n.id.startsWith(\"461cc1\")) console.log(\"got it\", n, n.commit[\"parents\"].map( id => this.getNodeById(id) )[0].isMergeTraversed, initStack.map(d=>d));\r\n        }\r\n\r\n        // MAKE SQUASH COMMIT FOR HEURISTIC MERGE\r\n        if (rootNode.mergeNodes.length === 0) return;\r\n\r\n        rootNode.mergeSquashCommit = {\r\n            no: this.mergeSquashCommitNumber--,\r\n            author: Array.from([rootNode, ...rootNode.mergeNodes].reduce( (prev, n) => prev.add(n.commit.author), new Set())),\r\n            commitType: Array.from([rootNode, ...rootNode.mergeNodes].reduce( (prev, n) => prev.add(n.commit.commitType), new Set())),\r\n            diffStat: rootNode.commit.diffStat,\r\n            corpus: Array.from(\r\n                [rootNode, ...rootNode.mergeNodes].reduce( (prev, n) => {\r\n                    [\r\n                        ...n.commit.corpus, \r\n                        ...n.pullRequestHeads.reduce( (p, number) => p.concat(this.pullMapByNumber[number].corpus), [])\r\n                    ].forEach(corpus => prev.add(corpus));\r\n                    \r\n                    return prev;\r\n                }, new Set())),\r\n            tfidf: [rootNode, ...rootNode.mergeNodes].reduce( (prev, n) => {\r\n                    let tfidfList = Object.entries(n.commit.tfidf);\r\n                    n.pullRequestHeads.map(number => this.pullMapByNumber[number]).forEach(pull => {\r\n                        tfidfList = tfidfList.concat(Object.entries(pull.tfidf));\r\n                    });\r\n                    tfidfList.forEach( entry => {\r\n                        let [key, value] = entry;\r\n                        if (key in prev) prev[key] += value;\r\n                        else prev[key] = value;\r\n                    });\r\n                    return prev;\r\n                }, {}),\r\n            date:rootNode.commit.date,\r\n        }\r\n    }\r\n\r\n    buildContextAbstractionGraph() {\r\n        let commits = this.gitData.reverse();\r\n        \r\n        // nodes\r\n        commits.forEach( (commit, index) => {\r\n            let node = new CommitNode(commit.id, commit);\r\n            this.addNode(node);\r\n            this.allNodeList.push(node);\r\n\r\n            node.seq = index;\r\n\r\n            // root check.\r\n            if (commit.parents.length === 0) {\r\n                this.addRoot(node);\r\n            } else {\r\n                this.firstParentIdMap[node.id] = commit.parents[0];\r\n            }\r\n\r\n            // merge commit check\r\n            if (\"merge\" in commit && commit[\"merge\"].length > 0) {\r\n                node.isMergeCommit = true;\r\n            }\r\n\r\n            node.cloc = node.commit[\"diffStat\"][\"insertions\"] + node.commit[\"diffStat\"][\"deletions\"];\r\n        });\r\n\r\n        ///////////////////////////////////////////\r\n        // connect pulls to merged commits\r\n        if (this.pullData !== undefined) {\r\n            // SET pull map\r\n            this.pullData.forEach(p => this.pullMapByNumber[p.number] = p);\r\n\r\n            this.pullData.forEach( (pull) => {\r\n                let number = pull.number;\r\n                let parent = pull.head.sha;\r\n                let child = pull.merge_commit_sha;\r\n    if (this.getNodeById(parent) === undefined || (child !== undefined && this.getNodeById(child) === undefined)) return;\r\n    // console.log(\"this.getNodeById[parent]\", this.getNodeById(parent), parent)\r\n                this.getNodeById(parent).pullRequestHeads.push(number);\r\n\r\n                if (d => d.merge_commit_sha !== null) {\r\n                    if ( !(child in this.nodesMap) ||  !(parent in this.nodesMap)) return;\r\n\r\n                    let childCommit = this.nodesMap[child].commit;\r\n\r\n                    if (childCommit.parents.findIndex(d => d === parent) >= 0) {\r\n                        // console.log(\"already pull linked\")\r\n                        return;\r\n                    }\r\n\r\n                    childCommit.parents.push(parent);\r\n                    if (childCommit.merge === undefined) {\r\n                        childCommit.merge = [].concat([childCommit.parents.map(d => d.substring(0, 9) + \"_p\")]);\r\n                    } else {\r\n                        childCommit.merge.push(parent.substring(0, 9) + \"_p\");\r\n                    }\r\n\r\n                    this.getNodeById(childCommit.id).isMergeCommit = true;\r\n                    this.nodesMap[child].pullRequestMerges.push(number);\r\n                }\r\n            });\r\n        }\r\n\r\n        // edge(network)\r\n        commits.forEach(commit => {\r\n            commit.parents.forEach(parentId => {\r\n                let edge = new CommitEdge(commit.id, parentId);\r\n                this.addEdge(edge);\r\n            });\r\n        });\r\n\r\n        // set tagging information\r\n        this.allNodeList.forEach(d => {\r\n            if (d.commit.tags !== undefined && d.commit.tags.length > 0) {\r\n                let tags = d.commit.tags.filter(tag => tag.startsWith(this.releasePrefix) === true).map(tag => tag.substring(this.releasePrefix.length, tag.length));\r\n                if (tags.length <= 0) return;\r\n\r\n                d.isRelease = true;\r\n                d.releaseTagString = tags.join(\",\");\r\n                tags = tags.filter(tag => {\r\n                    let items = tag.split(\".\");\r\n                    if (items.length === 2 && items[1] === \"0\") return true;\r\n                    if (items.length === 3 && items[1] === \"0\" && items[2] === \"0\") return true;\r\n                    else return false;\r\n                });\r\n                if (tags.length > 0) d.isMajorRelease = true;\r\n            }\r\n        });\r\n\r\n        let branchedNodesNotHead = this.allNodeList.filter( node => \r\n            node.id !== this.headId\r\n            // && this.getChildNodes(node).length === 0 \r\n            && node.commit.branches !== undefined && node.commit.branches.length > 0\r\n        ).reverse();\r\n\r\n        // branchedNodes.reverse();\r\n        let branchedNodes = [this.getNodeById(this.headId)].concat(branchedNodesNotHead);\r\n        \r\n        let FPTreeNodeListMapByNodeId = {};\r\n// console.log(\"branchedNodes\", branchedNodes)\r\n\r\n        branchedNodes.forEach( branchedNode => {\r\n            // newBranchNoByNodeId[branchedNode.id] = newBranchNo++;\r\n// if (branchedNode.id.startsWith(\"b35dabf\")) console.log(\"branchedNode\", branchedNode);\r\n            let id = branchedNode.id;\r\n            let firstParentNodesOrderedList = [];\r\n            let firstParentTreeBranchNames = this.nodesMap[id].commit.branches;\r\n            let isHeadBranch = (id === this.headId);\r\n            branchedNode.isLeaf = true;\r\n            branchedNode.traversed = true;\r\n            branchedNode.firstParentTreeBranchNames = firstParentTreeBranchNames;\r\n            branchedNode.firstParentTreeLeafNode = branchedNode;\r\n\r\n            while (id in this.firstParentIdMap) {\r\n                id = this.firstParentIdMap[id];\r\n                let node = this.getNodeById(id);\r\n\r\n// if (branchedNode.id.startsWith(\"b35dabf\")) console.log(\"branchedNode while \", node);\r\n                if (node.traversed === true) break;\r\n\r\n                if (isHeadBranch) {\r\n                    node.isMainStem = true;\r\n                    node.implicitBranchNo = 0;\r\n                } else {\r\n                    if (node.commit.branches !== undefined && node.commit.branches.length > 0) {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                firstParentNodesOrderedList.push(node);\r\n\r\n                // TODO - suppose that isHead = origin/master\r\n                // it is NOT commit's branch name but node's\r\n                node.firstParentTreeBranchNames = firstParentTreeBranchNames;\r\n                node.firstParentTreeLeafNode = branchedNode;\r\n                // node.branches = headBranchNames;\r\n                node.traversed = true;\r\n            }\r\n\r\n            FPTreeNodeListMapByNodeId[branchedNode.id] = firstParentNodesOrderedList;\r\n        });\r\n\r\n        // branchedNodes.forEach( node => {\r\n        //     FPTreeNodeListMapByNodeId[node.id]\r\n        //         .reverse()\r\n        //         .filter(d => d.isMergeCommit)\r\n        //         .forEach( node => {\r\n        //             if (!node.isMergeTraversed) this.findMerges(node);\r\n        //         });\r\n        // });\r\n\r\n                    \r\n        // if (isHeadBranch) headFPTreeNodes = firstParentNodesOrderedList;\r\n// console.log(\"process firstparentTree mergenodes\", branchedNode.commit.branches, firstParentNodesOrderedList)           \r\n// if (isHeadBranch) {\r\n//     firstParentNodesOrderedList//.reverse()\r\n//     .filter(d => d.isMergeCommit)\r\n//     .forEach( node => {\r\n//         if (!node.isMergeTraversed) this.findMerges(node);\r\n//     });\r\n// }\r\n\r\n        /////////////////////////////////////\r\n        // annotating branch\r\n        // let branchNodes = this.allNodeList.filter( node => node.commit.branches !== undefined);\r\n        // let branchNo = 1;\r\n        // branchNodes.forEach(node => {\r\n        //     node.commit.branches.forEach(b => {this.branchesMap[b] = branchNo++;});\r\n        //     this.branchBackTracking(node, node.commit.branches);\r\n        // });\r\n\r\n        /////////////////////////////////////\r\n        // get implicit branch number\r\n        // 아마도.. 앞에서부터 한건 root를 골라내기 위함인 것 같다.\r\n        let bno = 0;\r\n        let rootCount = 0;\r\n        this.allNodeList.forEach(node => {\r\n            // when meet other roots\r\n            if (node.isRoot && !node.isMainStem) {\r\n                node.implicitBranchNo += 10000 + this.allNodeList.length + rootCount++;\r\n            }\r\n\r\n            let firstParentChildNodes = this.getChildNodes(node).filter(childNode => this.firstParentIdMap[childNode.id] === node.id);\r\n            if (firstParentChildNodes.length === 0) {\r\n                node.hasNoFirstParentChild = true;\r\n                return;\r\n            }\r\n            let implicitBranchNo = node.implicitBranchNo;\r\n            firstParentChildNodes\r\n                .sort( (a, b) => (b.seq - a.seq))\r\n                .sort( (a, b) => (b.implicitBranchNo - a.implicitBranchNo))\r\n                .forEach( (childNode, i) => {\r\n                    if (i === 0) {\r\n                        childNode.implicitBranchNo = implicitBranchNo;\r\n                    } else {\r\n                        childNode.implicitBranchNo = ++bno;\r\n                    }\r\n            });\r\n        });\r\n\r\n        // branchedNodes = [this.getNodeById(this.headId)].concat(branchedNodesNotHead.reverse());\r\n        branchedNodes = [this.getNodeById(this.headId)].concat(branchedNodesNotHead);\r\n        branchedNodes.forEach( node => {\r\n            FPTreeNodeListMapByNodeId[node.id]\r\n                .reverse()\r\n                .filter(d => d.isMergeCommit)\r\n                .forEach( node => {\r\n                    if (!node.isMergeTraversed) this.findMerges(node);\r\n                });\r\n        });\r\n\r\n        // back to original\r\n        this.gitData.reverse();\r\n    }\r\n\r\n    branchBackTracking(node, branchNames) {\r\n        // masterFist가 보일 때 까지, 혹은 끝까지 갈 때 까지 add 시키자.\r\n\r\n        // TODO \r\n        // branch 가 없는 애들을 찾아서 first parent가 이름을 가지고 있을 때까지 돌려서 해당 이름을 쭉 가지게 만들고\r\n        // origin/master는 골라서 유지하도록 만들어야 함.\r\n        node.branches = node.branches.concat(branchNames);\r\n        node.branchNumbers = node.branchNumbers.concat(branchNames.map(d => this.branchesMap[d]));\r\n        if (node.isMainStem || node.commit.parents.length === 0) {\r\n            return;\r\n        } else {\r\n            this.branchBackTracking(this.nodesMap[node.commit.parents[0]], branchNames);\r\n        }\r\n    }\r\n\r\n    getOverviewClusters(threshold, selection, prefMap = PreferenceWeights, filters, releaseBinningLevel, useHeuristicMerge) {\r\n// console.log(selection)\r\n        let nodeList;\r\n        if (selection !== undefined) nodeList = this.allNodeList.filter( (d, i) => i >= selection[0] && i <= selection[1]);\r\n        else nodeList = this.allNodeList;\r\n        return this.getClusters(threshold, nodeList, prefMap, filters, releaseBinningLevel, useHeuristicMerge);\r\n    }\r\n\r\n    isClusterCut(node, releaseBinningLevel, useHeuristicMerge) {\r\n        // cut clustering(grouping) if meet release node\r\n        if ( (releaseBinningLevel === 2 && (node.isMajorRelease || (useHeuristicMerge && node.mergeNodesContainMajorRelease)))\r\n                || (releaseBinningLevel === 1 && (node.isRelease || (useHeuristicMerge && node.mergeNodesContainRelease)))) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // TODO - need OPTIMIZATION\r\n    keywordMatch = (kfList, node) => kfList.filter( f => {\r\n        let [attr, val] = [f.attrName, f.keyword.toLowerCase()];\r\n// console.log(\"test\", attr, val, node.commit.author, node.commit.author.toLowerCase().indexOf(val))\r\n        switch(attr.toLowerCase()) {\r\n            case \"a\":\r\n                return node.commit.author.toLowerCase().indexOf(val) >= 0;\r\n            case \"t\":\r\n                return node.commit.commitType.toLowerCase().indexOf(val) >= 0;\r\n            case \"f\":\r\n                return Object.keys(node.commit.diffStat.files).filter(name => name.toLowerCase().indexOf(val) >= 0).length > 0;\r\n            case \"m\":\r\n                // return Object.keys(node.commit.corpus).filter(name => name.toLowerCase().indexOf(val) >= 0).length > 0;\r\n                return node.commit.corpus.filter(name => name.toLowerCase().indexOf(val) >= 0).length > 0;\r\n            default:\r\n                return false;\r\n    }}).length > 0;\r\n\r\n    // releaseBinningLevel\r\n    // 0: none, 1: major, 2: isRelease (temporary)\r\n    getClusters(threshold, nodeList, prefMap = PreferenceWeights, keywordFilterList, releaseBinningLevel = 0, useHeuristicMerge = true) {\r\n        // include => >0 인게 있으면 무조건 넣어라. OR.\r\n        // exclude => <0 인게 있으면 무조건 빼라. OR.\r\n        // 둘 다 만족하면 exclude로 하자.\r\n\r\n        // KEYWORD FILTERS\r\n        if (keywordFilterList.length > 0) {\r\n            nodeList.forEach((node) => {\r\n                // console.log(\"filter:::\", node.commit.author, this.keywordMatch(keywordFilterList.filter(f => f.isIncludes), node));\r\n                let inKF = keywordFilterList.filter(f => f.isIncludes);\r\n                let exKF = keywordFilterList.filter(f => !f.isIncludes);\r\n                let isIncludes, isExcludes;\r\n\r\n                if (inKF.length === 0) isIncludes = true;\r\n                else isIncludes = this.keywordMatch(inKF, node);\r\n                if (exKF.length === 0) isExcludes = false;\r\n                else isExcludes = this.keywordMatch(exKF, node);\r\n\r\n                node.isFilteredOut = !(isIncludes && !isExcludes);\r\n        // console.log(\"####!!!\", node.commit.author, node.isFilteredOut, isIncludes, isExcludes)\r\n\r\n            });\r\n        } else {\r\n            nodeList.forEach( node => node.isFilteredOut = false);\r\n        }\r\n        \r\n// console.log(\"getclusters, FILTERS \", keywordFilterList, nodeList);\r\n\r\n        // build threshold set\r\n        let thresholdSet = new Set();\r\n        nodeList.filter(node => !node.isFilteredOut).forEach( (node, i) => {\r\n            let parentNode = node;\r\n            while (true) {\r\n                let nextFirstParentChildNodeWithSameBranchNo = this.getChildNodes(parentNode)\r\n                    .filter(childNode => this.firstParentIdMap[childNode.id] === parentNode.id && parentNode.implicitBranchNo === childNode.implicitBranchNo);\r\n                if (nextFirstParentChildNodeWithSameBranchNo.length === 0) {\r\n                    break;\r\n                } else if (nextFirstParentChildNodeWithSameBranchNo[0]) {\r\n                    let scores = this.getScoreByPreferences(parentNode, nextFirstParentChildNodeWithSameBranchNo[0], prefMap, useHeuristicMerge);\r\n                    thresholdSet.add(scores.sum);\r\n// console.log(\"NaN node\", scores.sum,node, scores, parentNode, nextFirstParentChildNodeWithSameBranchNo[0], prefMap, useHeuristicMerge)\r\n                    break;\r\n                }\r\n                parentNode = nextFirstParentChildNodeWithSameBranchNo[0];\r\n            }\r\n            // let firstParentChildNodes = this.getChildNodes(node).filter(childNode => this.firstParentIdMap[childNode.id] === node.id);\r\n            // firstParentChildNodes.forEach(childNode => {\r\n            //     if (node.implicitBranchNo === childNode.implicitBranchNo) {\r\n            //         let score = this.getScoreByPreferences(node, childNode, prefMap);\r\n            //         thresholdSet.add(score);\r\n            //     }\r\n            // });\r\n        });\r\n        thresholdSet.add(0);\r\n        thresholdSet.add(Object.keys(prefMap).length);\r\n        let sortedThresholdList = [...thresholdSet].sort((a, b) => a - b);\r\n        // sortedThresholdList.push(Object.keys(PreferenceWeights).length);\r\n        // sortedThresholdList = [0].concat(sortedThresholdList);\r\nconsole.log(\"thresholdSet\", thresholdSet, sortedThresholdList, threshold, prefMap);\r\n      \r\n        if (threshold === undefined) {\r\n            threshold = sortedThresholdList[this.defaultThresholdStep];\r\n// console.log(\"new start thr. => \", threshold);\r\n        }\r\n\r\n        let container = [];\r\n        let clusterMapByNodeSeq = {};\r\n        // let prefSum = Object.values(prefMap).reduce( (prev, cur) => { prev += cur; return prev;}, 0);\r\n        // let prefNormalizedThreshold = prefSum * threshold / 100;\r\n        let prefNormalizedThreshold = threshold;\r\n\r\n        let targetNodeList = nodeList.filter(node => !node.isFilteredOut);\r\n        if (useHeuristicMerge) targetNodeList = targetNodeList.filter(node => !node.isMergeTraversed);\r\n        \r\n        targetNodeList.forEach( node => {\r\n                if (clusterMapByNodeSeq[node.seq] !== undefined) return;\r\n\r\n                let cluster = new CommitCluster(container.length, node, prefMap);\r\n                container.push(cluster);\r\n                clusterMapByNodeSeq[node.seq] = cluster;\r\n\r\n                // cut clustering(grouping) if meet release node\r\n                if(this.isClusterCut(node, releaseBinningLevel, useHeuristicMerge)) {\r\n// console.log(\"cut!!!\", node.releaseTagString)\r\n                    return;\r\n                }\r\n\r\n                let parentNode = node;\r\n                while(true) {\r\n                    let firstParentChildNodes = this.getChildNodes(parentNode).filter(\r\n                        childNode => \r\n                        nodeList.indexOf(childNode) >= 0\r\n                        && this.firstParentIdMap[childNode.id] === parentNode.id\r\n                        && parentNode.implicitBranchNo === childNode.implicitBranchNo\r\n                    );\r\n                    \r\n                    if (firstParentChildNodes.length == 0) break;\r\n                    let firstParentChildNode = firstParentChildNodes[0];\r\n                     \r\n                    if (firstParentChildNode.isFilteredOut) {\r\n                        // continue\r\n                        parentNode = firstParentChildNode;\r\n                    } else {\r\n                        let scores = this.getScoreByPreferences(node, firstParentChildNode, prefMap, useHeuristicMerge);\r\n\r\n                        thresholdSet.add(scores.sum);\r\n                        if (scores.sum >= prefNormalizedThreshold) {\r\n                            clusterMapByNodeSeq[firstParentChildNode.seq] = cluster;\r\n                            cluster.addNode(firstParentChildNode, scores);\r\n                            parentNode = firstParentChildNode;\r\n    // console.log(\"grouped!!,\", firstParentChildNode.commit.author, firstParentChildNode)\r\n                        } else {\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    // cut clustering(grouping) if meet release node\r\n                    if(this.isClusterCut(firstParentChildNode, releaseBinningLevel, useHeuristicMerge)) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        );\r\n\r\n        // set parent/child\r\n        let doneSet = new Set();\r\n        container.forEach( cluster => {\r\n            // connect when implicitBranchNo is the same;\r\n            let implicitBranchNo = cluster.nodeList[0].implicitBranchNo;\r\n            if (!doneSet.has(implicitBranchNo)) {\r\n                let sameBranchClusters = container.filter( c => c.nodeList[0].implicitBranchNo === implicitBranchNo).sort( (a, b) => a.nodeList[0].seq - b.nodeList[0].seq);\r\n                sameBranchClusters.filter( (d, i) => i < sameBranchClusters.length - 1).forEach( (cluster, i) => {\r\n                    cluster.child = sameBranchClusters[i + 1];\r\n                    sameBranchClusters[i + 1].parent = cluster;\r\n                });\r\n    \r\n                doneSet.add(implicitBranchNo);\r\n            }\r\n\r\n            // the end of cluster is connected to the first of a cluster, then set.\r\n            // let lastNode = cluster.nodeList.slice(-1)[0];\r\n            // let firstParentChildNodesOnSameBranch = this.getChildNodes(lastNode)\r\n            //     .filter(childNode => this.firstParentIdMap[childNode.id] === lastNode.id && lastNode.implicitBranchNo === childNode.implicitBranchNo);\r\n            // if (firstParentChildNodesOnSameBranch.length > 0) {\r\n            //     let nextCluster = clusterMapByNodeSeq[firstParentChildNodesOnSameBranch[0].seq];\r\n            //     if (nextCluster !== undefined) {\r\n            //         cluster.child = nextCluster;\r\n            //         nextCluster.parent = cluster;  \r\n            //     }\r\n            // }\r\n\r\n            // set branches\r\n            // cluster.branches = Array.from(cluster.nodeList\r\n            //     .filter(d => d.branches !== undefined && d.branches.length > 0)\r\n            //     .reverse()\r\n            //     .reduce( (prev, cur) => {\r\n            //         cur.branches.forEach( d => prev.add(d) );\r\n            //         return prev;\r\n            //     }, new Set())\r\n            // );\r\n\r\n            cluster.branches = Array.from(cluster.nodeList\r\n                .filter(d => d.firstParentTreeBranchNames !== undefined && d.firstParentTreeBranchNames.length > 0)\r\n                .reverse()\r\n                .reduce( (prev, cur) => {\r\n                    // add pr branches first, then explicit branches;\r\n                    cur.firstParentTreeBranchNames.filter(name => name.startsWith(\"origin/pr\")).forEach( d => prev.add(d) );\r\n                    cur.firstParentTreeBranchNames.filter(name => !name.startsWith(\"origin/pr\")).forEach( d => prev.add(d) );\r\n                    return prev;\r\n                }, new Set())\r\n            );\r\n        });\r\n\r\n        // clusterNodes.reverse();\r\n        // let branchNames = Array.from(\r\n        //     clusterNodes.reduce((prevList, cn) => {\r\n        //         cn.cluster.nodeList.reverse();\r\n        //         let l = cn.cluster.nodeList.reduce((prev, node) => prev.concat(node.branches), []);\r\n        //         l.forEach(branchName => prevList.add(branchName));\r\n        //         cn.cluster.nodeList.reverse();\r\n    \r\n        //         return prevList;\r\n        //     }, new Set())\r\n        // );\r\n        // clusterNodes.reverse();\r\n        // let branchName = (branchNames.length === 0 ? \"\" : branchNames[0] + (branchNames.length > 1 ? \", ...\" : \"\"));\r\n    \r\n\r\n\r\n        // console.log(\"cluster cnt = \", container.length);\r\n        // console.log(\"clusterList\", container, \"threshold set\", thresholdSet);\r\n        \r\n        // return [threshold, [...thresholdSet], container];\r\n        return [threshold, sortedThresholdList, container];\r\n    }\r\n\r\n    getLowLevelThresholdAndClusters(cluster, prefMap = PreferenceWeights, useHeuristicMerge) {\r\n        if (cluster === undefined) return [];\r\n\r\n//         let nodeList = cluster.nodeList;\r\n\r\n//         // get low level threshold\r\n//         let thSet = new Set();\r\n//         nodeList.filter( (d, i) => i < (nodeList.length - 2) )\r\n//             .forEach((d, i) => thSet.add(this.getScoreByPreferences(nodeList[i], nodeList[i+1], prefMap)));\r\n//         let sortedThresholdList = [...thSet].sort( (a, b) => a - b );\r\n\r\n//         let prefSum = Object.values(prefMap).reduce( (prev, cur) => { prev += cur; return prev;}, 0);\r\n//         let newThreshold = sortedThresholdList[Math.min(this.lowLevel, sortedThresholdList.length - 1) - 1];\r\n//         if (newThreshold === undefined) newThreshold = 0;\r\n//         newThreshold = (newThreshold / prefSum * 100).toFixed(1);\r\n// console.log(\"RE THRE!         \", sortedThresholdList, newThreshold, newThreshold/prefSum);\r\n        this.defaultThresholdStep = 2;\r\n        return this.getClusters(undefined, cluster.nodeList, prefMap, useHeuristicMerge);\r\n    }\r\n\r\n    static getTextValue(dataName, value) {\r\n        if (dataName.endsWith(\"Files\") || dataName.endsWith(\"Dirs\")) {\r\n            let vs = value.split(\"/\");\r\n            let fileName = vs.slice(-1)[0];\r\n            if (vs.length > 1) fileName = \".../\" + fileName;\r\n            // return fileName;\r\n            return value;\r\n        } else if (dataName === \"authors\") {\r\n            return value.split(\" <\")[0].split(\" \")[0];\r\n        } else if (dataName === \"authors#2\") {\r\n            return value.split(\" <\")[0];\r\n        } else if (dataName === \"commitTypes\") {\r\n            return value.split(\"_eng\")[0].toUpperCase();\r\n        } else {\r\n            return value;\r\n        }\r\n    }\r\n\r\n    static replaceAll(str, searchStr, replaceStr) {\r\n        return str.split(searchStr).join(replaceStr);\r\n    }\r\n\r\n    static searchByKeywords(nodeList, keywords, attrName = \"fullText\") {\r\n        let resultNodeList = [];\r\n        let findAttrs;\r\n        if (attrName === \"fullText\") {\r\n            // findAttrs = CommitAttributeNames;\r\n            findAttrs = CommitAttributeNames.concat();\r\n        } else if (attrName === \"keyword\") {\r\n            findAttrs = [\"corpus\"];\r\n        } else if (attrName === \"file\") {\r\n            findAttrs = [\"files\"];\r\n        } else if (attrName === \"dir\") {\r\n            findAttrs = [\"files\"];\r\n        } else {\r\n            findAttrs = [attrName];\r\n        }\r\n        keywords = keywords.map(d => d.toLowerCase());\r\n        nodeList.forEach((node) => {\r\n            let foundMap = keywords.reduce((prev, cur) => {\r\n                prev[cur] = false;\r\n                return prev;\r\n            }, {});\r\n            \r\n            findAttrs.forEach((attr) => {\r\n                let values = [];\r\n                if (attr === \"files\") values = values.concat(Object.keys(node.commit.diffStat.files));\r\n                else if (!(attr in node.commit)) return;\r\n                else values = values.concat(node.commit[attr]);\r\n                values.forEach(v => {\r\n                    // AND\r\n                    Object.entries(foundMap).filter(d => !d[1])\r\n                        .forEach(d => {\r\n                            let keyword = d[0];\r\n                            if (v.toLowerCase().indexOf(keyword) >= 0) {\r\n                                foundMap[d[0]] = true;\r\n                            }\r\n                        })\r\n                    ;\r\n                });\r\n            });\r\n\r\n            // if all keywords found\r\n            if (Object.entries(foundMap).filter(d => d[1]).length > 0) {\r\n                resultNodeList.push(node);\r\n            }\r\n        });\r\n        // console.log(\"resultNodeList\", resultNodeList);\r\n        return resultNodeList;\r\n    }\r\n\r\n    static trimYYYYMMDD(dt) {\r\n        return new Date(dt).toISOString().slice(0, 10);\r\n    }\r\n\r\n    static parseTime(dt) {\r\n        let parseTime = d3.timeParse(\"%Y-%m-%d\");\r\n        return parseTime(GitAnalyzer.trimYYYYMMDD(dt));\r\n    }\r\n\r\n    getClusterBranchType(cluster) {\r\n// if (cluster.nodeList.slice(-1)[0].id.startsWith(\"1f2dc3\")) console.log(\"!!!!\", cluster)\r\n        // if this cluster has children, then follow it.\r\n        while (cluster.child !== undefined) {\r\n            cluster = cluster.child;\r\n        }\r\n\r\n        // if most child has no branchName\r\n        if (cluster.branches.length === 0) {\r\n            while (cluster.parent !== undefined ) {\r\n                if (cluster.branches.length > 0) break;\r\n                else cluster = cluster.parent;\r\n            }\r\n        }\r\n\r\n        let branchNames = cluster.branches;\r\n        // let lastBranchName = \"\";\r\n        // if (branchNames.length > 0) {\r\n        //     let FPs = cluster.nodeList.filter(n => n.firstParentTreeLeafNode !== undefined);\r\n        //     if (FPs.length === 0) {\r\n        //         console.log(\"THIS SHOUDLN'T HAPPEN\");\r\n        //     } else {\r\n        //         let names = FPs.slice(-1)[0].firstParentTreeBranchNames;\r\n        //         if (names.length === 1) {\r\n        //             if (branchNames[0] !== names[0]) console.log(\"THIS SHOUDLN'T HAPPEN\", branchNames[0], names, cluster);\r\n        //             lastBranchName = names[0];\r\n        //         } else {\r\n        //             if (names.filter(n => n.startsWith(\"origin/pr\")).length === names.length) {\r\n        //                 lastBranchName = names[0];\r\n        //             } else {\r\n        //                 lastBranchName = names.filter(n => !n.startsWith(\"origin/pr\"))[0];\r\n        //                 if (branchNames[0] !== lastBranchName) console.log(\"THIS SHOUDLN'T HAPPEN\", branchNames[0], names, cluster);\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n        let lastBranchName = (branchNames.length > 0 ? branchNames[0] : \"\");\r\n// if (cluster.nodeList.slice(-1)[0].id.startsWith(\"1f2dc3\")) console.log(\"!!!!\", cluster, branchNames, lastBranchName)\r\n        // let implicitBranchNo = cluster.nodeList[0].implicitBranchNo;\r\n        let lastNode = cluster.nodeList.slice(-1)[0];\r\n        let type = BranchTypes.EXPLICIT;\r\n\r\n        if (lastNode.implicitBranchNo === 0) {\r\n            type = BranchTypes.MAIN_STEM;\r\n        } else if (lastBranchName.startsWith(\"origin/pr\")) {\r\n            let prNum = Number(lastBranchName.substring(\"origin/pr/\".length, lastBranchName.length));\r\n            if (this.pullMapByNumber[prNum] === undefined) {\r\nconsole.log(\"NO PULL!!!! .. might pr removed\", prNum, lastBranchName);\r\n                type = BranchTypes.PR_CLOSED;\r\n            } else {\r\n                let closed = (this.pullMapByNumber[prNum].state === \"closed\");\r\n                let merged = this.pullMapByNumber[prNum].merged;\r\n\r\n                if (merged) {\r\n                    type = BranchTypes.PR_MERGED;\r\n                } else if (closed) {\r\n                    type = BranchTypes.PR_CLOSED;\r\n                } else {\r\n                    type = BranchTypes.PR_OPEN;\r\n                }\r\n            }\r\n        } else if (lastBranchName === \"\") {\r\n            type = BranchTypes.IMPLICIT;\r\n        }\r\n\r\n        return type;\r\n    }\r\n\r\n    getScoreByPreferences(node1, node2, prefMap, useHeuristicMerge, maxCommitHours = 96, verbose = false) {\r\n        let scores = undefined;\r\n        let commit1 = (useHeuristicMerge && node1.mergeSquashCommit !== undefined ? node1.mergeSquashCommit : node1.commit);\r\n        let commit2 = (useHeuristicMerge && node2.mergeSquashCommit !== undefined ? node2.mergeSquashCommit : node2.commit);\r\n\r\n        if (commit1.no in this.scoreData && commit2.no in this.scoreData[commit1.no]) {\r\n            scores = this.scoreData[commit1.no][commit2.no];\r\n        }\r\n// console.log(\"commit1.no\", commit1.no, commit2.no, scores, useHeuristicMerge, node1.mergeSquashCommit, node2.mergeSquashCommit);\r\n        if (scores === undefined ) {\r\n            // console.log(\"%%% far nodes' score \", scores, node1, node2);\r\n            scores = getScoreTemp(commit1, commit2, verbose);\r\n            \r\n            if ((this.scoreData[commit1.no] !== undefined)) {\r\n                this.scoreData[commit1.no][commit2.no] = scores;\r\n            } else {\r\n                this.scoreData[commit1.no] = {};\r\n                this.scoreData[commit1.no][commit2.no] = scores;\r\n            }\r\n        }\r\n\r\n        let dateNormFunc = d3.scaleLinear().range([1, 0]).domain([0, maxCommitHours]);\r\n        let diffHours = Math.min(Math.abs(new Date(commit1.date) - new Date(commit2.date))/24, maxCommitHours);\r\n        // let diffDays = Math.abs(new Date(a.date) - new Date(b.date))/24/60/1000/60;\r\n        //score[\"commitDate\"] = dateNormFunc(Math.log10(diffDays));\r\n        scores[\"commitDate\"] = Math.abs(dateNormFunc(diffHours));\r\n    \r\n        scores.sum = Number(Object.entries(prefMap).reduce( (prev, entry) => {\r\n            prev += entry[1] * Math.abs(scores[entry[0]]);\r\n            return prev;\r\n        }, 0).toFixed(7));\r\n\r\n        return scores;\r\n    }\r\n\r\n    static getBranchNamesFromBranchClusterNodes(branchClusterNodes) {\r\n        return Array.from(branchClusterNodes.filter(cn => cn.cluster.branches.length > 0).reverse().reduce( (prev, cur) => {\r\n            cur.cluster.branches.forEach( b => prev.add(b) );\r\n            return prev;\r\n        }, new Set())).map(b => (b.startsWith(\"origin/\") ? b.substring(7, b.length) : b))\r\n    }\r\n\r\n    static reduceLongName(name,threshold) {\r\n        if(name.length < threshold) {\r\n            return name;\r\n        }\r\n        else {\r\n            return name.slice(0, threshold) + \"...\";\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default GitAnalyzer;","import 'date-fns';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as actions from '../modules';\n\nimport GitAnalyzer from './analyzer/GitAnalyzer';\n\nimport \"./TemporalFilter.css\";\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControl from '@material-ui/core/FormControl';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport Select from '@material-ui/core/Select';\n\nconst useStyles = makeStyles(theme => ({\n    formControl: {\n        margin: 0,\n    },\n    dateField: {\n        width: \"90px\",\n        fontSize: \"10px\",\n        margin: 0,\n        padding: 0,\n    },\n\n}));\n\nconst SearchDiv = (props) => {\n// console.log(\"p\", props.releaseNodeList);\n    return (\n        <RadioGroup name={props.name} style={{ width: \"110px\" }} value={props.value} onChange={props.onChange}>\n            <div className=\"flexVerticalContainer\">\n                <div className=\"flexContainer\">\n                    <div>\n                        <Radio\n                            style={{width:\"25px\", height:\"25px\", padding:0, margin: 0}}\n                            value=\"tag\"\n                            color=\"primary\"\n                            icon={<RadioButtonUncheckedIcon fontSize=\"small\" />}\n                            checkedIcon={<RadioButtonCheckedIcon fontSize=\"small\" />}\n                        />\n                    </div>\n                    <div>\n                        <Select\n                            id={props.name + \"Release\"}\n                            value={props.release}\n                            onChange={props.heandleReleaseChange}\n                            style={{width:\"90px\", fontSize:\"12px\"}}\n                            native\n                        >  \n                            <option value={props.root}>INIT</option>\n                            {props.releaseNodeList.map( (node, i) => (\n                                <option key={i} value={node.seq} >\n                                    {node.releaseTagString}\n                                </option>\n                            ))}\n                            <option value={props.head}>LATEST</option>\n                        </Select>\n                    </div>\n                </div>\n                <div className=\"flexContainer\">\n                    <div>\n                        <Radio\n                            style={{width:\"25px\", height:\"25px\", padding:0, margin: 0}}\n                            value=\"date\"\n                            color=\"primary\"\n                            disableRipple\n                            icon={<RadioButtonUncheckedIcon fontSize=\"small\" />}\n                            checkedIcon={<RadioButtonCheckedIcon fontSize=\"small\" />}\n                        />\n                    </div>\n                    <div>\n                        <TextField \n                            id={props.name + \"Date\"} \n                            type=\"date\" \n                            className={props.dateField} \n                            value={props.startRelease}\n                            defaultValue={props.defaultDateValue}\n                            onChange={(event) => props.handleDateChange(event.target.value)}\n                        />\n                    </div>\n                </div>\n            </div>\n        </RadioGroup>\n    );\n}\n\nconst TemporalFilter = props => {\n    const classes = useStyles();\n    const [fromType, setFromType] = React.useState(\"tag\");\n    const [toType, setToType] = React.useState(\"tag\");\n    const [startDate, setStartDate] = React.useState(\"date\");\n    const [endDate, setEndDate] = React.useState(\"date\");\n\n    const headSeq = props.gitAnalyzer.allNodeList.slice(-1)[0].seq;\n    const rootSeq = props.gitAnalyzer.allNodeList[0].seq;\n\n    let defaultStartSeq = rootSeq;\n    let defaultEndSeq = headSeq;    \n    if (props.gitAnalyzer.repoName === \"realm-java\") {\n        defaultStartSeq = 15731;\n        defaultEndSeq = 15972;    \n    } else if (props.gitAnalyzer.repoName === \"MixedRealityToolkit-Unity\") {\n        defaultStartSeq = 11152;\n        defaultEndSeq = 11231;\n    }\n    \n    const [startRelease, setStartRelease] = React.useState(defaultStartSeq);\n    const [endRelease, setEndRelease] = React.useState(defaultEndSeq);\n    \n    const dispatch = useDispatch(); \n    // const filterSelection = useSelector(state => state.commitFilterSelection);\n\n    const handleFromTypeChange = event => {\n        setFromType(event.target.value);\n    };\n    const handleToTypeChange = event => {\n        setToType(event.target.value);\n    };\n    const handleStartDateChange = date => {\n        setStartDate(date);\n    }\n    const handleEndDateChange = date => {\n        setEndDate(date);\n    }\n    const handleStartReleaseChange = event => {\n        setStartRelease(event.target.value);\n    };\n    const handleEndReleaseChange = event => {\n        setEndRelease(event.target.value);\n    };\n    const releaseNodeList = props.gitAnalyzer.allNodeList.filter(d => d.isRelease);\n    const rootDate = GitAnalyzer.trimYYYYMMDD(props.gitAnalyzer.allNodeList[0].commit.date);\n    const headDate = GitAnalyzer.trimYYYYMMDD(props.gitAnalyzer.allNodeList.slice(-1)[0].commit.date);\n    \n// console.log(\"tf props.gitAnalyzer\", props.gitAnalyzer.allNodeList, \"release\", releaseNodeList)\n    function getSeqByDate(date, isStart) {\n        let fi;\n        if (isStart) {\n            for (let fi = 0; fi < props.gitAnalyzer.allNodeList.length; fi++) {\n// console.log(\"NONONONO\", GitAnalyzer.trimYYYYMMDD(props.gitAnalyzer.allNodeList[fi].commit.date));\n                if (GitAnalyzer.trimYYYYMMDD(props.gitAnalyzer.allNodeList[fi].commit.date) >= date) {\n                    return props.gitAnalyzer.allNodeList[fi].seq;\n                }\n            }\n        } else {\n            for (let fi = props.gitAnalyzer.allNodeList.length - 1; fi >= 0 ; fi--) {\n                if (GitAnalyzer.trimYYYYMMDD(props.gitAnalyzer.allNodeList[fi].commit.date) <= date) {\n                    return props.gitAnalyzer.allNodeList[fi].seq;\n                }\n            }\n        }\n\n        return isStart? 0 : props.gitAnalyzer.allNodeList.length - 1;\n    }\n\n\n// console.log(\"what the hell?\")\n    return (\n            <div className=\"flexVerticalContainer\">\n                <FormControl component=\"fieldset\" className={classes.formControl}>\n                    <div className=\"flexContainer\" style={{alignItems: \"center\"}}>\n                        <SearchDiv\n                            name=\"from\"\n                            value={fromType}\n                            onChange={handleFromTypeChange}\n                            dateField={classes.dateField}\n                            date={startDate}\n                            handleDateChange={handleStartDateChange}\n                            release={startRelease}\n                            heandleReleaseChange={handleStartReleaseChange}\n                            defaultDateValue={rootDate}\n                            defaultReleaseValue={rootSeq}\n                            head={headSeq}\n                            root={rootSeq}\n                            releaseNodeList={releaseNodeList}\n                        />\n                        <div>&nbsp; ~ </div>\n                        <SearchDiv\n                            name=\"to\"\n                            value={toType}\n                            onChange={handleToTypeChange}\n                            dateField={classes.dateField}\n                            date={endDate}\n                            handleDateChange={handleEndDateChange}\n                            release={endRelease}\n                            heandleReleaseChange={handleEndReleaseChange}\n                            defaultDateValue={headDate}\n                            defaultReleaseValue={headSeq}\n                            head={headSeq}\n                            root={rootSeq}\n                            releaseNodeList={releaseNodeList}\n                        />\n                    </div>\n                </FormControl>\n                <div className=\"flexVerticalContainer\" style={{alignItems:\"center\"}}>\n                    <div style={{height:\"10px\"}}></div>\n                    <div style={{width:\"95%\"}}>\n                        <Button \n                            style={{ \"fontSize\": \"11px\", width:\"100%\" }} size=\"small\" variant=\"outlined\" \n                            onClick={() => {\n                                let fromSeq = startRelease;\n                                let toSeq = endRelease;\n                                if (fromType === \"date\") {\n                                    fromSeq = getSeqByDate(startDate, true)\n                                } \n                                if (toType === \"date\") {\n                                    toSeq = getSeqByDate(endDate, false)\n                                }\n// console.log(\"NONONONO\", fromType, toType, startDate, endDate, fromSeq, toSeq);\n                                // props.onCommitFilterChanged([fromSeq, toSeq]);\n                                dispatch(actions.updateGlobalCommitsByTemporalFilter([Number(fromSeq), Number(toSeq)]));\n                        }}>\n                            TEMPORAL FILTER\n                        </Button>\n                    </div>\n                </div>\n            </div>\n    );\n}\n\nexport default TemporalFilter;","import \"./TemporalSelector.css\";\nimport * as d3 from 'd3';\nimport { AttributeColors } from \"./ColorClasses\"\nimport GitAnalyzer from './analyzer/GitAnalyzer';\nimport * as actions from '../modules';\n\nimport React, { useRef, useEffect } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\n\nlet commitBrush = undefined;\nlet commitSeqXScale = undefined;\n\nfunction navRender(props, state) {\n    // VARIABLES\n    \n    const arrowSvgHeight = state.arrowSvgHeight;\n    const brushHandleSize = 6;\n    const navMarginLeft = brushHandleSize / 2;\n    const navMarginBottom = 3;\n    const temporalAxisHeight = 22;\n    const tagHeight = 50;\n    const temporalAreaHeight = state.temporalAreaHeight;\n    const leftWidth = state.leftPaneWidth + 11;\n    const width = state.width;\n    const parseTime = GitAnalyzer.parseTime;\n\n// console.log(\"navigationRender\");\n    const { allNodeList } = props.gitAnalyzer;\n// console.log(\"navigationRender--- allnodeList.length=\", allNodeList.length);\n    const focusHeight = 25;\n    const height = state.temporalSelectorHeight - navMarginBottom;\n    const focusRelativeHeightPosition = height - focusHeight;\n    const marginLeft = navMarginLeft;\n\n    let globalStartSeq, globalEndSeq;\n    if (state.globalCommitSeqSelectionByTemporalFilter === undefined) {\n        globalStartSeq = 0;\n        globalEndSeq = allNodeList.length - 1;\n    } else {\n        [globalStartSeq, globalEndSeq] = state.globalCommitSeqSelectionByTemporalFilter;\n    }\n\n    const globalFilteredNodeList = allNodeList.filter( \n            node => node.seq >= globalStartSeq && node.seq <= globalEndSeq );\n\n    // FUNCTIONS INIT\n    const handleTemporalLabel = (selection, xTemporalScale) => {\n        let leftAlignWidth = (selection[0] > 50 ? 45 : 0);\n        let rightAlignWidth = (selection[1] > width - 50 ? 80 : 40);\n        d3.select(\"#temporalStartDiv\")\n            // .style(\"left\", (leftWidth + selection[0] + 20) + \"px\")\n            .style(\"left\", (selection[0] - leftAlignWidth) + \"px\")\n            .text(getTemporalLabelByDate(xTemporalScale.invert(selection[0])));\n        d3.select(\"#temporalEndDiv\")\n            // .style(\"left\", (leftWidth + selection[1] - 40 + 15) + \"px\")\n            .style(\"left\", (selection[1] - rightAlignWidth) + \"px\")\n            .text(getTemporalLabelByDate(xTemporalScale.invert(selection[1])));\n    }\n\n    const handleCommitLabel = (selection, commitSeqXScale, globalStartSeq) => {\n        let newXScale = d3.scaleLinear().rangeRound([0, globalFilteredNodeList.length - 1]).domain(commitSeqXScale.range());\n        let newSel = selection.map(d => newXScale(d));\n\n        let [startLabel, endLabel] = newSel.map(d => {\n            let node = globalFilteredNodeList[d];\n            if (node.isRelease) return node.releaseTagString;\n            else return \"#\" + node.commit.id.substring(0, 6);\n        });\n\n        let leftAlignWidth = (selection[0] > 60 ? 60 : 0);\n        let rightAlignWidth = (selection[1] > width - 70 ? 100 : 60);\n        d3.select(\"#commitStartDiv\")\n            // .style(\"left\", (leftWidth + selection[0] + 20) + \"px\")\n            .style(\"left\", (selection[0] - leftAlignWidth) + \"px\")\n            .text(startLabel + \"(\" + (newSel[0] + globalStartSeq) + \")\");\n        d3.select(\"#commitEndDiv\")\n            // .style(\"left\", (leftWidth + selection[1] - 65 + 15) + \"px\")\n            .style(\"left\", (selection[1] - rightAlignWidth) + \"px\")\n            .text(endLabel + \"(\" + (newSel[1] + globalStartSeq) + \")\");\n    }\n\n    const drawTemporalToCommitArrow = () => {\n        let tSel = d3.brushSelection(d3.select(\"#temporalBrush\").node());\n        let cSel = d3.brushSelection(d3.select(\"#commitBrush\").node());\n\n        if (tSel === null || cSel === null) return;\n        drawSelectionArrow(\"navigationSvg\", [[tSel[0], cSel[0]], [tSel[1], cSel[1]]], [temporalAreaHeight, temporalAreaHeight + tagHeight - navMarginBottom]);\n    }\n\n    const drawCommitToClusterArrow = (selection) => {\n        if (selection === null) return;\n        drawSelectionArrow(\"arrowSvg\",\n            [[selection[0], state.clusterOverviewSliderWidth],\n            [selection[1], state.clusterOverviewWidth]], [0, arrowSvgHeight]\n        );\n    }\n\n    const getCommitBrushSelectionsTriggeredByTemporalBrush = (selection, commitSeqXScale, bins, globalStartSeq) => {\n        if (selection === null) return null;\n// console.log(\"getCommitBrushSelectionsTriggeredByTemporalBrush\", d3.event.target);\n        let newXScale = d3.scaleLinear().rangeRound([0, bins.length - 1]).domain(commitSeqXScale.range());\n        let startBinIndex, endBinIndex;\n        [startBinIndex, endBinIndex] = selection.map(d => newXScale(d));\n// console.log(\"before startBinIndex, endBinIndex\", startBinIndex, endBinIndex, bins)\n\n        for (; startBinIndex < endBinIndex; startBinIndex++) {\n            if (bins[startBinIndex].length !== 0) break;\n        }\n        for (; endBinIndex > startBinIndex; endBinIndex--) {\n            if (bins[endBinIndex].length !== 0) break;\n        }\n// console.log(\"startBinIndex, endBinIndex\", startBinIndex, endBinIndex, bins, commitSeqXScale)\n\n        if (bins[startBinIndex] === undefined) {\n            return null;\n        } else {\n// console.log(\"return\", [commitSeqXScale(bins[startBinIndex][0].seq - globalStartSeq), commitSeqXScale(bins[endBinIndex].slice(-1)[0].seq - globalStartSeq)])\n            return [commitSeqXScale(bins[startBinIndex][0].seq - globalStartSeq), commitSeqXScale(bins[endBinIndex].slice(-1)[0].seq - globalStartSeq)];\n        }\n    }\n\n    const commitBrushFunc = (selection, commitSeqXScale) => {\n        console.log(\"brushed width x\", d3.event, selection);\n        if (selection === null) return null;\n\n        let commitSeqScale = d3.scaleLinear().range([0, globalFilteredNodeList.length - 1]).domain(commitSeqXScale.range());\n        let commitSeqSelection = selection.map(d => Math.round(commitSeqScale(d)));\n\n        // STATE UPDATE\n        state.udpateCommitsByTemporalBrush(commitSeqSelection.map(d => d + globalStartSeq));\n// console.log(\"###udpateCommitsByTemporalBrush\", commitSeqSelection.map(d => d + globalStartSeq))\n        // handle deco\n        d3.select(\"#navigationSvg\").selectAll(\".handle\")\n            .style(\"stroke\", d3.schemeCategory10[0])\n            .style(\"fill\", d3.schemeCategory10[0])\n            .style(\"fill-opacity\", 0.2)\n            ;\n\n        return commitSeqSelection;\n    }\n\n    const drawSelectionArrow = (svg, rangeX, rangeY) => {\n        d3.select(\"#\" + svg).selectAll(\".rangeArrowLine\").remove();\n        d3.select(\"#\" + svg).selectAll(\".rangeArrowLine\")\n            .data(rangeX)\n            .enter()\n            .append(\"line\")\n            .attr(\"class\", \"rangeArrowLine\")\n            .attr(\"id\", svg + \"ArrowLine\")\n            .attr(\"x1\", d => d[0])\n            .attr(\"x2\", d => d[1])\n            .attr(\"y1\", rangeY[0])\n            .attr(\"y2\", rangeY[1])\n            .style(\"stroke-width\", 1)\n            .style(\"stroke\", d3.schemeCategory10[0])\n            ;\n    }\n\n    const getTemporalLabelByDate = (dt) => {\n        return new Date(dt).toISOString().slice(2, 10);\n    }\n\n    // LOGIC\n    let navigationSvg = d3.select(\"#navigationSvg\");\n    let commitSeqXScale = d3.scaleBand().range([marginLeft, width - marginLeft]).domain(d3.range(globalFilteredNodeList.length));\n    // let colorScale = d3.scaleLinear().range([\"white\", \"black\"]).domain([0, 1000]);\n\n    ////////////////////////////////////////////\n    // commit rects\n    navigationSvg.append(\"g\")\n        .attr(\"id\", \"commitRects\")\n        .attr(\"transform\", \"translate(0 \" + focusRelativeHeightPosition + \")\")\n        .selectAll(\"line\")\n        .data(globalFilteredNodeList)\n        .enter()\n        .append(\"rect\")\n        .attr(\"id\", d => \"commitRect\" + d.seq)\n        .attr(\"class\", \"commitRect\")\n        .attr(\"x\", d => commitSeqXScale(d.seq - globalStartSeq))\n        .attr(\"y\", 0)\n        .attr(\"width\", commitSeqXScale.bandwidth())\n        .attr(\"height\", focusHeight)\n        // .style(\"fill\", d => colorScale(d.cloc))\n        .style(\"fill\", d => {\n            if (d.isMajorRelease) return AttributeColors.highlight[0];\n            else if (d.isRelease) return AttributeColors.highlight[2];\n            else return AttributeColors[\"commit\"][2];\n            // return \"AAA\";\n        })\n        .style(\"stroke-width\", d => (d.isRelease === true ? \"1px\" : \"0\"))\n        .style(\"stroke\", d => (d.isMajorRelease ? AttributeColors.highlight[0] : (d.isRelease ? AttributeColors.highlight[2] : \"\")))\n        .style(\"stroke-opacity\", 0.8);\n    ;\n    \n    // COMMIT SEQ AXIS\n//     let commitSeqAxis = d3.axisBottom(commitSeqXScale);    \n//     const commitSeqTickCount = 10;\n//     const commitSeqTickInterval = parseInt((commitSeqXScale.domain().slice(-1)[0] - commitSeqXScale.domain()[0]) / commitSeqTickCount);\n\n//     console.log(\"seqscale\", commitSeqTickInterval, commitSeqXScale.domain(), commitSeqXScale.domain().filter( (d, i) => (i % commitSeqTickInterval) === (commitSeqTickInterval - 1)));\n\n//     let commitSeqAxisArea = d3.select(\"#arrowSvg\").append(\"g\")\n//         .attr(\"id\", \"commitSeqAxis\")\n//         .call(\n//             commitSeqAxis.tickSizeOuter(commitSeqAxis.tickSize()).tickSize(commitSeqAxis.tickSize() * -1)\n//             .tickValues( commitSeqXScale.domain().filter( (d, i) => {\n//                 return (i % commitSeqTickInterval) === (commitSeqTickInterval - 1);\n// //                 const diff = e - s;\n// // console.log(\"range\", diff, s, e, diff / 10,  (i%(diff/10)))\n// //                 if ( (e - s) > tickCount) {\n// //                     return (i % ( diff / 10)) === 0;\n// //                 } else {\n// //                     return true;\n// //                 }\n//             }))\n//         );\n//     commitSeqAxisArea.select(\"path\").style(\"stroke-opacity\", 0);\n//     commitSeqAxisArea.selectAll(\".tick line\").style(\"stroke-opacity\", 0);\n//     commitSeqAxisArea.selectAll(\"text\").style(\"font-size\", \"8px\");\n\n\n    ///////////////////////////////\n    // tagging\n    ///////////////////////////////\n    // Temporal Area chart Filter (binning by day)\n    let startDate = parseTime(globalFilteredNodeList[0].commit.date);\n    let endDate = parseTime(globalFilteredNodeList.slice(-1)[0].commit.date);\n// console.log(startDate, endDate)\n    let xTemporalScale = d3.scaleTime().domain([startDate, endDate]).range([marginLeft, width - marginLeft]);\n    let histogram = d3.histogram()\n        .value(d => parseTime(d.commit.date))\n        .domain(xTemporalScale.domain())\n        .thresholds(xTemporalScale.ticks(d3.timeDay))\n        ;\n    let bins = histogram(globalFilteredNodeList).map(d => {\n        d.cloc = d.reduce( (prev, node) => prev + node.cloc, 0);\n        return d;\n    });\n\n    let temporalYSizeHalf = (temporalAreaHeight - temporalAxisHeight) / 2;\n    let yTemporalCommitCountScale = d3.scaleLinear().range([temporalYSizeHalf, 0]).domain([0, d3.max(bins, d => d.length)]);\n    let yTemporalCLOCScale = d3.scaleLinear().range([temporalYSizeHalf, 0]).domain([0, d3.max(bins, d => d.cloc)]);\n\n    let tempArea = navigationSvg.append(\"g\")\n// console.log(\"bins\", bins, temporalAreaHeight)\n    tempArea.append(\"path\")\n        .attr(\"transform\", \"translate(0, \" + (temporalAxisHeight) + \")\")\n        .datum(bins)\n        .attr(\"fill\", AttributeColors[\"commit\"][0])\n        .attr(\"stroke\", AttributeColors[\"commit\"][0])\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"opacity\", 0.9)\n        .attr(\"d\", d3.area()\n            .x(d => xTemporalScale(d.x0))\n            .y0(temporalYSizeHalf)\n            .y1(d => yTemporalCommitCountScale(d.length))\n            .curve(d3.curveCatmullRom.alpha(0.4))\n        )\n    ;\n    tempArea.append(\"path\")\n        .attr(\"transform\", \"translate(0, \" + (temporalAxisHeight + temporalYSizeHalf) + \")\")\n        .datum(bins)\n        .attr(\"fill\", AttributeColors[\"commit\"][0])\n        .attr(\"stroke\", AttributeColors[\"commit\"][0])\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"opacity\", 0.9)\n        .attr(\"d\", d3.area()\n            .x(d => xTemporalScale(d.x0))\n            .y0(temporalYSizeHalf)\n            .y1(d => yTemporalCLOCScale(d.cloc))\n            .curve(d3.curveCatmullRom.alpha(0.4))\n        )\n    ;\n    tempArea.append(\"text\")\n        .attr(\"x\", 7)\n        .attr(\"y\", temporalAxisHeight + 10)\n        .attr(\"text-anchor\", \"start\")\n        .style(\"font-size\", \"10px\")\n        .style(\"font-weight\", 500)\n        .text(\"COMMIT #\")\n    ;\n    tempArea.append(\"text\")\n        .attr(\"x\", 7)\n        .attr(\"y\", temporalAxisHeight + temporalYSizeHalf + 10)\n        .attr(\"text-anchor\", \"start\")\n        .style(\"font-size\", \"10px\")\n        .style(\"font-weight\", 500)\n        .text(\"CLOC\")\n    ;\n\n\n    let tempAxis = d3.axisTop(xTemporalScale);\n    tempArea.append(\"g\")\n        .call(tempAxis.tickSizeOuter(tempAxis.tickSize()).tickSize(tempAxis.tickSize() * -1))\n        .attr(\"transform\", \"translate(\" + 0 + \",\" + (temporalAxisHeight - 1) + \")\")\n        .selectAll(\".tick line\")\n        .attr(\"transform\", \"translate(\" + 0 + \",\" + tempAxis.tickSize() / 2 + \")\")\n        ;\n\n    let releaseTagNodeList = globalFilteredNodeList.filter(d => d.isRelease);\n    let releaseBins = histogram(releaseTagNodeList);\n    // let bar = tempArea.selectAll(\".bar\")\n    //     .data(releaseBins)\n    //     .enter().append(\"g\")\n    //     .attr(\"class\", \"bar\")\n    // bar.append(\"rect\")\n    //     .attr(\"x\", d => xTemporalScale(d.x0))\n    //     .attr(\"y\", temporalAxisHeight)\n    //     .attr(\"width\", d => { return xTemporalScale(d.x1) - xTemporalScale(d.x0); })\n    //     .attr(\"height\", d => (d.length > 0 ? temporalAreaHeight - temporalAxisHeight : 0))\n    //     .style(\"opacity\", 0.3)\n    //     .style(\"stroke\", d => (d.filter(node => node.isMajorRelease).length > 0 ? \"black\" : \"#AAAAAA\"))\n    //     ;\n\n    ///////////////////////////////////////////////\n    // release link between commitseq and temporal\n    // console.log(\"link bt\", releaseTagNodeList)\n    let links = navigationSvg.append(\"g\");\n    links.selectAll(\"line\")\n        .data(releaseTagNodeList)\n        .enter()\n        .append(\"line\")\n        .attr(\"class\", \"linkBetweenCT\")\n        .attr(\"x1\", d => xTemporalScale(parseTime(d.commit.date)))\n        .attr(\"x2\", d => commitSeqXScale(d.seq - globalStartSeq))\n        .attr(\"y1\", temporalAreaHeight)\n        .attr(\"y2\", focusRelativeHeightPosition)\n        .style(\"stroke-width\", 1)\n        .style(\"stroke\", d => (d.isMajorRelease ? \"black\" : \"#BBBBBB\"))\n        .style(\"opacity\", 0.3)\n        .on(\"mouseenter\", function (d) {\n            d3.select(this).style(\"stroke\", \"red\").style(\"stroke-width\", \"3px\");\n            d3.select(\"#releaseLabelDiv\")\n                .text(d.releaseTagString)\n                .style(\"left\", (d3.event.pageX) + \"px\")\n                .style(\"top\", (d3.event.pageY - 10) + \"px\")\n                .style(\"opacity\", 1)\n                ;\n            d3.select(\"#commitRect\" + d.seq).attr(\"height\", focusHeight + 10).attr(\"y\", -5);\n        })\n        .on(\"mouseleave\", function (d) {\n            d3.select(this)\n                .style(\"stroke\", (d.isMajorRelease ? \"black\" : \"#BBBBBB\"))\n                .style(\"stroke-width\", \"1px\")\n                ;\n            d3.select(\"#commitRect\" + d.seq).attr(\"height\", focusHeight).attr(\"y\", 0);\n            d3.select(\"#releaseLabelDiv\").style(\"opacity\", 0.2);\n        })\n        ;\n    ;\n    links.selectAll(\"text\")\n        .data(releaseTagNodeList.filter(d => d.isMajorRelease && d.releaseTagString.split(\".\")[1] === \"0\"))\n        .enter()\n        .append(\"text\")\n        .attr(\"x\", d => commitSeqXScale(d.seq))\n        .attr(\"y\", focusRelativeHeightPosition)\n        .attr(\"text-anchor\", \"end\")\n        .text(d => d.releaseTagString.split(\".\").slice(0, 2).join(\".\"))\n        .style(\"transform\", \"rotate(45)\")\n        ;\n\n\n    ////////////////////////////////////////////////\n    // brushes\n    let commitBrush = d3.brushX()\n        .extent([[marginLeft, focusRelativeHeightPosition], [width - marginLeft, height]]);\n    let temporalBrush = d3.brushX()\n        .extent([[marginLeft, temporalAxisHeight], [width - marginLeft, temporalAreaHeight]]);\n    navigationSvg.append(\"g\")\n        .attr(\"id\", \"commitBrush\")\n        .attr(\"class\", \"brush\")\n        .call(commitBrush)\n        .call(commitBrush.move, commitSeqXScale.range());\n    navigationSvg.append(\"g\")\n        .attr(\"id\", \"temporalBrush\")\n        .attr(\"class\", \"brush\")\n        .call(temporalBrush)\n        .call(temporalBrush.move, commitSeqXScale.range())\n        ;\n\n    temporalBrush.on(\"brush\", () => {\n        drawTemporalToCommitArrow();\n        handleTemporalLabel(d3.event.selection, xTemporalScale);\n    });\n    commitBrush.on(\"brush\", () => {\n        drawCommitToClusterArrow(d3.event.selection);\n        drawTemporalToCommitArrow();\n// console.log(\"commitBrush\", d3.event.selection, commitSeqXScale)\n        handleCommitLabel(d3.event.selection, commitSeqXScale, globalStartSeq);\n    });\n\n    temporalBrush.on(\"end\", () => {\n        if (d3.event.selection === null) return;\n        let newSelection = getCommitBrushSelectionsTriggeredByTemporalBrush(d3.event.selection, commitSeqXScale, bins, globalStartSeq);\n\n        d3.select(\"#commitBrush\").call(commitBrush.move, newSelection);\n        drawTemporalToCommitArrow();\n    });\n    commitBrush.on(\"end\", () => {\n        if (d3.event.selection === null) return;\n        let brushedSeqs = commitBrushFunc(d3.event.selection, commitSeqXScale);\n        let newSelection = brushedSeqs.map(d => xTemporalScale(parseTime(globalFilteredNodeList[d].commit.date)));\n\n        let brushG = d3.select(\"#temporalBrush\");\n        brushG.select(\".selection\").attr(\"x\", newSelection[0]).attr(\"width\", newSelection[1] - newSelection[0]);\n        brushG.select(\".handle--e\").attr(\"x\", newSelection[1] - brushHandleSize / 2);\n        brushG.select(\".handle--w\").attr(\"x\", newSelection[0] - brushHandleSize / 2);\n        ;\n        brushG._groups[0][0].__brush.selection[0][0] = newSelection[0];\n        brushG._groups[0][0].__brush.selection[1][0] = newSelection[1];\n        drawTemporalToCommitArrow();\n        handleTemporalLabel(newSelection, xTemporalScale);\n    });\n\n    navigationSvg.select(\"#commitBrush\").select(\".selection\")\n        .attr(\"asdf\", \"asdf\")\n        .style(\"fill\", AttributeColors[\"commit\"][0])\n        .style(\"fill-opacity\", 0.2)\n        ;\n    navigationSvg.select(\"#temporalBrush\").select(\".selection\")\n        .style(\"fill\", AttributeColors[\"commit\"][0])\n        .style(\"fill-opacity\", 0.2)\n        ;\n\n    // handle deco\n    d3.select(\"#navigationSvg\").selectAll(\".handle\")\n        .style(\"stroke\", d3.schemeCategory10[0])\n        .style(\"fill\", d3.schemeCategory10[0])\n        .style(\"fill-opacity\", 0.2)\n        ;\n    drawTemporalToCommitArrow();\n    drawCommitToClusterArrow(commitSeqXScale.range());\n    handleTemporalLabel(xTemporalScale.range(), xTemporalScale);\n    handleCommitLabel(commitSeqXScale.range(), commitSeqXScale, globalStartSeq);\n\n// console.log(\"function state,\", state, commitSeqXScale.range(), commitSeqXScale)\n\n    // state.setCommitBrush(commitBrush);\n    // state.setCommitSeqXScale(commitSeqXScale);\n\n    return [commitBrush, commitSeqXScale];\n}\n\nconst TemporalSelector = props => {\n// console.log(\"TemporalSelector render\");\n\n    const state = useSelector(state => ({\n        threshold: state.threshold,\n\n        titlePanelHeight: state.layout.titlePanelHeight,\n        temporalSelectorHeight: state.layout.temporalSelectorHeight,\n        temporalAreaHeight: state.layout.temporalAreaHeight,\n        width: state.layout.width,\n        leftPaneWidth: state.layout.leftPaneWidth,\n        clusterOverviewSliderWidth: state.layout.clusterOverviewSliderWidth,\n        clusterOverviewWidth: state.layout.clusterOverviewWidth,\n        arrowSvgHeight:30,      \n        \n        globalCommitSeqSelectionByTemporalFilter: state.globalCommitSeqSelectionByTemporalFilter,\n    }));\n    state.props = props;\n\n    const dispatch = useDispatch();\n    const udpateCommitsByTemporalBrush = (sel) => dispatch(actions.udpateCommitsByTemporalBrush(sel));\n    state.udpateCommitsByTemporalBrush = udpateCommitsByTemporalBrush;\n    const commitSeqSelectionByTemporalFilter = useSelector(state => state.commitSeqSelectionByTemporalFilter);\n\n    let isInitRef = useRef(true);\n    \n    useEffect( () => {\n        d3.select(\"#navigationSvg\").selectAll(\"g\").remove();\n        d3.select(\"#arrowSvg\").selectAll(\".rangeArrowLine\").remove();\n        // d3.select(\"#commitSeqAxis\").remove();\n\n        [commitBrush, commitSeqXScale] = navRender(props, state); //, state.commitSeqSelection);\n        udpateCommitsByTemporalBrush(state.globalCommitSeqSelectionByTemporalFilter);\n    }, [state.globalCommitSeqSelectionByTemporalFilter]);\n\n    useEffect( () => {\n        if (isInitRef.current) {\n            isInitRef.current = false;\n        } else {\nconsole.log(\"changed commitseqselection executed\", state, state.commitBrush, commitBrush, commitSeqXScale);\n            d3.select(\"#commitBrush\").call(commitBrush.move, commitSeqSelectionByTemporalFilter.map(d => commitSeqXScale(d) + commitSeqXScale.bandwidth()/2));\n        }\n    }, [commitSeqSelectionByTemporalFilter]);\n\n    return (\n        <div>\n            <div className=\"flexVerticalContainer\" style={{ width: state.width }}>\n                <div id=\"temporalLabelsDiv\"\n                    style={{\n                        position: \"relative\",\n                        zIndex: 1,\n                        float: \"left\",\n                        height: 0,\n                    }}\n                >\n                    <div id=\"temporalStartDiv\" className=\"rangeTooltip\" style={{ opacity: 1, top: state.temporalAreaHeight + 4 }}>\n                    </div>\n                    <div id=\"temporalEndDiv\" className=\"rangeTooltip\" style={{ opacity: 1, top: state.temporalAreaHeight + 4 }}>\n                    </div>\n                </div>\n                <div id=\"commitLabelsDiv\"\n                    style={{\n                        position: \"relative\",\n                        zIndex: 1,\n                        float: \"left\",\n                        height: 0,\n                    }}\n                >\n                    <div id=\"commitStartDiv\" className=\"rangeTooltip\" style={{ opacity: 1, top: state.temporalSelectorHeight  }}>\n                    </div>\n                    <div id=\"commitEndDiv\" className=\"rangeTooltip\" style={{ opacity: 1, top: state.temporalSelectorHeight  }}>\n                    </div>\n                </div>\n                <div>\n                    <svg id=\"navigationSvg\" width={state.width} height={state.temporalSelectorHeight} />\n                    <svg id=\"arrowSvg\" width={state.width} height={state.arrowSvgHeight} />\n                    <div id=\"releaseLabelDiv\" className=\"releaseLabelTooltip\" style={{ opacity: 0, }} />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default TemporalSelector;","import React, { useState, useEffect, useRef } from 'react';\nimport \"./ValueSlider.css\";\nimport Slider from '@material-ui/core/Slider';\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport * as d3 from 'd3';\nimport { blueGrey } from '@material-ui/core/colors';\n\nconst useStyles = makeStyles(theme => ({\n  icon: {\n    height: 35,\n    width: 35,\n    margin: theme.spacing(0),\n    color: \"skyblue\",\n  },\n  button: {\n      height:40,\n      width:40,\n      margin: theme.spacing(0),\n      padding: 0,\n      minWidth: 40\n  }\n}));\n\nconst PrettoSlider = withStyles({\n    root: {\n      color: \"#78909c\",\n      width: 100,\n      height: 100\n    },\n    thumb: {\n      height: 20,\n      width: 20,\n      backgroundColor: \"#fff\",\n      border: \"2px solid currentColor\",\n      marginTop: -8,\n      marginLeft: -12,\n      \"&:focus,&:hover,&$active\": {\n        boxShadow: \"inherit\"\n      }\n    },\n    active: {},\n    valueLabel: {\n      left: \"calc(-50%)\"\n    },\n    track: {\n      height: 20,\n      borderRadius: 7\n    },\n    rail: {\n      height: 20,\n      borderRadius: 5\n    },\n    mark: {\n      height: 1,\n      width: 8,\n    }\n  })(Slider);\n\n\nconst ValueSlider = props => {\n    // const classes = useStyles();\n    const [stepValue, setStepValue] = useState(props.defaultStepValue);\n    const [max, setMax] = useState(1);\n\n    const index = (props.index === undefined ? \"\" : props.index);\n    const divId = props.name + \"ValueSlider\" + index;\n\n    const maxStepCount = 50;\n    const thresholdList = useRef(undefined);\n\n    useEffect( () => {\n// console.log(\"valueslider useEffect called, th=\", props, thresholdList, (props.thresholdList !== undefined ? props.thresholdList.slice(0, maxStepCount).push(props.thresholdList.slice(-1)[0]) : \"aaa\"))\n      let arrayIndices = [];//FromMaxStep = d3.range([0, maxStepCount]);\n      let fi = 0, aIndex = 0;\n      while (aIndex < props.thresholdList.length - maxStepCount) {\n        arrayIndices.push(maxStepCount + aIndex);\n        aIndex += ++fi;\n      }\n// console.log(\"arrayIndices\", arrayIndices);\n\n      thresholdList.current = (props.thresholdList !== undefined && props.thresholdList.length > maxStepCount \n        ? props.thresholdList.slice(0, maxStepCount).concat(arrayIndices.map(d => props.thresholdList[d])).concat(props.thresholdList.slice(-1)[0])\n        : props.thresholdList);\n\n      if (thresholdList.current !== undefined && thresholdList.current.length > 0) {\n        let sv = thresholdList.current.indexOf(props.threshold);\n        if (sv < 0) {\n          for (let fi = 0; fi <= thresholdList.current.length - 2; fi++) {\n            if (props.threshold > thresholdList.current[fi] && props.threshold <= thresholdList.current[fi+1]) {\n// console.log(\"break, \", sv, props.threshold, thresholdList[fi], thresholdList[fi+1], fi)\n              sv = fi + 1;\n              break;\n            }\n            if (fi === thresholdList.current.length - 2) sv = fi;\n          }\n        }\n// console.log(\"--\", props.threshold, sv, thresholdList, );\n          \n        setStepValue(sv);\n        setMax(thresholdList.current.length - 1);\n      }\n\n      d3.select(\"#\" + divId).selectAll(\".MuiSlider-rail\").style(\"width\", \"10px\");\n      d3.select(\"#\" + divId).selectAll(\".MuiSlider-track\").style(\"width\", \"10px\");\n    }, [props.thresholdList]);\n\n// console.log(\"valueslider\", stepValue, max, props, props.defaultStepValue);\n    return (\n        <div id={divId} className=\"flexVerticalContainer\" style={{width:props.width}}>\n            <div align=\"center\"\n                style={{\"margin\":\"0px 10px 5px 0px\", \"height\":props.height - 30}}>\n                <PrettoSlider\n                    // defaultValue={props.threshold}\n                    value={stepValue}\n                    onChangeCommitted={(event, newValue) => {\n                        setStepValue(newValue);\n                        props.changeThreshold(thresholdList.current[newValue]);\n                    }}\n                    onChange={(event, newValue) => {\n                        setStepValue(newValue);\n                    }}\n                    // aria-labelledby=\"vertical-slider\"\n                    min={0}\n                    max={max}\n                    marks={max < 100 ? true : undefined}\n                    step={1}\n                    orientation=\"vertical\"\n                    valueLabelDisplay=\"auto\"\n                    // onChangeCommitted={(threshold) => props.changeThreshold(threshold)}\n                />\n            </div>\n            <div align=\"center\" style={{height:\"25px\", fontSize: \"9px\", fontWeight: \"600\"}}>CLSTR STEP</div>\n            {/* <div style={{height:\"50px\", margin: \"0px 10px 0px 5px\"}}>\n                <Button className={classes.button} variant=\"outlined\">\n                    <RefreshRoundedIcon className={classes.icon} onClick={() => props.changeThreshold(threshold)}/>\n                </Button>\n            </div> */}\n        </div>\n    );\n}\n\nexport default ValueSlider;","\nexport class FileStructureAnalyzer {\n    constructor(rawData, hideFiles, file2Author) {\n\n\n\n        this.fileStructure = {\n            \"name\" : \"project\",\n            \"children\" : []\n        }\n        this.hideFiles = hideFiles;\n\n        // console.log(this.fileStructure);\n\n        //console.log(rawData);\n\n        console.log(file2Author);\n\n\n        for (let path in rawData) {\n\n            //console.log(this.fileStructure);\n\n            this.analyzePath(path, rawData[path], this.fileStructure[\"children\"], file2Author[path])\n\n        }\n        // console.log(this.fileStructure);\n\n        this.compressStructure(this.fileStructure);\n        this.updateAuthorInfo(this.fileStructure);\n\n        console.log(this.fileStructure);\n\n        // console.log(this.fileStructure);\n\n    }\n\n\n    analyzePath(path, score, root, author) {\n        let pathDirectories = path.split(\"/\");\n        let fileName = pathDirectories[pathDirectories.length - 1];\n        if(this.hideFiles.includes(fileName)) return;\n\n       // console.log(path, score, root, author);\n\n        //let size = root.length;\n        if (!path.includes(\"/\")) {\n            root.push({\n                \"name\" : path,\n                \"value\" : score, \n                \"authors\" : author\n            });\n            return;\n        }\n        let curDirectory = pathDirectories[0];\n        let subPath = path.substring(curDirectory.length + 1)\n\n        for (let child in root) {\n\n            // console.log(rochild, curDirectory, child[\"name\"] == curDirectory)\n\n            if(root[child][\"name\"] === curDirectory && root[child][\"children\"] !== undefined) {\n                this.analyzePath(subPath, score, root[child][\"children\"], author);\n                return;\n            }\n        }\n\n        root.push({\n            \"name\" : curDirectory,\n            \"children\" : []\n        });\n        \n        this.analyzePath(subPath, score, root[root.length - 1][\"children\"], author);\n    }\n\n    compressStructure(root) {\n\n        if(root[\"children\"] == undefined) return;\n\n        for(let childNum in root[\"children\"]) {\n            this.compressStructure(root[\"children\"][childNum]);\n        }\n\n        if(root[\"children\"].length == 1 && root[\"name\"] != \"project\") {\n            root[\"name\"] = root[\"name\"] + \"/\" + root[\"children\"][0][\"name\"];\n            if(root[\"children\"][0][\"value\"] == undefined)\n                root[\"children\"] = root[\"children\"][0][\"children\"];\n            else{\n                root[\"value\"] = root[\"children\"][0][\"value\"];\n                delete root.children;\n            }\n        }\n    \n    }\n\n    updateAuthorInfo(root) {\n        if(root[\"children\"] == undefined) {\n            return root[\"authors\"];\n        }\n\n        let authors = {};\n        for(let childNum in root[\"children\"]) {\n            let childAuthors = this.updateAuthorInfo(root[\"children\"][childNum]);\n            for (let author in childAuthors) {\n                if(authors.hasOwnProperty(author)) {\n                    authors[author].insertions += childAuthors[author].insertions;\n                    authors[author].deletions += childAuthors[author].deletions;\n                    authors[author].count += childAuthors[author].count;\n                }\n                else {\n                    let dict = {};\n                    dict.insertions = childAuthors[author].insertions;\n                    dict.deletions = childAuthors[author].deletions;\n                    dict.count = childAuthors[author].count;\n                    authors[author] = dict;\n                }\n            }\n            \n        }\n\n        root[\"authors\"] = authors;\n\n        return authors;\n    }\n\n    getFileStructure() {\n        return this.fileStructure;\n    }\n}\n\nexport default FileStructureAnalyzer;","import React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3';\nimport FileStructureAnalyzer from './analyzer/FileStructureAnalyzer'\nimport { useSelector } from 'react-redux';\nimport { AttributeColors } from \"./ColorClasses\"\nimport Select from '@material-ui/core/Select'\n\nconst FileIcicleSummary = props => {\n\n    const { width, height, rawModLocData, rawInsertLocData, rawDeleteLocData, rawModNumData, file2Author, pageNum } = props;\n    const { summaryByLOC, hideFiles } = useSelector(state => state.summaryParameters);\n\n    console.log(file2Author);\n\n    let partition = data => {\n        const root = d3.hierarchy(data)\n            .sum(d => d.value)\n            .sort((a, b) => b.height - a.height || b.value - a.value);\n        return d3.partition()\n            .size([height, ((root.height + 1) * width / pageNum)])\n            (root);\n    }\n\n    let format = d3.format(\",d\")\n\n    function rectHeight(d) {\n        return (d.x1 - d.x0 - Math.min(1, (d.x1 - d.x0) / 2));\n    }\n    function labelVisible(d) {\n        return ((d.x1 - d.x0) > 16);\n    }\n\n    let focus = useRef();\n    let root = useRef();\n\n    let currentCLocMode = useRef(\"sum\");\n\n    useEffect(() => {\n        const svg = d3.select(\"#icicleSvg\");\n        svg.selectAll(\"g\").remove();\n\n        let fileAnalyzer;\n        // console.log(\"rawData\", rawModLocData, rawInsertLocData, rawDeleteLocData);\n\n        if (summaryByLOC) {\n            let rawModData;\n            switch(currentCLocMode.current) {\n                case \"sum\" : rawModData = rawModLocData; break;\n                case \"insertion\" : rawModData = rawInsertLocData; break;\n                case \"deletion\" : rawModData = rawDeleteLocData; break;\n            }\n            fileAnalyzer = new FileStructureAnalyzer(rawModData, hideFiles, file2Author);\n        }\n        else\n            fileAnalyzer = new FileStructureAnalyzer(rawModNumData, hideFiles, file2Author);\n\n        let data = fileAnalyzer.getFileStructure();\n\n        // function rectHeight(d) {\n        //     return (d.x1 - d.x0 - Math.min(1, (d.x1 - d.x0) / 2));\n        // }\n\n        function clicked(p) {\n            try {\n                focus.current = focus.current === p ? p = p.parent : p;\n\n                let widthScale;\n                let curHeight = focus.current.height + 1;\n                if (focus.current.data.name === \"project\") curHeight--;\n                if (curHeight < pageNum)\n                    widthScale = pageNum / curHeight;\n                else\n                    widthScale = 1;\n\n                let isRoot = false;\n                if (focus.current.data.name === \"project\")\n                    isRoot = true;\n                if (isRoot) {\n                    root.current.each(d => d.target = {\n                        x0: ((d.x0 - p.x0) / (p.x1 - p.x0) * height),\n                        x1: ((d.x1 - p.x0) / (p.x1 - p.x0) * height),\n                        y0: ((d.y0 - p.y0) - width / pageNum),\n                        y1: ((d.y1 - p.y0) - width / pageNum)\n                    });\n                }\n                else {\n                    root.current.each(d => d.target = {\n                        x0: ((d.x0 - p.x0) / (p.x1 - p.x0) * height),\n                        x1: ((d.x1 - p.x0) / (p.x1 - p.x0) * height),\n                        y0: (d.y0 - p.y0),\n                        y1: (d.y1 - p.y0)\n                    });\n                }\n                let cell = d3.selectAll(\".icicleTreeCells\");\n                let rect = d3.selectAll(\".icicleTreeRects\");\n                let text = d3.selectAll(\".icicleTreeTexts\");\n                let tspan = d3.selectAll(\".icicleTreeTspans\")\n\n\n                // console.log(widthScale);\n                const t = cell.transition().duration(750)\n                    .attr(\"transform\", d => `translate(${d.target.y0 * widthScale},${d.target.x0})`);\n\n                rect.transition(t).attr(\"height\", d => rectHeight(d.target))\n                    .attr(\"width\", d => (d.y1 - d.y0 - 1) * widthScale);\n                text.transition(t).attr(\"fill-opacity\", d => labelVisible(d.target) ? 1 : 0);\n                tspan.transition(t).attr(\"fill-opacity\", d => labelVisible(d.target) ? 0.7 : 0);\n            } catch (e) {\n                console.log(\"debugging\");\n            }\n        }\n\n        root.current = partition(data);\n        focus.current = root.current;\n        // console.log(focus);\n\n        let widthScale;\n        let curHeight = focus.current.height;\n        if (curHeight < pageNum)\n            widthScale = pageNum / curHeight;\n        else\n            widthScale = 1;\n\n        const cell = svg.selectAll(\"g\")\n            .data(root.current.descendants())\n            .join(\"g\")\n            .attr(\"class\", \"icicleTreeCells\")\n            .attr(\"transform\", d => `translate(${(d.y0 - width / pageNum) * widthScale},${d.x0})`)\n            .attr(\"id\", d => d.data.name);\n\n        const rect = cell.append(\"rect\")\n            .attr(\"width\", d => (d.y1 - d.y0 - 1) * widthScale)\n            .attr(\"height\", d => rectHeight(d))\n            .attr(\"class\", \"icicleTreeRects\")\n            .style(\"fill\", d => {\n                if (d.data.value !== undefined) return AttributeColors.file[3];\n                else return AttributeColors.dir[3];\n            })\n            .style(\"cursor\", \"pointer\")\n            .style(\"stroke-width\", \"0px\")\n            .on(\"click\", clicked)\n\n        const text = cell.append(\"text\")\n            .attr(\"class\", \"icicleTreeTexts\")\n            .style(\"user-select\", \"none\")\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"x\", 4)\n            .attr(\"y\", 13)\n            .style(\"font-weight\", 400)\n            .attr(\"fill-opacity\", d => labelVisible(d) ? 1 : 0)\n            .style(\"overflow\", \"visible\");\n\n        text.append(\"tspan\")\n            .text(d => {\n                if (d.data.children !== undefined)\n                    return d.data.name + \"/\";\n                else\n                    return d.data.name;\n            });\n\n        const tspan = text.append(\"tspan\")\n            .attr(\"class\", \"icicleTreeTspans\")\n            .attr(\"fill-opacity\", d => labelVisible(d) ? 0.7 : 0)\n            .text(d => ` ${format(d.value)}`);\n\n        let title = cell.append(\"title\")\n\n        title.append(\"tspan\").text(d => {\n            if (d.data.children !== undefined)\n                return d.data.name + \"/\" + \"\\n\";\n            else\n                return d.data.name + \"\\n\";\n        })\n        title.append(\"tspan\").text(d => {\n            if (summaryByLOC) return `${format(d.value)}` + \" lines modified\\n\"\n            else return `${format(d.value)}` + \" times touched\\n\"\n        })\n\n        title.append(\"tspan\").text(d => {\n            let authors = d.data.authors;\n\n            let authorArray = [];\n\n            if(summaryByLOC) {\n                if(currentCLocMode.current == \"sum\") {\n                    for(let author in authors) \n                        authorArray.push([author, authors[author].insertions + authors[author].deletions]);\n                }\n                else if(currentCLocMode.current == \"insertion\") {\n                    for(let author in authors) \n                        authorArray.push([author, authors[author].insertions]);\n                }\n                else {  // if deletion\n                    for(let author in authors) \n                        authorArray.push([author, authors[author].deletions]);\n                }\n            }\n            else {\n                for(let author in authors) \n                    authorArray.push([author, authors[author].count]);\n            }\n\n\n            authorArray.sort((a, b) => b[1] - a[1]);\n\n            let message = \"  \";\n            authorArray.forEach(node => {\n                message = message + \"\\n  \" + node[0] + \" :: \" + node[1];\n            })\n            // console.log(message);\n\n            return \"Contributors:\" + message;\n        })\n    }, [\n        summaryByLOC, hideFiles, rawModLocData, rawModNumData, file2Author\n    ])\n\n    function updateLOCType(event) {\n        let rawData;\n        switch (event.target.value) {\n            case \"sum\": rawData = rawModLocData; break;\n            case \"insertion\": rawData = rawInsertLocData; break;\n            case \"deletion\": rawData = rawDeleteLocData; break;\n        }\n        \n        switch (event.target.value) {\n            case \"sum\": currentCLocMode.current = \"sum\"; break;\n            case \"insertion\": currentCLocMode.current = \"insertion\"; break;\n            case \"deletion\": currentCLocMode.current = \"deletion\"; break;\n        }\n\n        let fileAnalyzer = new FileStructureAnalyzer(rawData, hideFiles, file2Author);\n        let data = fileAnalyzer.getFileStructure();\n        root.current = partition(data);\n        focus.current = root.current;\n\n        let widthScale;\n        let curHeight = focus.current.height;\n        if (curHeight < pageNum)\n            widthScale = pageNum / curHeight;\n        else\n            widthScale = 1;\n\n\n        let rootData = root.current.descendants();\n\n        let cell = d3.selectAll(\".icicleTreeCells\")\n            .data(rootData)\n            .join();\n\n        const t = cell.transition()\n            .duration(750)\n            .attr(\"transform\", d => `translate(${(d.y0 - width / pageNum) * widthScale},${d.x0})`)\n            .attr(\"id\", d => d.data.name);\n\n        // console.log(rootData);\n        // console.log(cell.select(\"rect\"));\n\n        cell.select(\"rect\")\n            .transition()\n            .duration(750)\n            .attr(\"width\", d => (d.y1 - d.y0 - 1) * widthScale)\n            .attr(\"height\", d => {\n                return rectHeight(d)\n            })\n            .style(\"fill\", d => {\n                if (d.data.value !== undefined) return AttributeColors.file[3];\n                else return AttributeColors.dir[3];\n            })\n\n        let text = cell.select(\"text\")\n            .style(\"user-select\", \"none\")\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"x\", 4)\n            .attr(\"y\", 13)\n            .style(\"font-weight\", 400)\n            .attr(\"fill-opacity\", d => labelVisible(d) ? 1 : 0)\n            .style(\"overflow\", \"visible\");\n\n        text.selectAll(\"tspan\").remove();\n        text.append(\"tspan\")\n            .text(d => {\n                if (d.data.children !== undefined)\n                    return d.data.name + \"/\";\n                else\n                    return d.data.name;\n            });\n\n        text.append(\"tspan\")\n            .attr(\"class\", \"icicleTreeTspans\")\n            .attr(\"fill-opacity\", d => labelVisible(d) ? 0.7 : 0)\n            .text(d => ` ${format(d.value)}`);\n\n        cell.selectAll(\"title\").remove();\n\n        let title = cell.append(\"title\");\n\n        title.append(\"tspan\").text(d => {\n            if (d.data.children !== undefined)\n                return d.data.name + \"/\" + \"\\n\";\n            else\n                return d.data.name + \"\\n\";\n        });\n        title.append(\"tspan\").text(d => {\n            let str;\n            switch (event.target.value) {\n                case \"sum\": str = \" lines modified\\n\"; break;\n                case \"insertion\": str = \" lines inserted\\n\"; break;\n                case \"deletion\": str = \" lines deleted\\n\"; break;\n            }\n            return (`${format(d.value)}` + str);\n        });\n\n        title.append(\"tspan\").text(d => {\n            let authors = d.data.authors;\n\n            let authorArray = [];\n\n            if(summaryByLOC) {\n                if(currentCLocMode.current == \"sum\") {\n                    for(let author in authors) \n                        authorArray.push([author, authors[author].insertions + authors[author].deletions]);\n                }\n                else if(currentCLocMode.current == \"insertion\") {\n                    for(let author in authors) \n                        authorArray.push([author, authors[author].insertions]);\n                }\n                else {  // if deletion\n                    for(let author in authors) \n                        authorArray.push([author, authors[author].deletions]);\n                }\n            }\n            else {\n                for(let author in authors) \n                    authorArray.push([author, authors[author].count]);\n            }\n\n            authorArray.sort((a, b) => b[1] - a[1]);\n\n            let message = \"  \";\n            authorArray.forEach(node => {\n                message = message + \"\\n  \" + node[0] + \" :: \" + node[1];\n            })\n\n            return \"Contributors:\" + message;\n        });\n    }\n\n    return (\n        <div>\n            {summaryByLOC &&\n                <Select\n                    id={\"icicleTreeLocSelector\"}\n                    style={{ width: \"90px\", fontSize: \"12px\", height: \"12px\" }}\n                    onChange={updateLOCType}\n                    native\n                >\n                    <option value=\"sum\">Sum</option>\n                    <option value=\"insertion\">Insertion</option>\n                    <option value=\"deletion\">Deletion</option>\n                </Select>\n            }\n            <svg\n                id=\"icicleSvg\"\n                width={width}\n                height={summaryByLOC ? height - 18 : height}\n            ></svg>\n        </div>\n    );\n}\n\nexport default FileIcicleSummary;","import React, { useEffect, useRef, Fragment, } from 'react';\nimport { Table, TableRow, TableCell, TableBody, Hidden } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/styles';\nimport * as d3 from 'd3';\nimport { getScoreColor, AttributeColors, BranchColors } from './ColorClasses';\nimport { PreferenceList, ClusterData, DataTypeByNameMap, BranchTypes } from './analyzer/GithruClasses';\nimport GitAnalyzer from './analyzer/GitAnalyzer';\n\nconst hover = (event) => {\n    event.target.style.textDecoration = \"underline\";\n    event.target.style.fontWeight = \"bold\";\n    // event.target.style.color = \"red\";\n    // event.target.style.fill = \"red\";\n}\nconst hout = event => {\n    event.target.style.textDecoration = \"\";\n    event.target.style.color = \"\";\n    event.target.style.fill = \"\";\n    event.target.style.fontWeight = \"400\";\n}\n\nconst useStyles = makeStyles(theme => ({\n    table: {\n        padding: 1,\n    },\n    tableCell: {\n        fontSize: \"12px\",\n        paddingLeft: 2,\n        paddingRight: 1,\n        paddingTop: 2,\n        paddingBottom: 2,\n        verticalAlign: \"text-top\",\n        minWidth: \"40px\"\n    },\n    nodeList: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        maxHeight: \"450px\",\n        maxWidth: \"100%\",\n        overflowY: \"auto\",\n    },\n    bar: {\n        padding: 0,\n    },\n    div: {\n        font: \"14px bold\"\n    },\n    vseparator: {\n        width: \"100%\",\n        height: \"10px\"\n    },\n}));\n\nconst MessagePrint = (props) => {\n    let message = (props.message !== undefined && props.message !== null ? props.message : \"\");\n\n    return (\n        <div style={{ display: \"flex\", flexWrap: \"wrap\", fontSize: \"10px\", marginLeft: props.marginLeft }}>\n            {message.trim().split(\"\\n\").map((line, li) =>\n                <Fragment key={li}>\n                    {line.trim() !== \"\" && line.trim().split(\" \").map((word, i) => (\n                        <div key={i} style={{ display: \"inline\", cursor: \"pointer\", }}>\n                            <span\n                                onMouseOver={hover}\n                                onMouseOut={hout}\n                                onClick={() => props.registerFavoriteFragment([\"message\", word])}\n                            >\n                                {word}\n                            </span>\n                &nbsp;\n                        </div>\n                    ))}\n                    {line.trim() !== \"\" && <br />}\n                </Fragment>\n            )}\n        </div>\n    );\n}\n\nconst NodeDetail = (props) => {\n    const classes = useStyles();\n    const { node, parentNode, registerFavoriteFragment, gitAnalyzer } = props;\n    // console.log(\"NodeDetail\", props);\n    const isParent = (parentNode === undefined && node.mergeNodes.length > 0);\n    const isChild = (parentNode !== undefined);\n    const className = (isChild ? \"commitChildRow\" + parentNode.seq : \"commitRow\" + node.seq);\n\n    const toggleRowShow = () => {\n        let childClass = \".\" + \"commitChildRow\" + node.seq;\n        // console.log(\"togrowshow\", d3.select(childClass).style(\"visibility\"));\n        let visible = d3.select(childClass).style(\"visibility\") === \"visible\";\n\n        d3.selectAll(childClass).style(\"visibility\", (visible ? \"collapse\" : \"\"));\n    }\n\n    return (\n        <TableRow\n            className={\"flexContainer \" + className}\n            style={{ visibility: (isChild ? \"collapse\" : \"\") }}\n        >\n            {props.useHeuristicMerge && (\n                <TableCell className={classes.tableCell} style={{ width: \"40px\", cursor: \"pointer\" }}>\n                    <div align=\"center\"\n                        onClick={isParent ? toggleRowShow : undefined}\n                    // onClick = {parentNode !== undefined ? () => toggleRowShow : undefined}\n                    >\n                        {isChild ? \"+\" :\n                            (isParent &&\n                                <u>CM({node.mergeNodes.length})</u>\n                            )\n                        }\n                    </div>\n                    {/* <div>{(hasMergeNodes ? \"M(\" + node.mergeNodes.length + \")\" : (isMergeNode ? \"⎿\" : \"\"))}</div> */}\n                </TableCell>\n            )}\n            {!props.useHeuristicMerge && (\n                <TableCell className={classes.tableCell} style={{ width: \"40px\", }}>\n                    <div align=\"center\">\n                        {node.isMergeTraversed && node.mergedToNode !== undefined &&\n                            <Fragment>\n                                CMed\n                  <br />\n                                <span style={{ fontSize: \"8px\" }}>({node.mergedToNode.id.substring(0, 7)})</span>\n                            </Fragment>\n                        }\n                    </div>\n                    {/* <div>{(hasMergeNodes ? \"M(\" + node.mergeNodes.length + \")\" : (isMergeNode ? \"⎿\" : \"\"))}</div> */}\n                </TableCell>\n            )}\n            <TableCell className={classes.tableCell}>\n                <div\n                    style={{ width: \"55px\", fontSize: \"10px\", cursor: \"pointer\" }}\n                    onMouseOver={hover}\n                    onMouseOut={hout}\n                    onClick={() => registerFavoriteFragment([\"id\", node.commit.id.substring(0, 6)])}\n                >#{node.commit.id.substring(0, 6)}</div>\n            </TableCell>\n            <TableCell className={classes.tableCell}>\n                <div\n                    style={{ width: \"55px\", fontSize: \"10px\" }}\n                // onMouseOver={hover}\n                // onMouseOut={hout}\n                // onClick={() => registerFavoriteFragment([\"date\", node.commit.date])}\n                >{GitAnalyzer.getTextValue(\"date\", GitAnalyzer.trimYYYYMMDD(node.commit.date)).substring(2, 10)}</div>\n            </TableCell>\n            <TableCell className={classes.tableCell} style={{ cursor: \"pointer\" }}>\n                <div\n                    style={{}}\n                    onMouseOver={hover}\n                    onMouseOut={hout}\n                    onClick={() => registerFavoriteFragment([\"authors\", node.commit.author])}\n                >\n                    {/* {GitAnalyzer.getTextValue(\"authors\", node.commit.author)} */}\n                    {GitAnalyzer.getTextValue(\"authors#2\", node.commit.author)}\n                </div>\n            </TableCell>\n            <TableCell className={classes.tableCell} >\n                <div\n                    style={{ width: \"30px\", fontSize: \"10px\", cursor: \"pointer\" }}\n                    onMouseOver={hover}\n                    onMouseOut={hout}\n                    onClick={() => registerFavoriteFragment([\"commitTypes\", node.commit.commitType])}\n                >{GitAnalyzer.getTextValue(\"commitTypes\", node.commit.commitType).substring(0, 3)}</div>\n            </TableCell>\n            <TableCell className={classes.tableCell}>\n                <div className=\"flexVerticalContainer\">\n                    <MessagePrint message={node.commit.message} registerFavoriteFragment={registerFavoriteFragment} />\n                    {node.pullRequestHeads.map((prNum, i) => {\n\n                        let { message, body, state, merged } = gitAnalyzer.pullMapByNumber[prNum];\n                        let closed = (state === \"closed\");\n                        let type;\n\n                        if (merged) {\n                            type = BranchTypes.PR_MERGED;\n                        } else if (closed) {\n                            type = BranchTypes.PR_CLOSED;\n                        } else {\n                            type = BranchTypes.PR_OPEN;\n                        }\n\n                        return (\n                            <React.Fragment key={i}>\n                                <div style={{ fontWeight: \"900\", color: BranchColors[type] }}>[Pull Request #{prNum}] - {type.substring(3, type.length)}</div>\n                                {message !== undefined && message !== null && message.trim() !== \"\" &&\n                                    <MessagePrint marginLeft={10} message={message} registerFavoriteFragment={registerFavoriteFragment} />\n                                }\n                                {body !== undefined && body !== null && body.trim() !== \"\" &&\n                                    <MessagePrint marginLeft={10} message={body} registerFavoriteFragment={registerFavoriteFragment} />\n                                }\n                            </React.Fragment>\n                        );\n                    })}\n                </div>\n            </TableCell>\n            <TableCell className={classes.tableCell} >\n                <div\n                    style={{ width: \"80px\", wordBreak: \"break-word\", }}\n                // onMouseOver={hover}\n                // onMouseOut={hout}\n                >\n                    {node.commit.tags !== undefined && node.commit.tags.length > 0 && GitAnalyzer.getTextValue(\"tags\", node.commit.tags.join(\", \"))}\n                    {node.commit.tags !== undefined && node.commit.tags.length > 0 && <br />}\n                    {node.commit.branches !== undefined && GitAnalyzer.getTextValue(\"branches\", node.commit.branches.map(b => (b.startsWith(\"origin/\") ? b.split(\"origin/\")[1] : b)).join(\", \"))}\n                </div>\n            </TableCell>\n            {/* <TableCell className={classes.tableCell} style={{ width: \"50px\" }}>\n          <div\n            onMouseOver={hover}\n            onMouseOut={hout}\n          >{node.commit.branches !== undefined && GitAnalyzer.getTextValue(\"branches\", node.commit.branches.join(\", \"))}</div>\n        </TableCell> */}\n        </TableRow>\n    )\n}\n\nexport const NodeDetailList = (props) => {\n    const classes = useStyles();\n    const { nodeList, gitAnalyzer, } = props;\n// console.log(\"NodeDetailList props\", props);\n    return (\n        <Table size=\"small\" className={classes.table}>\n            <TableBody>\n                {nodeList.map((node, i) => {\n                    return (\n                        <React.Fragment key={node.id}>\n                            <NodeDetail\n                                node={node}\n                                gitAnalyzer={gitAnalyzer}\n                                registerFavoriteFragment={props.registerFavoriteFragment}\n                                useHeuristicMerge={props.useHeuristicMerge}\n                            />\n                            {node.mergeNodes.map((mn, fi) => (\n                                <NodeDetail\n                                    gitAnalyzer={gitAnalyzer}\n                                    parentNode={node}\n                                    node={mn}\n                                    key={fi}\n                                    registerFavoriteFragment={props.registerFavoriteFragment}\n                                    useHeuristicMerge={props.useHeuristicMerge}\n                                />\n                            ))}\n                        </React.Fragment>\n                    );\n                })}\n            </TableBody>\n        </Table>\n    );\n}\n\nexport default NodeDetailList;","import React, { useEffect, useRef, Fragment, } from 'react';\nimport { Table, TableRow, TableCell, TableBody, Hidden } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/styles';\nimport * as d3 from 'd3';\nimport { getScoreColor, AttributeColors, BranchColors } from './ColorClasses';\nimport { PreferenceList, ClusterData, DataTypeByNameMap, BranchTypes } from './analyzer/GithruClasses';\nimport GitAnalyzer from './analyzer/GitAnalyzer';\nimport FileIcicleSummary from './FileIcicleSummary';\nimport WordCloud from 'wordcloud';\nimport NodeDetailList from './NodeDetailList';\n\nconst useStyles = makeStyles(theme => ({\n  table: {\n    padding: 1,\n  },\n  tableCell: {\n    fontSize: \"12px\",\n    paddingLeft: 2,\n    paddingRight: 1,\n    paddingTop: 2,\n    paddingBottom: 2,\n    verticalAlign: \"text-top\",\n    minWidth: \"40px\"\n  },\n  nodeList: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    maxHeight: \"450px\",\n    maxWidth: \"100%\",\n    overflowY: \"auto\",\n  },\n  bar: {\n    padding: 0,\n  },\n  div: {\n    font: \"14px bold\"\n  },\n  vseparator: {\n    width: \"100%\",\n    height: \"10px\"\n  },\n}));\n\nconst hover = (event) => {\n  event.target.style.textDecoration = \"underline\";\n  event.target.style.fontWeight = \"bold\";\n  // event.target.style.color = \"red\";\n  // event.target.style.fill = \"red\";\n}\nconst hout = event => {\n  event.target.style.textDecoration = \"\";\n  event.target.style.color = \"\";\n  event.target.style.fill = \"\";\n  event.target.style.fontWeight = \"400\";\n}\n\nfunction Cause(props) {\n  const { cluster, prefMap, gitAnalyzer, width } = props;\n\n  if (cluster.id === -1) return \"\";\n\n  const nodeList = cluster.nodeList;\n  if (nodeList.length > 1) {\n    let scoreSumMap = d3.range(nodeList.length - 1).reduce((prev, cur, i) => {\n      let scoreMap = gitAnalyzer.getScoreByPreferences(nodeList[cur], nodeList[cur + 1], prefMap);\n      // let scoreMap = scoreData[nodeList[cur].commit.no][nodeList[cur + 1].commit.no];\n      PreferenceList.forEach(prefName => {\n        let normedScore = +scoreMap[prefName] * prefMap[prefName];\n        if (i === 0) prev[prefName] = normedScore;\n        else prev[prefName] += normedScore;\n      });\n      return prev;\n    }, {});\n\n    let scoreSumList = Object.entries(scoreSumMap).map(d => [d[0], d[1] / (nodeList.length - 1)]);\n    scoreSumList.sort((a, b) => b[1] - a[1]);\n    let sum = scoreSumList.reduce((prev, cur) => { prev += cur[1]; return prev }, 0);\n    let pos = 0;\n\n    return (\n      <div id=\"causeDiv\"\n        className=\"flexContainer\"\n        height=\"20px\" width=\"100%\">\n        {scoreSumList.map((d, i) => {\n          let xWidth = width * d[1] / sum;\n          // let xPos = pos;\n          pos += xWidth;\n\n          return (\n            <div\n              key={i}\n              height=\"20px\"\n              style={{\n                fontSize: \"12px\",\n                width: xWidth,\n                background: getScoreColor(d[0], 3),\n                strokeWidth: 0,\n                overflow: \"hidden\",\n              }}\n            >\n              {d[0]}\n            </div>\n          );\n        })}\n      </div>\n    );\n  } else {\n    return (<div></div>);\n  }\n}\n\nconst BarChartSummary = (props) => {\n  const ref = useRef();\n  const yAxisHeight = 20;\n  // const itemHeight = 20;\n  const nameMargin = 2;\n\n  const { dataNameList, clusterData, width, height } = props;\n  const totalCount = clusterData.cluster.nodeCount;\n\n  const numByDataName = { \"authors\": 15, \"commitTypes\": 4, \"keywords\": 10 };\n\n  let dataList = dataNameList.map(dataName => {\n    let data = Object.entries(clusterData[dataName]);\n\n    // console.log(dataName, data)\n    if (dataName != \"keywords\") data.sort((a, b) => b[1] - a[1]);\n    else data.sort((a, b) => b[1][1] - a[1][1]);\n\n    return data.filter((d, i) => i < numByDataName[dataName]).map(d => {\n      if (dataName !== \"keywords\") d[1] = d[1] / totalCount;\n      else d[1] = d[1][0] / totalCount;\n      return d.concat(dataName)\n    }\n    );\n  });\n  // console.log(\"dataList\", dataList)\n  let authorList = dataList[0];\n  let commitTypeList = dataList[1];\n  let keywordList = dataList[2];\n\n  keywordList = keywordList.sort((a, b) => b[1] - a[1]);\n  console.log(keywordList);\n\n  // let keywordString = \"KEYWORDS: \";\n  // for(let word in keywordList) {\n  //   keywordString += keywordList[word][0];\n  //   keywordString += \", \"\n  // }\n  // keywordString = keywordString.slice(0, keywordString.length - 2)\n  // console.log(keywordString);\n\n  function processKey(word) {\n    if (word === undefined) return word;\n    return word.replace(/[`~! @#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/gi, '');\n    // return replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(word, \".\", \"\"), \">\", \"\"), \"=\", \"\"), \"}\", \"\"), \"{\", \"\"), \" \", \"\"), \"/\", \"\");\n}\n\n\n\n  let authorRatio = 0.6;\n  let commitTypeRatio = 0.2;\n  \n  // let sortedAuthorList = dataList.reduce((prev, cur) => prev.concat(cur), []);\n  // console.log(sortedAuthorList)\n  let xScaleDomainMax = 1;\n  let xScale = d3.scaleLinear().domain([0, xScaleDomainMax]).range([0, width - nameMargin]);\n  let yAuthorScale = d3.scaleBand().domain(authorList.map(d => d[0])).range([0, (height - yAxisHeight) * authorRatio * 0.95]).paddingInner(0.1).paddingOuter(0.1);\n  let yCommitTypeScale = d3.scaleBand().domain(commitTypeList.map(d => d[0])).range([0, (height - yAxisHeight) * commitTypeRatio * 0.95]).paddingInner(0.1).paddingOuter(0.1);\n\n  useEffect(() => {\n    const svgAuthor = d3.select(\"#barStatAuthor\").attr(\"transform\", \"translate(0,\" + (0) + \")\");\n    const svgCommitType = d3.select(\"#barStatCommitType\").attr(\"transform\", \"translate(0,\" + (0) + \")\");\n    \n    svgAuthor.selectAll(\"g\").remove();\n    svgCommitType.selectAll(\"g\").remove();\n\n    const yAuthorAxis = d3.axisLeft(yAuthorScale).ticks(0).tickSizeInner(0).tickSizeOuter(0);\n    const yCommitTypeAxis = d3.axisLeft(yCommitTypeScale).ticks(0).tickSizeInner(0).tickSizeOuter(0);\n\n    const xAxis = d3.axisBottom(xScale).ticks(5).tickFormat(d3.format(\".0%\")).tickSizeOuter(0);\n    let textSize = 15;\n\n    ///////// 여기까지 햇숨\n\n    // auhor's detailed chart bar\n\n    let rectsAuthor = svgAuthor.selectAll(\"g\")\n      .data(authorList)\n      .enter()\n      .append(\"g\")\n      ;\n    rectsAuthor.append(\"rect\")\n      .attr(\"x\", nameMargin)\n      .attr(\"y\", d => yAuthorScale(d[0]))\n      .attr(\"width\", d => xScale(d[1]))\n      .attr(\"height\", yAuthorScale.bandwidth())\n      .style(\"stroke-width\", 0)\n      .style(\"fill\", d => AttributeColors[DataTypeByNameMap[d[2]]][1])\n      .style(\"fill-opacity\", 0.3)\n      ;\n    rectsAuthor.append(\"text\")\n      .attr(\"x\", nameMargin + 1)\n      .attr(\"y\", d => (yAuthorScale(d[0]) + yAuthorScale.bandwidth() - (yAuthorScale.bandwidth() - textSize) / 2))\n      .style(\"font-size\", \"12px\")\n      .style(\"font-weight\", \"400\")\n      .style(\"cursor\", \"pointer\")\n      .text(d => GitAnalyzer.getTextValue(d[2], d[0]))\n      .on(\"mouseover\", () => hover(d3.event))\n      .on(\"mouseout\", () => hout(d3.event))\n      .on(\"click\", d => props.registerFavoriteFragment([d[2], d[0]]));\n    ;\n\n    let xAxisRenderAuthor = svgAuthor.append(\"g\")\n      .attr(\"transform\", \"translate(\" + nameMargin + \",\" + (height - yAxisHeight) * (authorRatio * 0.95) + \")\")\n      .call(xAxis);\n    xAxisRenderAuthor.selectAll(\"text\").style(\"font-size\", \"10px\");\n    xAxisRenderAuthor.selectAll(\".domain\").style(\"stroke\", \"#AAAAAA\")\n      ;\n    let yAxisRenderAuthor = svgAuthor.append(\"g\")\n      .attr(\"transform\", \"translate(1, 0)\")\n      .call(yAuthorAxis);\n    yAxisRenderAuthor.selectAll(\"text\").style(\"font-size\", \"10px\");\n    yAxisRenderAuthor.selectAll(\".domain\").style(\"stroke\", \"#AAAAAA\")\n\n    // commit type's detailed char bar (TODO)\n\n\n    let rectsCommitType = svgCommitType.selectAll(\"g\")\n      .data(commitTypeList)\n      .enter()\n      .append(\"g\")\n      ;\n    rectsCommitType.append(\"rect\")\n      .attr(\"x\", nameMargin)\n      .attr(\"y\", d => yCommitTypeScale(d[0]))\n      .attr(\"width\", d => xScale(d[1]))\n      .attr(\"height\", yCommitTypeScale.bandwidth())\n      .style(\"stroke-width\", 0)\n      .style(\"fill\", d => AttributeColors[DataTypeByNameMap[d[2]]][1])\n      .style(\"fill-opacity\", 0.3)\n      ;\n    rectsCommitType.append(\"text\")\n      .attr(\"x\", nameMargin + 1)\n      .attr(\"y\", d => (yCommitTypeScale(d[0]) + yCommitTypeScale.bandwidth() - (yCommitTypeScale.bandwidth() - textSize) / 2))\n      .style(\"font-size\", \"12px\")\n      .style(\"font-weight\", \"400\")\n      .style(\"cursor\", \"pointer\")\n      .text(d => GitAnalyzer.getTextValue(d[2], d[0]))\n      .on(\"mouseover\", () => hover(d3.event))\n      .on(\"mouseout\", () => hout(d3.event))\n      .on(\"click\", d => props.registerFavoriteFragment([d[2], d[0]]));\n    ;\n\n    let xAxisRenderCommitType = svgCommitType.append(\"g\")\n      .attr(\"transform\", \"translate(\" + nameMargin + \",\" + (height - yAxisHeight) * (commitTypeRatio * 0.95) + \")\")\n      .call(xAxis);\n    xAxisRenderCommitType.selectAll(\"text\").style(\"font-size\", \"10px\");\n    xAxisRenderCommitType.selectAll(\".domain\").style(\"stroke\", \"#AAAAAA\")\n      ;\n    let yAxisRenderCommitType = svgCommitType.append(\"g\")\n      .attr(\"transform\", \"translate(1, 0)\")\n      .call(yCommitTypeAxis);\n    yAxisRenderCommitType.selectAll(\"text\").style(\"font-size\", \"10px\");\n    yAxisRenderCommitType.selectAll(\".domain\").style(\"stroke\", \"#AAAAAA\")\n\n    let max = 5;\n    let min = 3;\n\n    let aMin = keywordList[0][1];\n    let aMax = keywordList[0][1];\n\n    keywordList.forEach(node => {\n        if(node[1] > aMax) aMax = node[1];\n        if(node[1] < aMin) aMin = node[1];\n    })\n\n    keywordList.forEach(node => {\n        node[1] = ((node[1] - aMin) / (aMax - aMin)) * (max - min) + min;\n    })\n\n// console.log(AttributeColors.keyword[2])\n\n    WordCloud(document.getElementById(\"keywordsDetailedList\"), {\n      list: keywordList,\n      wait: 0,\n      rotateRatio: 0,\n      weightFactor: 3,\n      color: AttributeColors.keyword[1],\n      classes: function(word) {\n          return \"wordCloud wordCloud_\" + processKey(word); \n      },\n      hover: function(item, dimension, event) {\n          if(item !== undefined) {\n              d3.selectAll(\".wordCloud\")\n                .style(\"font-weight\", \"300\")\n                .style(\"opacity\", 0.5);\n              d3.selectAll(\".wordCloud_\" + processKey(item[0]))\n                .style(\"font-weight\", \"900\")\n                .style(\"opacity\", 1);\n          }\n      }\n\n    \n  });\n  d3.select(\"#keywordsDetailedList\")\n        .on(\"mouseleave\", function(d) {\n            d3.selectAll(\".wordCloud\")\n            .style(\"font-weight\", 300)\n            .style(\"opacity\", 1);\n        })\n        \n  \n\n  }, [clusterData]);\n\n  return (\n    // <div style={{\n    //overflowY:\"auto\", \n    // height:summaryHeight}}>\n    <div>\n      <div id=\"keywordsDetailedList\" style={{position: \"relative\", top: \"-40px\", width: \"151px\", height: \"120px\"}}>\n      </div>\n      <div className=\"flexVerticalContainer\" style={{ width: \"100%\", position: \"relative\", top: \"-40px\"}}>\n      {/* <div style={{font:\"14px bold\"}}>{dataName}</div> */}\n      <svg id={\"barStatAuthor\"} width=\"100%\" ref={ref} height={height * authorRatio }></svg>\n      <svg id={\"barStatCommitType\"} width=\"100%\" ref={ref} height={height * authorRatio}></svg>\n      </div>\n    \n    </div>\n\n  );\n}\n\n\n///////////////////////////////////////\n// DEFAULT HOOK\n///////////////////////////////////////\nconst GroupSummary = props => {\n  const classes = useStyles();\n  const { selectedClusterNode, width, gitAnalyzer, arrowStartX, arrowWidth, registerFavoriteFragment } = props;\n  //const clusterData = new ClusterData(selectedClusterNode.cluster, gitAnalyzer.corpusData);\n  const clusterData = selectedClusterNode.clusterData;\n  const { cluster } = clusterData;\n  const { nodeList } = cluster;\n  const marginLeft = 10;\n  // const width = props.width - marginLeft;\n  const height = 400;\n  const barChartWidth = 150;\n  const fileSummaryWidth = 400;\n  const rightWidth = width - barChartWidth - fileSummaryWidth;\n  const arrowHeight = 20;\n  const showNameList = [\"authors\", \"commitTypes\", \"keywords\",];\n\n  // console.log(\"groupsummary rerender\", clusterData)\n  return (\n    <div className=\"flexVerticalContainer\">\n      <div id=\"GroupSummaryArrowAreaDiv\"\n        style={{ height: arrowHeight + \"px\", width: \"100%\" }}>\n        <svg\n          id={\"GroupSummaryArrowAreaSvg\"}\n          className=\"branchSummaryArrowArea\"\n          style={{\n            position: \"absolute\",\n            width: \"100%\",\n            height: arrowHeight + \"px\",\n            pointerEvents: \"none\"\n          }}\n        >\n          <line\n            // className={[\"branchSummaryArrowLine\", clusterNode.cluster.id].join(\"_\") + \" branchSummaryArrowLine\"}\n            x1={arrowStartX}\n            x2={0}\n            y1={0}\n            y2={arrowHeight}\n            style={{\n              strokeWidth: 1,\n              stroke: selectedClusterNode.color,\n              strokeOpacity: 1\n            }}\n          />\n          <line\n            // className={[\"branchSummaryArrowLine\", clusterNode.cluster.id].join(\"_\") + \" branchSummaryArrowLine\"}\n            x1={arrowStartX + arrowWidth}\n            x2={width}\n            y1={0}\n            y2={arrowHeight}\n            style={{\n              strokeWidth: 1,\n              stroke: selectedClusterNode.color,\n              strokeOpacity: 1\n            }}\n          />\n        </svg>\n      </div>\n      <div\n        id=\"GroupSummaryTitle\"\n        className=\"flexVerticalContainer\"\n        style={{ width: width }}\n      >\n        <div className={classes.div + \" flexContainer\"}>\n          <div style={{ width: \"60px\" }}>CAUSE: &nbsp;</div>\n          <Cause\n            cluster={cluster}\n            width={340}\n            // scoreData={gitAnalyzer.scoreData}\n            prefMap={cluster.pref}\n            gitAnalyzer={gitAnalyzer}\n          />\n        </div>\n        <div className={classes.div + \" flexContainer\"}>\n          <div style={{ width: \"60px\" }}>RANGE: &nbsp;</div>\n          <div>\n            {GitAnalyzer.trimYYYYMMDD(nodeList[0].commit.date).substring(2, 10)}(#{nodeList[0].commit.id.substring(0, 6)})\n            ~ &nbsp;\n          {GitAnalyzer.trimYYYYMMDD(nodeList.slice(-1)[0].commit.date).substring(2, 10)}(#{nodeList.slice(-1)[0].commit.id.substring(0, 6)})\n          , {cluster.nodeCount} commits, {cluster.locStat.clocSum} CLOC\n          </div>\n        </div>\n        <div className={classes.div + \" flexContainer\"}>\n          <div>\n            {cluster.nodeCount} COMMITS, {cluster.locStat.clocSum} CLOC\n          </div>\n        </div>\n        <div style={{ height: \"2px\" }} />\n      </div>\n      <div id=\"GroupSummaryDiv\"\n        className=\"flexContainer\"\n        style={{ width: width }}>\n        {/* style={{width:props.width-marginLeft, marginLeft:marginLeft + \"px\"}}> */}\n        {/* <div>FOCUS SELECTED Cluster Context (ⓒx{nodeList.length})</div> */}\n        <div className=\"flexVerticalContainer\" style={{ width: fileSummaryWidth + \"px\" }}>\n          <div id=\"groupFileSummaryDiv\">\n            <FileIcicleSummary\n              width={fileSummaryWidth}\n              height={height}\n              rawModLocData={clusterData.clocByFiles}\n              rawInsertLocData={clusterData.insertionByFiles}\n              rawDeleteLocData={clusterData.deletionByFiles}\n              rawModNumData={clusterData.touchCountByFiles}\n              file2Author={clusterData.fileToAuthor}\n              pageNum={5}\n            />\n          </div>\n        </div>\n\n        <div name=\"nodeList\" className={classes.nodeList} style={{\n          width: rightWidth + \"px\",\n          marginLeft: marginLeft,\n          height: height\n        }}>\n          <NodeDetailList\n            gitAnalyzer={gitAnalyzer}\n            nodeList={nodeList}\n            registerFavoriteFragment={registerFavoriteFragment}\n            useHeuristicMerge={props.useHeuristicMerge}\n          />\n        </div>\n\n        <div className=\"flexContainer\" style={{\n          width: barChartWidth + \"px\",\n          // flexWrap: \"wrap\",\n          marginLeft: \"5px\",\n          marginRight: \"5px\"\n        }}>\n          {/* {showNameList.map((dataName, i) => ( */}\n          <BarChartSummary\n            // key={i}\n            dataNameList={showNameList}\n            clusterData={clusterData}\n            width={barChartWidth - 10}\n            height={height}\n            registerFavoriteFragment={registerFavoriteFragment}\n          />\n          {/* ))} */}\n        </div>\n      </div>\n      <div style={{ height: \"50px\" }}></div>\n    </div>\n  )\n}\n\nexport default GroupSummary;","import * as d3 from 'd3';\nimport React, { useLayoutEffect, useRef, useState, Fragment } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ClusterBlock, ClusterNode, ClusterData, AttrsAbbreviationMap, DataTypeByNameMap, LOCStat } from \"./analyzer/GithruClasses\";\nimport { AttributeColors } from './ColorClasses';\nimport GitAnalyzer from './analyzer/GitAnalyzer';\nimport GroupSummary from './GroupSummary';\nimport * as actions from '../modules';\n\n\nconst branchSummaryValueRectMouseover = (d, color, rectMargin) => {\n// console.log(\"branchSummaryValueRectMouseover\", d);\n    if (d === undefined) return;\n\n    let sameValueElements = d3.selectAll(\".branchSummaryValueRect\")\n        // .filter(selection => (selection !== undefined && d[0] === selection[0] && d[1] === selection[1]));\n        .filter(selection => {return (selection.data !== undefined && d[0] === selection.data[0] && d[1] === selection.data[1]);})\n        .each( function() {\n            let newColor = d3.select(this).attr(\"highlight-color\");\n            d3.select(this)\n                .style(\"font-weight\", \"bold\")\n                .style(\"background-color\", newColor);\n            d3.select(this).select(\"span\").style(\"background\", newColor);\n        });\n\n    // sameValueElements.style(\"opacity\", \"1\");\n    // sameValueElements.style(\"border\", \"2px blue solid\");\n    // sameValueElements.style(\"font-weight\", \"bold\");\n    sameValueElements.style(\"font-weight\", \"bold\")\n    // sameValueElements.style(\"border\", \"2px blue solid\")\n    sameValueElements.style(\"opacity\", 1.0)\n// console.log(\"samevalue\", sameValueElements);\n\n    sameValueElements.each(function () {\n        let [clusterId, valueId] = d3.select(this).attr(\"id\").split(\"_\").slice(1, 3);    \n        d3.select(\"#branchSummaryClusterRect_\" + clusterId).style(\"border\", rectMargin + \"px \" + color + \" solid\");\n        d3.select(\"#blocksBox\" + clusterId).style(\"stroke-width\", \"3px\");\n        // d3.select(\"#\" + d3.select(this).attr(\"id\") + \"_text\").style(\"font-weight\", \"normal\");\n        d3.selectAll(\".branchSummaryArrowLine_\" + clusterId)\n            // .style(\"stroke-width\", \"2px\")\n            .style(\"stroke-opacity\", 1);\n    });\n}\n\nconst branchSummaryValueRectMouseleave = (rectMargin) => {\n    d3.selectAll(\".branchSummaryValueRect\").each( function() {\n        let orgColor = d3.select(this).attr(\"org-color\");\n        d3.select(this)\n            .style(\"font-weight\", \"normal\")\n            .style(\"background-color\", orgColor);\n        d3.select(this).select(\"span\").style(\"background\", orgColor);\n    })\n    ;\n\n    d3.selectAll(\".branchSummaryClusterRect\").style(\"border\", \"dotted \" + rectMargin + \"px WhiteSmoke\");\n    d3.selectAll(\".blocksBox\").style(\"stroke-width\", \"1px\");\n    d3.selectAll(\".branchSummaryArrowLine\").style(\"stroke-width\", \"1px\").style(\"stroke-opacity\", 0.3);\n    // d3.selectAll(\".branchSummaryValueRectText\").style(\"font-weight\", \"\");\n}\n\n\n\n///////////////////////////////////////////////////\n// MAIN HOOK\nconst BranchSummary = (props) => {\n// console.log(\"BranchSummary start!!\", props);\n    const {branchNo, width, height, hideFiles, summaryByLOC} = props;\n    const clusterOverviewHeight = useSelector(state => state.layout.clusterOverviewHeight);\n    let isInitRef = useRef(true);\n\n    const clusterNodes = (props.clusterNodes === undefined ? [] : props.clusterNodes.filter(d => !d.isNonConfilctMerge));\n    clusterNodes.sort((a, b) => a.x - b.x);\n\n    const itemHeight = 20;\n    const itemTopCount = 5;\n    let arrowHeight = 20;\n\n    let showAttrs;\n    let showAttrValueCount;\n    let showAttrRenderFlow;\n    let showByCommitCountOnly;\n\n    const dispatch = useDispatch();\n    const registerFavoriteFragment = (f) => {\n        dispatch(actions.registerFavoriteFragment(f));\n    }\n    const [selectedClusterNodeIndex, setSelectedClusterNodeIndex] = useState(undefined);\n\n\n    if (!summaryByLOC) {\n        showAttrs = [[\"authors\"], [\"commitTypes\"], [\"touchCountByFiles\", \"touchCountByDirs\"], [\"keywords\"], ];\n        showAttrValueCount = [3, 3, 4, 3];\n        // showAttrRenderFlow = [false, false, true, false];\n        showAttrRenderFlow = [true, true, true, true];\n        showByCommitCountOnly = [true, true, false, true];\n    } else {\n        showAttrs = [[\"authorsLOCStat\"], [\"commitTypesLOCStat\"], [\"clocByDirs\"], [\"clocByFiles\"], [\"keywords\"], ];\n        showAttrValueCount = [2, 2, 2, 3, 3];\n        // showAttrRenderFlow = [false, false, true, true, false];\n        showAttrRenderFlow = [true, true, true, true, true];\n        showByCommitCountOnly = [false, false, false, false, true];\n    }\n\n    const margin = 2;\n    const divHeight = itemHeight * showAttrValueCount.reduce( (prev, cur, i) => prev + (showAttrRenderFlow[i] ? cur : 1), 0) + margin * 2;\n    const summaryWidth = 0;\n    const underlineHeight = 10;\n    let itemMinWidth = 20;\n    const summaryMinWidth = 600;\n    const totalCommitCount = clusterNodes.filter(d => !d.isNonConfilctMerge).reduce((prev, node) => prev + node.cluster.nodeCount, 0);\n    const totalCLOC = clusterNodes.filter(d => !d.isNonConfilctMerge).reduce((prev, node) => prev + node.cluster.locStat.clocSum, 0);\n    const totalValue = (!summaryByLOC ? totalCommitCount : totalCLOC);\n\n    if (itemMinWidth * clusterNodes.length > width) itemMinWidth = 10;\n    let maxWidth = Math.max(width, itemMinWidth * clusterNodes.length);\n\n    let summaryStartX = 0;\n    let summaryEndX = width;\n    let arrowDivStartX = 0;\n    let arrowDivWidth = width;\n\n    clusterNodes.forEach(clusterNode => {\n        let clusterData = new ClusterData(clusterNode.cluster, props.gitAnalyzer.corpusData, props.useHeuristicMerge);\n        clusterData[\"touchCountByDirs\"] = Object.entries(clusterData[\"touchCountByDirs\"])\n            .filter(d => d[0].split(\"/\").length === 4)\n            .reduce((prev, cur) => { prev[cur[0]] = cur[1]; return prev }, {});\n        clusterData[\"clocByDirs\"] = Object.entries(clusterData[\"clocByDirs\"])\n            .filter(d => d[0].split(\"/\").length === 4)\n            .reduce((prev, cur) => { prev[cur[0]] = cur[1]; return prev }, {});\n\n        clusterNode.clusterData = clusterData;\n// console.log(\"clusterData\", clusterData);\n    });\n\n    // branch name\n    clusterNodes.reverse();\n\n    let branchNames = GitAnalyzer.getBranchNamesFromBranchClusterNodes(clusterNodes);\n\n    clusterNodes.reverse();\n    // if (!props.showPullRequestBranch) branchNames = branchNames.filter( b => b.startsWith(\"origin/pr\") === false);\n    let branchName = branchNames.join(\", \")\n    \n    let widthScale, rectWidths;\n// console.log(\"overflow?\", itemMinWidth * totalValue > width, itemMinWidth * totalValue , width)\n    if (itemMinWidth * totalValue > width) {\n        widthScale = d3.scaleLinear().range([0, maxWidth - (itemMinWidth * clusterNodes.length)]).domain([0, totalValue - clusterNodes.length]);\n        rectWidths = clusterNodes.map( clusterNode => itemMinWidth + widthScale(\n            (summaryByLOC ? clusterNode.cluster.locStat.clocSum : clusterNode.cluster.nodeCount - 1)\n        ));\n    } else {\n        widthScale = d3.scaleLinear().range([0, width]).domain([0, totalValue]);\n        \n        rectWidths = clusterNodes.map( clusterNode => widthScale(\n            (summaryByLOC ? clusterNode.cluster.locStat.clocSum : clusterNode.cluster.nodeCount)\n        ));\n    }\n    \n    const rectMargin = 2;\n\n    /////////////////////////////////////////////\n    // DRAW SUMMARY FUNC\n    const drawSummary = (clusterNode, index) => {\n        if (clusterNode.isNonConfilctMerge) return;\n\n        let branchSummaryClusterRectStr = \"branchSummaryClusterRect_\" + clusterNode.cluster.id;\n        // d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\"div\").remove();\n// console.log(\"removed? \", d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\"div\"));\n        let topDataList = showAttrs.reduce((prev, attrList, attrIndex) => {\n            let dataList = attrList.reduce((p, attr) => p.concat(\n                Object.entries(clusterNode.clusterData[attr]).map(d => \n                    [attr].concat( [d[0], (d[1] instanceof LOCStat ? d[1].clocSum : d[1])] )\n            )), []);\n            // let ignoreList = dataList.filter(d => d[0].endsWith(\"Files\") && hideFiles.indexOf(d[1]) >= 0);\n// console.log(dataList);\n            if (dataList.length === 0) return prev;\n            if(dataList.length === 0 || dataList[0][0] != \"keywords\") {\n                dataList = dataList.filter(d => !(d[0].endsWith(\"Files\") && hideFiles.indexOf(d[1]) >= 0))\n                    .sort((a, b) => b[2] - a[2])\n                    // .concat(ignoreList)\n            } else {\n                dataList = dataList.filter(d => !(d[0].endsWith(\"Files\") && hideFiles.indexOf(d[1]) >= 0))\n                    .sort((a, b) => b[2][1] - a[2][1])\n                    .map( d => [d[0], d[1], d[2][0]])\n                ;\n            }\n            dataList = dataList.filter((d, i) => i < showAttrValueCount[attrIndex]);\n\n            Array(showAttrValueCount[attrIndex] - dataList.length).fill().forEach(() => dataList.push(undefined));\n            prev.push(dataList);\n            return prev;\n        }, []);\n\n        // d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\".branchSummaryClusterRect\").selectAll(\"div\").remove();\n        // let borderRect = d3.select(\"#branchSummary\" + branchNo + \"_\" + index + \"_border_rect\").selectAll(\".branchSummaryClusterRect\").data(topDataList).enter();\n        d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\".branchSummaryValueWrap\").remove();\n        let borderRect = d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\".branchSummaryClusterRect\").data(topDataList).enter();\n// console.log(\"borderRect = \", branchSummaryClusterRectStr, d3.select(branchSummaryClusterRectStr), borderRect, topDataList)\n\n        borderRect.append(\"div\")\n            .attr(\"id\", (d, i) => \"branchSummaryValueWrap_\" + clusterNode.cluster.id + \"_\" + i)\n            // .attr(\"class\", (d, i) => (showAttrRenderFlow[i] ? \"flexVerticalContainer\": \"flexContainer\"))\n            .attr(\"class\", (d, i) => \"branchSummaryValueWrap \" + (showAttrRenderFlow[i] ? \"flexVerticalContainer\": \"flexContainer\"))\n            .style(\"width\", \"100%\")//(rectWidths[index] - rectMargin * 2) + \"px\")\n            // .style(\"height\", itemHeight + \"px\")\n            .style(\"background-color\",\"#EEEEEE\")//\"rgba(128,128,128,0.1)\")\n            .style(\"border\", \"1px \" + clusterNode.color)\n            .style(\"flex-wrap\", \"wrap\")\n            .style(\"font-size\", \"12px\")\n            .on(\"click\", () => {\n                d3.selectAll(\".branchSummaryClusterRectOver\").style(\"opacity\", 0)\n                d3.select(\"#branchSummaryClusterRect_\" + clusterNode.cluster.id + \"_over\").style(\"opacity\", 0.2).style(\"background\", clusterNode.color);\n                setSelectedClusterNodeIndex(index);\n            })\n            .on(\"mouseenter\", function(d) {\n                // if (!showAttrRenderFlow[d.parentIndex]) \n                d3.select(branchSummaryClusterRectStr).style(\"border\", rectMargin + \"px \" + clusterNode.color + \" solid\");\n                d3.select(this).style(\"overflow\", \"visible\").style(\"font-size\", \"12px\").style(\"z-index\", 100);\n                d3.select(this).selectAll(\"span\").style(\"background\")\n                branchSummaryValueRectMouseover(d.data, clusterNode.color, rectMargin);\n            })\n            .on(\"mouseleave\", function(d) {\n                // if (!showAttrRenderFlow[d.parentIndex]) \n                d3.select(this).style(\"overflow\", \"hidden\");\n                d3.select(this).style(\"z-index\", undefined).style(\"font-size\", \"12px\");\n                branchSummaryValueRectMouseleave(rectMargin);\n            })\n            // .style(\"z-index\", (d, i) => showAttrRenderFlow[i] ? i * 10 + 1 : (i * 10))\n                .selectAll(\".branchSummaryValueRect\")\n                .data( (d, i) => d.map( (data) => { return {\"data\": data, \"parentIndex\": i}; }))\n                .enter()\n                    .append(\"div\")\n                    .attr(\"id\", (d, i) => \"branchSummaryValueRect_\" + clusterNode.cluster.id + \"_\" + d.parentIndex + \"_\" + i)\n                    .attr(\"class\", \"branchSummaryValueRect\")\n                    // .style(\"width\", d => (d.data ? (100 * d.data[2] / \n                    //         (summaryByLOC && showAttrRenderFlow[d.parentIndex] ? clusterNode.cluster.locStat.clocSum : clusterNode.cluster.nodeCount)\n                    //     ) : 0) + \"%\")\n                    .style(\"width\", d => { \n                        // console.log(\"summaryByLOC\", d, summaryByLOC, !showByCommitCountOnly[d.parentIndex]);\n                        return (d.data ? (100 * d.data[2] / \n                        (summaryByLOC && !showByCommitCountOnly[d.parentIndex] ? clusterNode.cluster.locStat.clocSum : clusterNode.cluster.nodeCount)\n                    ) : 0) + \"%\";})\n                    .style(\"height\", itemHeight + \"px\")\n                    // .style(\"height\", d => (d.data === undefined && showAttrRenderFlow[d.parentIndex]) ? (itemHeight) + \"px\" : \"\")\n                    .style(\"border-radius\", \"5px\")\n                    .style(\"background-color\", d => { return (d.data ? AttributeColors[DataTypeByNameMap[d.data[0]]][3] : \"\");  } )\n                    .attr(\"highlight-color\", d => { return (d.data ? AttributeColors[DataTypeByNameMap[d.data[0]]][1] : \"\");  } )\n                    .attr(\"org-color\", d => { return (d.data ? AttributeColors[DataTypeByNameMap[d.data[0]]][3] : \"\");  } )\n                    // .style(\"opacity\", 1)\n                    .style(\"font-size\", \"12px\")\n                    .style(\"overflow\", \"hidden\")\n                    .style(\"padding-left\", \"2px\")\n                    .style(\"color\", d => (d.data === undefined ? \"\" : (d.data[0].endsWith(\"Files\") && hideFiles.indexOf(d.data[1]) >= 0 ? \"grey\" : \"\")))\n                    .on(\"mouseover\", function(d) {\n                        // if (!showAttrRenderFlow[d.parentIndex]) \n                        d3.select(this).style(\"overflow\", \"visible\").style(\"font-size\", \"12px\").style(\"z-index\", 100);\n                        d3.select(this).selectAll(\"span\").style(\"background\")\n                        branchSummaryValueRectMouseover(d.data, clusterNode.color, rectMargin);\n                    })\n                    .on(\"mouseleave\", function(d) {\n                        // if (!showAttrRenderFlow[d.parentIndex]) \n                        d3.select(this).style(\"overflow\", \"hidden\");\n                        d3.select(this).style(\"z-index\", undefined).style(\"font-size\", \"12px\");\n                        branchSummaryValueRectMouseleave(rectMargin);\n                    })\n                    .append(\"span\")\n                        .attr(\"class\", \"valueRectSpan\")\n                        .text(d => d.data === undefined ? \"\" : GitAnalyzer.getTextValue(d.data[0], d.data[1]))\n                        .style(\"overflow\", d => showAttrRenderFlow[d.parentIndex] ? \"visible\" : \"hidden\")\n                        .style(\"white-space\", \"pre\")\n        ;\n        \n        // resize height(rendered) \n        // let bsrect = d3.select(\"#\" + branchSummaryClusterRectStr);\n        // let totalWrapHeight = showAttrRenderFlow.reduce( (prev, cur, i) => prev + bsrect.select(\"#branchSummaryValueWrap_\" + clusterNode.cluster.id + \"_\" + i).node().getBoundingClientRect().height, 0);\n        // d3.select(\"#\" + branchSummaryClusterRectStr).style(\"height\", (totalWrapHeight + rectMargin * 2) + \"px\");\n// console.log(\"totalWrapHeight\", totalWrapHeight)\n    }\n    \n\n    useLayoutEffect( () => {\n        setSelectedClusterNodeIndex(undefined);\n// console.log(\"useEffect (NOT INIT)\", branchNo, clusterNodes, hideFiles)\n        // if (!isInitRef.current) {\n            // d3.selectAll(\".branchSummaryClusterRect\").selectAll(\"div\").remove();\n            clusterNodes.forEach( (clusterNode, i) => {\n                let branchSummaryClusterRectStr = \"branchSummaryClusterRect_\" + clusterNode.cluster.id;\n                // d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\"div\").remove();\n                drawSummary(clusterNode, i);\n            });\n\n            if (clusterNodes.length === 1 && clusterNodes[0].cluster.nodeList.length < 100) setSelectedClusterNodeIndex(0);\n        // }\n    // });\n    }, [branchNo, JSON.stringify(clusterNodes.map(d => d.cluster.id)), hideFiles]);\n\n    useLayoutEffect( () => {\n        let prevIndex = selectedClusterNodeIndex;\n        setSelectedClusterNodeIndex(undefined);\n        clusterNodes.forEach( (clusterNode, i) => {\n            drawSummary(clusterNode, i);\n        });\n// console.log(\"useLayoutEffect prevIndex\", prevIndex)\n        setSelectedClusterNodeIndex(prevIndex);\n    }, [summaryByLOC]);\n\n    if (clusterNodes.length === 0) return (<div></div>);\n\n    let currentX = 0;\n    let descriptionHeight = 30;\n\n    let branchNum = (clusterNodes.length > 0 ? clusterNodes[0].cluster.nodeList[0].implicitBranchNo : -1);\n    arrowHeight = clusterOverviewHeight - Number(d3.select(\"#underlines\" + branchNum).attr(\"y\")) + descriptionHeight;\n// console.log(\"BS render?\", divHeight,  branchNo, arrowHeight, clusterOverviewHeight, d3.select(\"#underlines\" + branchNum).attr(\"y1\"));\n// console.log(\"selectedClusterNodeIndex !== undefined && clusterNodes[selectedClusterNodeIndex] !== undefined\", props,selectedClusterNodeIndex !== undefined, clusterNodes[selectedClusterNodeIndex] !== undefined)\n\n    let containReleaseList = clusterNodes.reduce( (prev, clusterNode) => \n        prev.concat( clusterNode.blockList.reduce( (p, block) => p.concat(block.releaseNodeList.map(d => d.releaseTagString)), []) )\n    , []);\n    if (containReleaseList.length > 3) containReleaseList = [containReleaseList[0], containReleaseList[1], \"...\", containReleaseList.slice(-1)[0]];\n    let containReleaseNames = containReleaseList.join(\", \");\n\n    return (\n        <div id={\"branchSummaryDiv\" + branchNo}>\n            <svg id={\"branchSummaryArrow\" + branchNo}\n                className=\"branchSummaryArrowArea\"\n                style={{\n                    position:\"absolute\",\n                    width: arrowDivWidth + \"px\",\n                    height: arrowHeight + \"px\",\n                    left: arrowDivStartX + \"px\",\n                    top: clusterNodes[0].height + underlineHeight + \"px\",\n                    pointerEvents: \"none\"\n                }}\n            >\n                {clusterNodes.map( (clusterNode, i) => {\n                    let startCurrentX = currentX;\n                    currentX += rectWidths[i];\n                    return (\n                        <React.Fragment key={i}>\n                        <line \n                            className={[\"branchSummaryArrowLine\", clusterNode.cluster.id].join(\"_\") + \" branchSummaryArrowLine\"}\n                            x1={Math.max(0, clusterNode.x - summaryStartX)}\n                            x2={startCurrentX}\n                            y1={0}\n                            y2={arrowHeight}\n                            style={{\n                                strokeWidth: 1,\n                                stroke: clusterNode.color,\n                                strokeOpacity: 0.3\n                            }}\n                        />\n                        <line \n                            className={[\"branchSummaryArrowLine\", clusterNode.cluster.id].join(\"_\") + \" branchSummaryArrowLine\"}\n                            x1={Math.max(0, clusterNode.x - summaryStartX + clusterNode.width)}\n                            x2={currentX}\n                            y1={0}\n                            y2={arrowHeight}\n                            style={{\n                                strokeWidth: 1,\n                                stroke: clusterNode.color,\n                                strokeOpacity: 0.3\n                            }}\n                        />\n                        </React.Fragment>\n                    );\n                })}\n            </svg>\n\n            <div id={\"branchDescription\" + branchNo}\n                align=\"left\"\n                style={{\n                    position: \"absolute\",\n                    width: arrowDivWidth + \"px\",\n                    height: \"20px\",\n                    left: arrowDivStartX + \"px\",\n                    top: (clusterNodes[0].height + underlineHeight + arrowHeight - descriptionHeight + 10 ) + \"px\",\n                    fontSize: \"14px\",\n                    fontWeight: \"bold\",\n                    overflow: \"visible\",\n                    whiteSpace: \"nowrap\",\n                }}\n            >\n                [{containReleaseNames}] {branchName}  \n                <span style={{fontWeight: \"normal\"}}> (total {(summaryByLOC ? \"CLOC\" : \"commit #\")}: {totalValue})</span>\n                {/* {clusterNodes[0].cluster.implicitBranchNo} */}\n            </div>\n            \n            <div id={\"branchSummary\" + branchNo}\n                className=\"branchSummaryArea\"\n                style={{\n                    position: \"absolute\",\n                    \"width\": maxWidth + summaryWidth + \"px\",\n                    \"height\": (divHeight) + \"px\",\n                    \"left\": summaryStartX + \"px\",\n                    \"top\": (clusterNodes[0].height + underlineHeight + arrowHeight) + \"px\",\n                }}\n                className=\"flexContainer\"\n            >\n                {clusterNodes.map( (clusterNode, i) => {\n                    let overWidth = (i > 0 ? rectWidths.slice(0, i).reduce( (prev, cur) => prev + cur, 0) : 0);\n                    return(\n                        <Fragment key={clusterNode.cluster.id}>\n                            <div\n                                id={\"branchSummaryClusterRect_\" + clusterNode.cluster.id}\n                                className=\"branchSummaryClusterRect flexVerticalContainer\"\n                                style={{\n                                    width: rectWidths[i],\n                                    // height: clusterNode.isNonConfilctMerge ? itemHeight : itemHeight * showAttrValueCount.length,\n                                    fill: \"white\",\n                                    // strokeDasharray: (clusterNode.isNonConfilctMerge ? 4 : 0),\n                                    backgroundColor: \"white\",\n                                    border: \"dotted \" + rectMargin + \"px WhiteSmoke\",\n                                    cursor: \"pointer\",\n                                }}\n                            >\n                            </div>\n                            <div\n                                id={\"branchSummaryClusterRect_\" + clusterNode.cluster.id + \"_over\"}\n                                className=\"branchSummaryClusterRectOver flexVerticalContainer\"\n                                style={{\n                                    position: \"absolute\",\n                                    height: (divHeight) + \"px\",\n                                    left: overWidth + \"px\",\n                                    top: \"0px\",\n                                    width: rectWidths[i],\n                                    pointerEvents: \"none\",\n                                    opacity: 0,\n                                    // height: clusterNode.isNonConfilctMerge ? itemHeight : itemHeight * showAttrValueCount.length,\n                                    // background: \"white\",\n                                    // strokeDasharray: (clusterNode.isNonConfilctMerge ? 4 : 0),\n                                    // backgroundColor: \"white\",\n                                    // border: \"dotted \" + rectMargin + \"px WhiteSmoke\",\n                                    // cursor: \"pointer\",\n                                }}\n                            >\n                            </div>\n                        </Fragment>\n                    );\n                })}\n            </div>\n            <div\n                style={{\n                    position: \"absolute\",\n                    // \"width\": maxWidth + summaryWidth + \"px\",\n                    \"width\" : width + \"px\",\n                    // \"height\": (divHeight) + \"px\",\n                    \"left\": summaryStartX + \"px\",\n                    \"top\": (clusterNodes[0].height + underlineHeight + arrowHeight + divHeight) + \"px\",\n            }}\n            >\n                {selectedClusterNodeIndex !== undefined && clusterNodes[selectedClusterNodeIndex] !== undefined &&\n                    <GroupSummary\n                        gitAnalyzer={props.gitAnalyzer}\n                        width={width}\n                        selectedClusterNode={clusterNodes[selectedClusterNodeIndex]}\n                        arrowStartX={rectWidths.filter( (d, i) => i < selectedClusterNodeIndex).reduce( (prev, cur) => prev + cur, 0)}\n                        arrowWidth={rectWidths[selectedClusterNodeIndex]}\n                        registerFavoriteFragment={registerFavoriteFragment}\n                        useHeuristicMerge={props.useHeuristicMerge}\n                    />\n                }\n            </div>\n            \n        </div>\n    );\n}\n        \nexport default BranchSummary;","import * as d3 from 'd3';\nimport GitAnalyzer from './analyzer/GitAnalyzer';\nimport { intersection } from \"lodash\";\nimport { BranchColors } from './ColorClasses';\n\n\nconst moverLinks = (HALinkIds) => {\n    HALinkIds.forEach(l => d3.select(\"#mergedRelationLink_\" + l)\n        .style(\"stroke-dasharray\", \"\")\n        .style(\"stroke\", \"BLACK\").style(\"visibility\", \"\"));\n}\n\nconst mleaveLinks = (HALinkIds) => {\n    HALinkIds.forEach(l => {\n        let link = d3.select(\"#mergedRelationLink_\" + l);\n        link.style(\"stroke\", link.attr(\"orgColor\"))\n            .style(\"stroke-dasharray\", \"1, 1\")\n            .style(\"visibility\", link.attr(\"orgVisibility\"));\n    });\n}\n\n// selectedClusters 조정해야함\nexport function drawClusters(\n    layout, sel, clusterNodeList, maxBlockIndex, gitAnalyzer, pref, threshold,\n    nonConflictGroupingLevel = 0, ignoreFiles = [], useHeuristicMerge, showMergeLink, showGroupSummaryFunc) {\n    const defaultBlockOpacity = 0.4;\n    const defaultClusterOpacity = 0.05;\n    // const selectedClusterOpacity = 0.5;\n\n// console.log(\"DRAWCLUSTER!!!\", clusterNodeList, maxBlockIndex, showGroupSummaryFunc)\n    if (sel === undefined) sel = [0, gitAnalyzer.allNodeList.length - 1];\n    d3.select(\"#clusterOverviewSvg\").selectAll(\"g\").remove();\n    // console.log(\"brushed\", sel);\n\n    let marginLeft = 1;\n    let marginRight = 1;\n    let width = layout.clusterOverviewWidth - marginLeft - marginRight;\n    let height = layout.orgClusterOverviewHeight;\n    let maxHeightCommitCount = 10;\n    let startBlockIndex, endBlockIndex;\n    let summaryLineHeight = 10;\n\n    startBlockIndex = 0;\n    endBlockIndex = maxBlockIndex + 1;\n\n    const yRange = d3.range(0, d3.max(clusterNodeList.map(d => d.y)) + 1);\n    const minHeight = yRange.slice(-1)[0] * 60;\n    // console.log(\"minHeight = \", minHeight, height);\n\n    if (minHeight > layout.orgClusterOverviewHeight) height = minHeight;\n    // else if (minHeight < layout.clusterOverviewHeight) height = layout.orgClusterOverviewHeight;\n// console.log(\"overview height adjust\", yRange, minHeight, height, layout)\n    d3.select(\"#clusterOverviewSvg\").attr(\"height\", height);\n\n    console.log(\"BRUSHING CONVERTED\", startBlockIndex, endBlockIndex, width, layout.clusterOverviewWidth);\n    let xBandScale = d3.scaleBand().domain(d3.range(0, endBlockIndex - 1)).range([0, width]);\n    let yBandScale = d3.scaleBand().domain(yRange).range([0, height - summaryLineHeight]).paddingInner(0.2).paddingOuter(0.2);\n    let xRectScale = d3.scaleLinear().domain([0, endBlockIndex - 1]).range([0, width]);\n    let blockHeightScale = d3.scaleLinear().range([0, yBandScale.bandwidth() - 2]).domain([0, maxHeightCommitCount]);\n    let clusterOverviewSvg = d3.select(\"#clusterOverviewSvg\")\n        .append(\"g\")\n        .attr(\"transform\", \"translate(\" + marginLeft + \" 0)\")\n        .attr(\"id\", \"clusters\");\n\n    let colorByBranchNo = {};\n\n    // console.log(\"BRUSHED clusterNodeList\", clusterNodeList)\n    // console.log(\"BRUSHED clusternodelist\", clusterNodeList.filter(cn => cn.blockList[0].x <= endBlockIndex && cn.blockList.slice(-1)[0].x >= startBlockIndex));\n    // let brushedClusterNodeList = clusterNodeList.filter(cn => cn.blockList[0].x <= endBlockIndex && cn.blockList.slice(-1)[0].x >= startBlockIndex);\n    let brushedClusterNodeList = clusterNodeList;\n    //////////////////////////////////////////////\n    // nonConflictGroupMerging (나중에 function으로 빼라.)\n    //////////////////////////////////////////////\n    if (nonConflictGroupingLevel > 0) {\n        let branchNodesListForSwitching = Object.values(brushedClusterNodeList\n            .reduce((prev, clusterNode) => {\n                let branchNum = clusterNode.cluster.nodeList[0].implicitBranchNo;\n                if (branchNum in prev) prev[branchNum].push(clusterNode);\n                else prev[branchNum] = [clusterNode];\n                return prev;\n            }, {}))\n            .filter(cn => cn.length > 2);\n        // console.log(\"branchNodesListForSwitching\", branchNodesListForSwitching);\n\n        // switch non-confilct groups\n        branchNodesListForSwitching.forEach(branchNodes => {\n            branchNodes.sort((a, b) => a.blockList[0].x - b.blockList[0].x);\n            let fileSetList = branchNodes.map(clusterNode => getFileSetForCluster(clusterNode.cluster, ignoreFiles));\n\n            branchNodes.filter((d, i) => i < branchNodes.length - 2).forEach((clusterNode, i) => {\n                // break recursive\n                if (clusterNode.isNonConfilctMerge) return;\n\n                // A(org) -> B(skip) -> C(target)\n                let fileSetOrg = Array.from(fileSetList[i]);\n                let fileSetSkip = Array.from(fileSetList[i + 1]);\n                let fileSetTarget = Array.from(fileSetList[i + 2]);\n                // console.log(\"fileSet\", fileSetOrg, fileSetSkip, fileSetTarget);\n                // console.log(\"check check!!\", intersection(fileSetOrg, fileSetSkip), intersection(fileSetSkip, fileSetTarget));\n                // check non-conflict\n                if (intersection(fileSetOrg, fileSetSkip).length > 0 || intersection(fileSetSkip, fileSetTarget).length > 0) return;\n\n                // check similarity between A end and C first\n                // console.log(\"compare\", clusterNode.cluster.nodeList.slice(-1)[0], branchNodes[i+2].cluster.nodeList[0]);\n                let scores = gitAnalyzer.getScoreByPreferences(clusterNode.cluster.nodeList.slice(-1)[0], branchNodes[i + 2].cluster.nodeList[0], pref, false);\n                // console.log(\"NONCONFLICT SWITCH\", branchNodes, threshold, scores.sum, fileSetOrg, fileSetSkip, fileSetTarget);\n\n                // \n                if (threshold <= scores.sum) {\n                    let targetClusterNode = branchNodes[i + 2];\n                    targetClusterNode.isNonConfilctMerge = true;\n\n                    targetClusterNode.cluster.nodeList.forEach(n => clusterNode.cluster.addNode(n, scores));\n                    // clusterNode.cluster.nodeList.concat(targetCluster.nodeList);\n                    clusterNode.blockList.slice(-1)[0].isNonConflictMergedSource = true;\n                    clusterNode.blockList.slice(-1)[0].commitCount += targetClusterNode.cluster.nodeList.length;\n                    targetClusterNode.blockList.forEach(b => b.isNonConflictMergedTarget = true);\n                }\n            });\n        });\n    }\n    //////////////////////////////////////////////\n    let blockMapByNode = {};\n    // SET MERGED NODE RELATION\n    brushedClusterNodeList.forEach(clusterNode => {\n        let blockList = clusterNode.blockList.filter(d => !d.isNonConflictMergedTarget);\n        blockList.forEach(block => {\n            block.nodeList.forEach(node => {\n                blockMapByNode[node.id] = block;\n            });\n        })\n    });\n\n    let clusterNodesByBranchNo = brushedClusterNodeList\n        .reduce((prev, clusterNode) => {\n            let branchNum = clusterNode.cluster.nodeList[0].implicitBranchNo;\n            if (branchNum in prev) prev[branchNum].push(clusterNode);\n            else prev[branchNum] = [clusterNode];\n            return prev;\n        }, {});\n\n    // console.log(\"brushedClusterNodeList\", brushedClusterNodeList, xBandScale.bandwidth());\n    //////////////////////////////////////////\n    // PRE-BUILD HA MergeLINKS\n    let toBlockListMapByBlock = {};\n    brushedClusterNodeList.forEach(clusterNode => {\n        clusterNode.blockList.filter(b => b.containsMergeTraversedNodes).map(block => {\n            let toBlockList = Array.from(block.mergedToNodeList.reduce((prev, node) => {\n                let matchedBlock = blockMapByNode[node.id];\n                if (matchedBlock !== undefined) prev.add(matchedBlock);\n                return prev;\n            }, new Set()));\n            toBlockListMapByBlock[block.id] = toBlockList;\n            toBlockList.map(toBlock => {\n                let id = block.id + \"_\" + toBlock.id;\n                block.HALinkIds.push(id);\n                toBlock.HALinkIds.push(id);\n            });\n        });\n    });\n\n    brushedClusterNodeList\n        .forEach(clusterNode => {\n            let blocksBox = clusterOverviewSvg.append(\"g\");\n            let boxWidth = (clusterNode.blockList.slice(-1)[0].x - clusterNode.blockList[0].x + 1) * xBandScale.bandwidth();\n            let boxHeight = yBandScale.bandwidth();\n            let x = xRectScale(clusterNode.blockList[0].x);\n            let y = yBandScale(clusterNode.y);\n\n            clusterNode.branchType = gitAnalyzer.getClusterBranchType(clusterNode.cluster);\n            clusterNode.color = getClusterNodeColor(clusterNode);\n            let clusterColor = clusterNode.color;\n            \n            clusterNode.x = x;\n            clusterNode.width = boxWidth;\n            clusterNode.height = y + boxHeight;\n\n            // let drawBlockList = clusterNode.blockList.filter(b => b.x >= startBlockIndex && b.x <= endBlockIndex);\n            let drawBlockList = clusterNode.blockList;\n            let elem = clusterOverviewSvg.append(\"g\").selectAll(\"rect\")\n                // .data(drawBlockList.filter(d => d.x >= startBlockIndex && d.x <= endBlockIndex))\n                .data(drawBlockList)\n                .enter();\n            elem.append(\"rect\")\n                .attr(\"class\", \"block\")\n                .attr(\"id\", d => \"block\" + d.id)\n                // .attr(\"x\", d => {console.log(\"xxx\", d, d.x, xBandScale(d.x)); return xBandScale(d.x)})\n                .attr(\"x\", d => xBandScale(d.x))\n                .attr(\"y\", d => yBandScale(clusterNode.y) + (yBandScale.bandwidth() - blockHeightScale(Math.min(d.commitCount, maxHeightCommitCount))) / 2)\n                .attr(\"width\", xBandScale.bandwidth())\n                .attr(\"height\", d => blockHeightScale(Math.min(d.commitCount, maxHeightCommitCount)))\n                .attr(\"rx\", (xBandScale.bandwidth() >= 10 ? 5 : 2))\n                .style(\"pointer-events\", \"none\")\n                .style(\"fill\", d => {\n                    if (d.isNonConflictMergedTarget) return \"white\";\n                    else return clusterColor;\n                })\n                .style(\"fill-opacity\", d => {\n                    if (d.isNonConflictMergedSource || d.isNonConflictMergedTarget) return 1;\n                    else if (d.containsMergeTraversedNodes) return 0;\n                    else return defaultBlockOpacity;\n                })\n                .style(\"stroke-width\", d => {\n                    // if (useHeuristicMerge && d.containsMergedNodes && !d.isNonConflictMergedTarget) {\n                    if (d.containsMergedNodes && !d.isNonConflictMergedTarget) {\n                        if (xBandScale.bandwidth() < 15) return 1;\n                        else return 2;\n                    }\n                    else if (d.containsMergeTraversedNodes) return 1;\n                    else return 0;\n                })\n                .style(\"stroke\", d => {\n                    // if (useHeuristicMerge && d.containsMergedNodes && !d.isNonConflictMergedTarget) return \"black\";\n                    if (d.containsMergedNodes && !d.isNonConflictMergedTarget) return \"black\";\n                    else if (d.containsMergeTraversedNodes) return \"grey\";\n                    else return \"\";\n                })\n                .style(\"stroke-dasharray\", d => (!useHeuristicMerge && (d.containsMergedNodes || d.containsMergeTraversedNodes) ? \"1, 1\" : \"\"))\n                ;\n\n            //////////////////////////////////////////////\n            // SET releaseStr to block\n            drawBlockList.forEach(block => {\n                let releaseNodeList = block.nodeList.filter(node => node.isRelease);\n\n                if (useHeuristicMerge) {\n                    releaseNodeList = releaseNodeList.concat(\n                        block.nodeList.reduce((prev, node) =>\n                            prev.concat(node.mergeNodes.filter(node => node.isRelease && node.seq >= sel[0] && node.seq <= sel[1]))\n                            , [])\n                    );\n                }\n                block.releaseNodeList = releaseNodeList;\n                releaseNodeList.sort((a, b) => b.seq - a.seq);\n                if (releaseNodeList.length === 1) block.releaseTagString = releaseNodeList[0].releaseTagString;\n                if (releaseNodeList.length > 1)\n                    block.releaseTagString = releaseNodeList[0].releaseTagString + \" (~\" + releaseNodeList.slice(-1)[0].releaseTagString + \")\";\n                if (releaseNodeList.filter(node => node.isMajorRelease).length > 0) block.containsMajorRelease = true;\n                else block.containsMajorRelease = false;\n                // console.log(\"block\", releaseNodeList, block);\n\n                ////////////////////////////////// \n                // HA MERGED EDGES\n                if (block.containsMergeTraversedNodes) {\n                    let toBlockList = toBlockListMapByBlock[block.id];\n                    let linkVertical = d3.linkVertical().x(d => d.x).y(d => d.y);\n                    let linkHorizontal = d3.linkHorizontal().x(d => d.x).y(d => d.y);\n\n                    let dataset = toBlockList.map(toBlock => {\n                        // console.log(\"check\", clusterNode, toBlock.clusterNode, clusterNode === toBlock.clusterNode);\n                        let sx, sy, tx, ty;\n                        sx = xRectScale(block.x) + xBandScale.bandwidth() / 2;\n                        sy = yBandScale(clusterNode.y) + boxHeight / 2;\n                        tx = xRectScale(toBlock.x) + xBandScale.bandwidth() / 2;\n                        ty = yBandScale(toBlock.clusterNode.y) + boxHeight / 2;\n                        // console.log(\"coordinagtes, \", sx, sy, tx, ty, block.mergedToNodeList, toBlock.nodeList, block.mergedToNodeList.map(n => blockMapByNode[n.id]), blockMapByNode,)\n// if (toBlock.clusterNode.y === clusterNode.y) console.log(\"appeared horizon\", block, toBlock);\n                        return {\n                            source: { x: sx, y: sy, }, target: { x: tx, y: ty }, toBlock: toBlock,\n                            id:block.id + \"_\" + toBlock.id,\n                            linkFunc: (toBlock.clusterNode.y !== clusterNode.y ? linkVertical : linkHorizontal),\n                        }\n                    });\n                    clusterOverviewSvg.append(\"g\").selectAll(\"path\")\n                        .data(dataset)\n                        .enter()\n                        .append(\"path\")\n                        .attr(\"id\", d => \"mergedRelationLink_\" + block.id + \"_\" + d.toBlock.id)\n                        .attr(\"class\", \"mergedRelationLinks\")// + \"mergedRelationLinks_\" + d.id)\n                        .attr(\"d\", d => d.linkFunc(d))\n                        .attr(\"orgColor\", clusterColor)\n                        .attr(\"orgVisibility\", (showMergeLink ? \"visible\" : \"hidden\"))\n                        .style(\"pointer-events\", \"none\")\n                        .style(\"stroke-dasharray\", (\"1, 1\"))\n                        .style(\"stroke\", clusterColor)\n                        .style(\"stroke-width\", 2)\n                        .style(\"fill-opacity\", 0)\n                        .style(\"stroke-opacity\", \"0.6\")\n                        .style(\"visibility\", function () {\n                            return (showMergeLink ? \"visible\" : \"hidden\");\n                        });\n                }\n            });\n\n            let releaseBlockList = drawBlockList.filter(block => block.releaseTagString !== undefined && block.releaseTagString !== \"\");\n            let releases = clusterOverviewSvg.append(\"g\").selectAll(\"line\")\n                .data(releaseBlockList)\n                .enter();\n            releases.append(\"line\")\n                .attr(\"id\", d => d.releaseTagString)\n                .attr(\"stroke\", \"red\")\n                .style(\"stroke-width\", \"2px\")\n                .attr(\"x1\", d => xBandScale(d.x) + xBandScale.bandwidth())\n                .attr(\"x2\", d => xBandScale(d.x) + xBandScale.bandwidth())\n                .attr(\"y1\", yBandScale(clusterNode.y) - 3)\n                .attr(\"y2\", yBandScale(clusterNode.y) + yBandScale.bandwidth() + 3)\n                .style(\"stroke-dasharray\", \"2\")\n                ;\n            releases\n                .append(\"text\")\n                .attr(\"x\", d => xBandScale(d.x) + xBandScale.bandwidth())\n                .attr(\"y\", yBandScale(clusterNode.y))\n                .attr(\"text-anchor\", \"start\")\n                .style(\"font-size\", \"10px\")\n                .style(\"font-weight\", d => (d.containsMajorRelease ? \"bold\" : \"\"))\n                .text(d => d.releaseTagString)\n                ;\n\n            colorByBranchNo[clusterNode.cluster.nodeList[0].implicitBranchNo] = clusterColor;\n\n\n            /////////////////////////////////////\n            // BLOCKS BOX\n            let HALinkIds = clusterNode.blockList.reduce((prev, block) => prev.concat(block.HALinkIds), []);\n            blocksBox.append(\"rect\")\n                .attr(\"class\", \"blocksBox\")\n                .attr(\"id\", \"blocksBox\" + clusterNode.cluster.id)\n                .attr(\"style\", \"stroke:\" + clusterColor + \";fill-opacity:\" + defaultClusterOpacity + \";fill:\" + clusterColor)\n                .style(\"stroke-dasharray\", (clusterNode.isNonConfilctMerge ? 4 : 0))\n                .style(\"stroke-opacity\", (clusterNode.isNonConfilctMerge ? 0.3 : 1))\n                .style(\"stroke-width\", 1)\n                .style(\"cursor\", \"pointer\")\n                .attr(\"x\", x)\n                .attr(\"y\", y)\n                .attr(\"width\", boxWidth)\n                .attr(\"height\", boxHeight)\n                .attr(\"rx\", (boxWidth >= 10 ? 5 : 2))\n                .on(\"click\", function () {\n                    // BLOCK CLICK EVENT (NOT BRANCH)\n                    if (clusterNode.isNonConfilctMerge) return;\n\n                    let isMulti = showGroupSummaryFunc(-1, [clusterNode]);\n                    if (!isMulti) {\n                        d3.selectAll(\".blocksBox\").style(\"fill-opacity\", defaultClusterOpacity);\n                    }\n                    // d3.selectAll(\".blocksBox\").style(\"fill-opacity\", defaultClusterOpacity);\n                    d3.select(this).style(\"fill-opacity\", \"0.4\");\n                    d3.selectAll(\".branchUnderlines\").style(\"fill-opacity\", 0.4);\n                    // showBranchSummary(clusterNodesByBranchNo[branchNo], branchNo, width, height, ignoreFiles, summaryByLOC);\n                })\n                .on(\"mouseover\", function () {\n                    if (clusterNode.isNonConfilctMerge) return;\n                    d3.select(this).style(\"stroke-width\", 3);\n\n                    if (!useHeuristicMerge) moverLinks(HALinkIds);\n                })\n                .on(\"mouseleave\", function () {\n                    if (clusterNode.isNonConfilctMerge) return;\n                    d3.select(this).style(\"stroke-width\", 1);\n\n                    if (!useHeuristicMerge) mleaveLinks(HALinkIds);\n                })\n                ;\n            if (boxWidth >= 10) {\n                blocksBox\n                    .append(\"text\")\n                    .attr(\"x\", x + boxWidth)\n                    .attr(\"y\", y + yBandScale.bandwidth() - 1)\n                    .attr(\"text-anchor\", \"end\")\n                    .style(\"font-size\", \"12px\")\n                    .text(clusterNode.isNonConfilctMerge ? \"\" : clusterNode.cluster.nodeCount)// + clusterNode.cluster.mergedNodeCount)\n                    // .text(clusterNode.blockList.reduce((prev, cur) => (prev + cur.commitCount), 0))\n                    ;\n            }\n\n            ////////////////////////////////// \n            // EDGES\n            let dataset = [];\n            let child = clusterNode.cluster.child;\n            let parent = clusterNode.cluster.parent;\n            const pushDataSet = (node, isChild) => {\n                if (node === undefined) return true;\n\n                let sx, sy, tx, ty;\n\n                let [minNX, maxNX] = d3.extent(node.blockList.map(d => d.x));\n                if (isChild) {\n                    sx = x + boxWidth;\n                    sy = y + boxHeight / 2;\n                    tx = xRectScale(minNX);\n                    ty = yBandScale(node.y) + boxHeight / 2;\n                } else {\n                    sx = xRectScale(maxNX) + xBandScale.bandwidth();\n                    sy = yBandScale(node.y) + boxHeight / 2;\n                    tx = x;\n                    ty = y + boxHeight / 2;\n                }\n\n                dataset.push({\n                    source: { x: sx, y: sy, }, target: { x: tx, y: ty }\n                });\n            }\n\n            if (child !== undefined) pushDataSet(clusterNodeList.filter(d => d.cluster === child)[0], true);\n            if (parent !== undefined) pushDataSet(clusterNodeList.filter(d => d.cluster === parent)[0], false);\n            // console.log(\"datset.lnegth = \", clusterNode.cluster, child, parent, clusterNode.cluster.id, dataset.length, dataset)\n            blocksBox.selectAll(\"path\")\n                .data(dataset)\n                .enter()\n                .append(\"path\")\n                .attr(\"class\", \"edge\" + clusterNode.cluster.id)\n                .attr(\"d\", d3.linkHorizontal().x(d => d.x).y(d => d.y))\n                .style(\"pointer-events\", \"none\")\n                // .style(\"stroke-dasharray\", (\"1, 1\"))\n                .style(\"stroke\", clusterColor)\n                .style(\"stroke-width\", 2)\n                .style(\"fill-opacity\", 0)\n                .style(\"stroke-opacity\", \"0.3\")\n            ;\n        });\n\n    //////////////////////////////////////////////////\n    // UNDERLINES\n    Object.values(clusterNodesByBranchNo).forEach(branchClusterNodes => {\n        branchClusterNodes.sort((a, b) => a.blockList[0].x - b.blockList[0].x);\n        let branchNo = branchClusterNodes[0].cluster.nodeList[0].implicitBranchNo;\n        let elem = clusterOverviewSvg.append(\"g\");\n        let branchUnderlineWidth = xRectScale(branchClusterNodes.slice(-1)[0].blockList.slice(-1)[0].x) + xBandScale.bandwidth() - xRectScale(branchClusterNodes[0].blockList[0].x);\n\n        let HALinkIds = branchClusterNodes.reduce((p, clusterNode) =>\n            p.concat(clusterNode.blockList.reduce((prev, block) => prev.concat(block.HALinkIds), []))\n            , []);\n        \n        let branchNames = GitAnalyzer.getBranchNamesFromBranchClusterNodes(branchClusterNodes);\n\n        elem.append(\"rect\")\n            .attr(\"class\", \"branchUnderlines\")\n            .attr(\"id\", \"underlines\" + branchNo)\n            // .style(, \"stroke-width:\" + summaryLineHeight + \"px\")\n            .attr(\"x\", xRectScale(branchClusterNodes[0].blockList[0].x))\n            .attr(\"width\", branchUnderlineWidth)\n            .attr(\"y\", yBandScale(branchClusterNodes[0].y) + yBandScale.bandwidth())// + summaryLineHeight / 2)\n            .attr(\"rx\", (xRectScale(branchClusterNodes.slice(-1)[0].blockList.slice(-1)[0].x) + xBandScale.bandwidth() - xRectScale(branchClusterNodes[0].blockList[0].x) >= 10 ? 4 : 2))\n            .attr(\"height\", summaryLineHeight)\n            .style(\"fill\", colorByBranchNo[branchNo])\n            .style(\"fill-opacity\", \"0.4\")\n            .style(\"stroke\", colorByBranchNo[branchNo])\n            .style(\"stroke-opacity\", 0.4)\n            .style(\"cursor\", \"pointer\")\n            .on(\"click\", function () {\n                console.log(\"branch show\", branchNo);\n                showGroupSummaryFunc(branchNo, branchClusterNodes);\n                // d3.select(this)\n                //     .attr(\"y\", yBandScale(branchNodes[0].y) + yBandScale.bandwidth())\n                //     .attr(\"height\", summaryLineHeight);\n                d3.selectAll(\".branchUnderlines\").style(\"fill-opacity\", 0.4);\n                d3.select(this).style(\"fill-opacity\", 1);\n                d3.select(\".blocksBox\").style(\"fill-opacity\", defaultClusterOpacity);\n            })\n            .on(\"mouseover\", function (d) {\n                // d3.select(this)\n                //     .attr(\"y\", yBandScale(branchNodes[0].y))\n                //     .attr(\"height\", yBandScale.bandwidth() + summaryLineHeight);\n                d3.select(this).style(\"stroke-width\", \"3px\").style(\"stroke-opacity\", 1)//.style(\"fill-opacity\", 0);\n\n                if (!useHeuristicMerge) moverLinks(HALinkIds);\n                \n                d3.select(\"#clusterToolTip\")\n                    .html(branchNames.join(\"<br />\"))\n                    .style(\"visibility\", \"visible\")\n                    .style(\"opacity\", 0.8)\n                    .style(\"left\", (d3.event.pageX + 4) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 2) + \"px\");\n            })\n            .on(\"mouseleave\", function (d) {\n                // d3.select(this)\n                // .attr(\"y\", yBandScale(branchNodes[0].y) + yBandScale.bandwidth())\n                // .attr(\"height\", summaryLineHeight);\n                d3.select(this).style(\"stroke-width\", \"1px\").style(\"stroke-opacity\", 0.4)//.style(\"fill-opacity\", 0.4);\n\n                if (!useHeuristicMerge) mleaveLinks(HALinkIds);\n                d3.select(\"#clusterToolTip\").style(\"visibility\", \"hidden\");\n            })\n            ;\n\n        elem.append(\"text\")\n            .attr(\"id\", \"foldButton\" + branchNo)\n            .attr(\"x\", Math.min(xRectScale(branchClusterNodes.slice(-1)[0].blockList.slice(-1)[0].x) + xBandScale.bandwidth(), width) + 2)\n            .attr(\"y\", yBandScale(branchClusterNodes[0].y) + yBandScale.bandwidth() + summaryLineHeight)\n            // .text(branchNo + \"<\")\n            // .text( (branchNodes[0].cluster.branches.length > 0 ? branchNodes[0].cluster.branches.map(b => b.split(\"/\").slice(-1)[0]) : \"\") + \"▼\")\n            .text(\n                // GitAnalyzer.getBranchNamesFromBranchClusterNodes(branchClusterNodes).join(\",\") + \n                \"▼\")\n            .style(\"font-size\", (branchUnderlineWidth > 30 ? \"14px\" : (branchUnderlineWidth > 8 ? \"12px\" : \"8px\")))\n            .style(\"font-weight\", \"bold\")\n            .style(\"pointer-events\", \"none\")\n            .attr(\"fill\", colorByBranchNo[branchNo])\n            .attr(\"text-anchor\", \"end\")\n    });\n\n    return [clusterNodesByBranchNo, width, height];\n}\n\nfunction getClusterNodeColorFromClusterNodes(clusterNodes) {\n    return getClusterNodeColor(clusterNodes.slice(-1)[0].cluster);\n}\n\nfunction getClusterNodeColor(clusterNode) {\n    return BranchColors[clusterNode.branchType];\n}\n\nfunction getFileSetForCluster(cluster, ignoreFiles) {\n    return cluster.nodeList.reduce((prev, node) => {\n        let fileNameList = Object.keys(node.commit.diffStat.files);\n        fileNameList.filter(f => ignoreFiles.indexOf(f) < 0).forEach(d => prev.add(d));\n        return prev;\n    }, new Set());\n}","import Button from '@material-ui/core/Button';\nimport * as d3 from 'd3';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as actions from '../modules';\nimport GitAnalyzer from './analyzer/GitAnalyzer';\nimport ValueSlider from './ValueSlider';\nimport BranchSummary from './BranchSummary';\nimport { intersection } from \"lodash\";\n\nimport { drawClusters } from './CommitGraphDrawCluster';\nimport { buildClusterNodes } from './CommitGraphClustering';\n\nfunction highlightKeywordMatchBlock(searchResultList, currentClusterNodeList) {\n    // highlight blocks\n    let searchResultCommitSeqList = searchResultList.reduce((prev, cur) => {\n        prev.push(cur.seq);\n        return prev;\n    }, []);\n    d3.selectAll(\".matches\").remove();\n    if (searchResultList.length === 0) return;\n    \n    let matchSvg = d3.select(\"#clusters\").append(\"g\").attr(\"class\", \"matches\");\n    currentClusterNodeList\n        .reduce((prev, cur) => {\n            prev = prev.concat(cur.blockList);\n            return prev;\n        }, [])\n        .filter(block => d3.select(\"#block\" + block.id).size() > 0)\n        .forEach(block => {\n            if (intersection(searchResultCommitSeqList, block.nodeList.map(d => d.seq)).length > 0) {\n                let blockNode = d3.select(\"#block\" + block.id);\n                let x = +blockNode.attr(\"x\");\n                let y = +blockNode.attr(\"y\");\n                let width = +blockNode.attr(\"width\");\n                let height = +blockNode.attr(\"height\");\n\n                const over = 4;\n                matchSvg\n                    .append(\"ellipse\")\n                    .attr(\"class\", \"matchRect\")\n                    .attr(\"cx\", x + width / 2.0)\n                    .attr(\"cy\", y + height / 2.0)\n                    .attr(\"rx\", width / 2.0 + over)\n                    .attr(\"ry\", height / 2.0 + over)\n                    .style(\"fill\", \"red\")\n                    .style(\"fill-opacity\", \"0.2\")\n                    .style(\"stroke\", \"red\")\n                    .style(\"stroke-width\", \"2\")\n                    .style(\"pointer-events\", \"none\")\n                ;\n            }\n        });\n    \n    searchResultCommitSeqList.forEach ( seq => {\n        const commitRect = d3.select(\"#commitRect\" + seq);\n        const x = +commitRect.attr(\"x\");\n        const y = +commitRect.attr(\"y\");\n        const width = +commitRect.attr(\"width\");\n        const height = +commitRect.attr(\"height\");\n        const over = 2;\n\n        d3.select(\"#commitRects\")\n            .append(\"ellipse\")\n            .attr(\"class\", \"matchRect\")\n            .attr(\"cx\", x + width / 2.0)\n            .attr(\"cy\", y + height / 2.0)\n            .attr(\"rx\", width / 2.0 + over)\n            .attr(\"ry\", height / 2.0)\n            .style(\"fill\", \"red\")\n            .style(\"fill-opacity\", \"0.2\")\n            .style(\"stroke\", \"red\")\n            .style(\"stroke-width\", \"2\")\n            .style(\"pointer-events\", \"none\")\n        ;\n    });\n}\n\n/////////////////////\n// HOOK CLASS\nconst CommitGraph = (props) => {\n    // const ignoreFiles = [\"CHANGELOG.md\", \"version.txt\"];\n    const state = useSelector(state => state);\n    const layout = JSON.parse(JSON.stringify(state.layout));\n    const overviewWidth = layout.clusterOverviewWidth;\n    const width = layout.clusterOverviewWidth - layout.clusterOverviewSliderWidth;\n    const height = layout.clusterOverviewHeight;\n\n    // local layout vars\n    layout.height = height;\n    layout.sliderWidth = layout.clusterOverviewSliderWidth;\n    // layout.clusterOverviewMarginRight = 3;\n    layout.clusterOverviewWidth = layout.width - layout.sliderWidth// - this.clusterOverviewMarginRight;\n    layout.minBlockShow = 0;\n\n    const dispatch = useDispatch();\n    const updateClusterThreshold = (th) => dispatch(actions.updateClusterThreshold(th));\n    const updateClusterOverviewHeight = (height) => dispatch(actions.updateClusterOverviewHeight(height));\n    const [thresholdList, setThresholdList] = useState([]);\n\n    // info = [clusterNodes, isBranch]\n    let prevSelectedClusterNodesInfo = useRef([undefined, undefined]);\n    const [selectedClusterNodesInfo, setSelectedClusterNodesInfo] = useState([undefined, undefined]);\n\n    let clusteringResult = useRef();\n    let clusterNodesResult = useRef();\n    let clusterNodesByBranchNo = useRef();\n    let groupSvgWidth = useRef(0);\n    let totalStat = useRef([0, 0]);\n    \n    const showGroupSummaryFunc = (branchNo, clusterNodes) => {\n        // CONTROL MULTI CLICK (SHIFT)\n        let currentClusterNodes = prevSelectedClusterNodesInfo.current[1];\n// console.log(\"prev = \", prevSelectedClusterNodesInfo.current);\n        let multi = false;\n        if (d3.event !== null \n                && d3.event.shiftKey \n                && branchNo === -1\n                && prevSelectedClusterNodesInfo.current !== undefined && prevSelectedClusterNodesInfo.current[0] === -1 \n                && prevSelectedClusterNodesInfo.current[1][0].cluster.nodeList[0].implicitBranchNo === clusterNodes[0].cluster.nodeList[0].implicitBranchNo\n                ) {\n            // already chosen => pass\n            if (prevSelectedClusterNodesInfo.current[1].filter(d => d.cluster.id === clusterNodes[0].cluster.id).length === 0) {\n                currentClusterNodes.push(clusterNodes[0]);\n            }\n            multi = true;\n        } else {\n            currentClusterNodes = clusterNodes;\n        }\n        prevSelectedClusterNodesInfo.current = [branchNo, currentClusterNodes];\n        setSelectedClusterNodesInfo([branchNo, currentClusterNodes]);\n\n        if (branchNo >= 0) d3.select(\"#underlines\" + branchNo).style(\"fill-opacity\", 1);\n        \n        return multi;\n// console.log(\"showGroupSummaryFunc called\", [branchNo, clusterNodes])\n    }\n\n    const buildAndDrawClusterNodes = () => {\n        let [threshold, thresholdList, clusterList] = clusteringResult.current;\n\n        setSelectedClusterNodesInfo([undefined, undefined]);\n\n        clusterNodesResult.current = buildClusterNodes(props.gitAnalyzer, threshold, thresholdList, clusterList, state.groupingParameters.branchShowMapByType);\n        setThresholdList(clusterNodesResult.current[2]);\n\n        let svgHeight;\n        [clusterNodesByBranchNo.current, groupSvgWidth.current, svgHeight] = drawClusters(\n            layout, state.commitSeqSelection, clusterNodesResult.current[0], clusterNodesResult.current[1], \n            props.gitAnalyzer, state.groupingParameters.preferenceWeights, state.groupingParameters.threshold,\n            state.groupingParameters.nonConflictGroupingLevel, state.summaryParameters.hideFiles,\n            state.groupingParameters.useHeuristicMerge, state.showMergeLink, \n            showGroupSummaryFunc);\n        updateClusterOverviewHeight(svgHeight);\n        \n        totalStat.current = [\n            clusterNodesResult.current[0].filter(d => !d.isNonConfilctMerge).length,\n            clusterNodesResult.current[0].filter(d => !d.isNonConfilctMerge).reduce( (prev, d) => prev + d.cluster.nodeCount, 0),\n            // (useHeuristicMerge ? clusteringResult.current[0].filter(d => !d.isNonConfilctMerge).reduce( (prev, d) => prev + d.mergeNodes.nodeCount, 0) : 0)\n        ];\n\n// console.log(\"clusterNodesByBranchNo\", clusterNodesByBranchNo.current, selectedClusterNodesInfo[0] in clusterNodesByBranchNo.current)\n        if (!(selectedClusterNodesInfo[0] in clusterNodesByBranchNo.current)) {\n            setSelectedClusterNodesInfo([undefined, undefined]);\n            prevSelectedClusterNodesInfo.current = [undefined, undefined];\n        } else {\n            showGroupSummaryFunc(selectedClusterNodesInfo[0], clusterNodesByBranchNo.current[selectedClusterNodesInfo[0]]);\n            // setSelectedClusterNodesInfo([selectedClusterNodesInfo[0], ]);\n            // prevSelectedClusterNodesInfo.current()\n        }\n\n        highlight();\n    }\n\n    const highlight = () => {\n        if (state.highlightQuery !== undefined && state.highlightQuery.length > 0) {\n            let searchResultNodeList = GitAnalyzer.searchByKeywords(\n                clusterNodesResult.current[0].reduce( (prev, clusterNode) => prev.concat(clusterNode.cluster.nodeList.map(d => d)), []), \n                state.highlightQuery);\n            highlightKeywordMatchBlock(searchResultNodeList, clusterNodesResult.current[0]);\n        } else {\n            highlightKeywordMatchBlock([], undefined);\n        }\n    }\n\n    //////////////////////////////////////\n    // USE EFFECTS\n    //////////////////////////////////////\n    useEffect( () => {\n        setSelectedClusterNodesInfo([undefined, undefined]);\n    }, [state.globalCommitSeqSelectionByTemporalFilter]);\n\n    useEffect(() => {\n// console.log(\"called useEffect buildAndDrawClusterNodes\");\n// console.log(\"CHANGED USEEFFECT\", state, prevSelectedClusterNodesInfo, selectedClusterNodesInfo, props.gitAnalyzer.allNodeList.filter(d => d.mergeNodes.length > 0));\n        clusteringResult.current = props.gitAnalyzer.getOverviewClusters(\n                state.groupingParameters.threshold, state.commitSeqSelection, state.groupingParameters.preferenceWeights, \n                state.groupingParameters.keywordFilterList, state.groupingParameters.releaseBinningLevel, state.groupingParameters.useHeuristicMerge);\n        \n        buildAndDrawClusterNodes();\n    }, [\n        state.groupingParameters.useHeuristicMerge,\n        state.commitSeqSelection,\n        state.groupingParameters.threshold, \n        state.groupingParameters.nonConflictGroupingLevel, \n        state.groupingParameters.releaseBinningLevel,\n        state.groupingParameters.keywordFilterList,\n        state.groupingParameters.preferenceWeights,\n    ]);\n\n    useEffect( () => {\n        buildAndDrawClusterNodes();\n    }, [\n        state.groupingParameters.branchShowMapByType,\n    ]);\n\n    useEffect( () => {\n        highlight();\n    }, [state.highlightQuery,]);\n\n    useEffect( () => {\n        if(state.showMergeLink) {\n            d3.selectAll(\".mergedRelationLinks\")\n                .attr(\"orgVisibility\", \"visible\")\n                .style(\"visibility\", \"visible\");\n        }\n        else {\n            d3.selectAll(\".mergedRelationLinks\")\n                .attr(\"orgVisibility\", \"hidden\")\n                .style(\"visibility\", \"hidden\");\n        }\n    }, [state.showMergeLink,]);\n\n\n    return (\n        <div className=\"flexVerticalContainer\" style={{ width: overviewWidth }}>\n            <div className=\"flexContainer\">\n                <div width={layout.sliderWidth} align=\"right\">\n                    <ValueSlider\n                        name={\"clusterOverview\"}\n                        defaultStepValue={0}\n                        threshold={state.groupingParameters.threshold}\n                        changeThreshold={updateClusterThreshold}\n                        height={height}\n                        thresholdList={thresholdList}\n                        width={layout.sliderWidth} />\n                </div>\n                <div \n                    id=\"branchSummaryDiv\" \n                    style={{ position: \"relative\", zIndex: 1, float: \"left\" }} \n                    width={width} \n                    height={height}\n                    visible={\"visible\"}\n                >\n                    {/* {selectedClusterNodesInfo[0] !== undefined && selectedClusterNodesInfo[1] !== undefined  && */}\n                        <BranchSummary\n                            clusterNodes = {selectedClusterNodesInfo[1]}\n                            branchNo = {selectedClusterNodesInfo[0]}\n                            width = {groupSvgWidth.current}\n                            height = {state.layout.clusterOverviewHeight}\n                            hideFiles = {state.summaryParameters.hideFiles}\n                            summaryByLOC = {state.summaryParameters.summaryByLOC}\n                            useHeuristicMerge = {state.groupingParameters.useHeuristicMerge}\n                            branchShowMapByType = {state.groupingParameters.branchShowMapByType}\n                            gitAnalyzer = {props.gitAnalyzer}\n                        />\n                    {/* } */}\n                </div>\n                <div>\n                    <svg id=\"clusterOverviewSvg\" width={width} height={height}\n                        style={{ \"background\": \"#fafafa\", \"opacity\": \"0.95\" }}\n                    // transform={\"translate(\" + this.margin.left + \",\" + this.margin.top + \")\"}>           \n                    >\n                    </svg>\n                </div>\n            </div>\n            <div className=\"flexContainer\" style={{ width: overviewWidth, justifyContent: \"space-between\", height: \"25px\" }}>\n                <div style={{width:layout.sliderWidth + 10}}></div>\n                <div style={{width:\"100%\"}}>\n                    ({totalStat.current[0]} CLUSTERS, {totalStat.current[1]} COMMITS)\n                </div>\n                <div align=\"right\" style={{width:\"300px\", paddingTop:\"5px\", paddingRight:\"5px\"}}>\n                    {selectedClusterNodesInfo[1] !== undefined &&\n                        <Button style={{ \"fontSize\": \"11px\", \"zIndex\": 10 }} size=\"small\" variant=\"outlined\" \n                            onClick={ () => {\n                                // if (selectedClusterNodesInfo[1] === undefined) return;\n                                const maxCaptureCount = 6;\n                                if (state.capturedSummaryInfoList.length >= maxCaptureCount) {\n                                    alert(\"# of max CAPTURE is \" + maxCaptureCount);\n                                    return;\n                                }\n                                dispatch(actions.addCapturedSummaryInfoList(\n                                    [\n                                        selectedClusterNodesInfo[1],\n                                        state.groupingParameters,\n                                    ]\n                                ));\n                                console.log(\"button click\", selectedClusterNodesInfo, selectedClusterNodesInfo[1], state.capturedSummaryInfoList.concat(selectedClusterNodesInfo[1]));\n                            }}>\n                            CAPTURE SELECTION\n                        </Button>\n                    }\n\n                </div>\n            </div>\n            <div className=\"flexContainer\">\n                \n            </div>\n            {/* <ClusterToolTip\n                    cluster={overCluster}\n                /> */}\n            <div id=\"clusterToolTip\" className=\"tooltip\" style={{ visibility: \"hidden\", opacity: 0.8 }}></div>\n        </div>\n    );\n}\n\n\nexport default CommitGraph;","import * as d3 from 'd3';\nimport { ClusterBlock, ClusterNode } from \"./analyzer/GithruClasses\";\n\nexport function buildClusterNodes(gitAnalyzer, threshold, thresholdList, clusterList, branchShowMapByType) {\n    // console.log(\"clusterOverviewRender\", pref, threshold, releaseBinningLevel, gitAnalyzer, selection, keywordFilterList);\n    if (threshold === undefined) threshold = 0;\n    let clusterNodeList = [];\n    // let pointSet = new Set();\n\n    // if (!showPullRequestBranch) {\n    //     clusterList = clusterList.filter(cluster => {\n    //         if (cluster.nodeList[0].implicitBranchNo === 0 || cluster.branches.length === 0) return true;\n    //         cluster.onPullRequestBranch = cluster.branches.filter(b => b.startsWith(\"origin/pr\") === false).length > 0;\n    //         // console.log(\"onPullRequestBranch\", cluster, cluster.onPullRequestBranch)\n    //         return cluster.onPullRequestBranch;\n    //     });\n    // }\n    \n    let [startPoint, endPoint] = d3.extent(clusterList.reduce((prev, cluster) => prev.concat(cluster.nodeList), []).map(n => n.seq));\n    // let startPoint = clusterList[0].nodeList[0].seq;\n    // let endPoint = clusterList.slice(-1)[0].nodeList.slice(-1)[0].seq;\n    // let pointArrayForCheckEmptyBlock = d3.range(startPoint, endPoint + 1).map(d => false);\n    // console.log(\"nodeList = \", clusterList.map(c => c.nodeList), clusterList.reduce( (prev, cluster) => prev.concat(cluster.nodeList), []).map(n => n.seq).sort( (a, b) => a - b ));\n    let xArray = d3.range(startPoint, endPoint + 1).map(d => -1);\n    let clusterNodeMapByCluster = {};\n    let cIndex = 0;\n\n    clusterList.forEach(cluster => {\n        ////////////////////////////////\n        // FILTER branchShowMapByType\n        let branchType = gitAnalyzer.getClusterBranchType(cluster);\n        let noShowTypes = Object.entries(branchShowMapByType).filter(entry => entry[1] === false).map(e => e[0]);\n        // SKIP IF NO SHOW\n        if (noShowTypes.findIndex(t => t === branchType) >= 0) return;\n\n        ////////////////////////////////\n        // BUILD NODES\n        cluster.nodeList.forEach(n => xArray[n.seq - startPoint] = cIndex);\n        \n        let clusterNode = new ClusterNode(cluster);\n        clusterNode.branchType = branchType;\n        clusterNodeList.push(clusterNode);\n        clusterNodeMapByCluster[clusterNode.cluster.id] = clusterNode;\n        cIndex++;\n    });\n\n    // console.log(\"xArray\", xArray, startPoint, endPoint)\n    let fi, blockStartSeq = startPoint, blockIndex = 0, prevClusterIndexOfBlock = xArray[0];\n    for (fi = startPoint + 1; fi <= endPoint + 1; fi++) {\n        let currentClusterIndexOfBlock = xArray[fi - startPoint];\n        // console.log(\"looping!!\", fi - startPoint, prevClusterIndexOfBlock, currentClusterIndexOfBlock, \"blockIndex = \", blockIndex);\n\n        if (fi !== endPoint + 1 && currentClusterIndexOfBlock < 0) continue;\n        if (prevClusterIndexOfBlock === -1) prevClusterIndexOfBlock = currentClusterIndexOfBlock;\n\n        if (currentClusterIndexOfBlock !== prevClusterIndexOfBlock) {\n            // console.log(\"changed!!\", fi - startPoint, prevClusterIndexOfBlock, currentClusterIndexOfBlock, \"blockIndex = \", blockIndex);\n            // console.log(\"clusterNode?\", prevClusterIndexOfBlock, currentClusterIndexOfBlock, clusterNodeList[prevClusterIndexOfBlock])\n            // create and insert cluster node\n            let clusterNode = clusterNodeList[prevClusterIndexOfBlock];\n            let nodeList = clusterNode.cluster.nodeList.filter(n => (n.seq >= blockStartSeq && n.seq < fi));\n            let containsMergedNodes = nodeList.filter(node => node.mergeNodes.length > 0).length > 0;\n            let containsMergeTraversedNodes = nodeList.filter(node => node.isMergeTraversed).length > 0;\n            let mergedToNodeList = nodeList.filter(node => node.mergedToNode !== undefined).map(n => n.mergedToNode);\n            // console.log(\"mergedToNodeList\", nodeList, mergedToNodeList);\n            clusterNode.y = Math.min(...clusterNode.cluster.nodeList.map(d => d.implicitBranchNo));\n            clusterNode.blockList.push(new ClusterBlock(blockIndex, nodeList, blockStartSeq, fi, blockIndex, containsMergedNodes, containsMergeTraversedNodes, mergedToNodeList, clusterNode));\n            blockIndex++;\n            blockStartSeq = fi;\n        }\n        prevClusterIndexOfBlock = currentClusterIndexOfBlock;\n    }\n\nconsole.log(\"clusterNodeList Reslut\", clusterNodeList);\n\n    // compress vertical\n    clusterNodeList.sort((a, b) => (b.blockList.slice(-1)[0].x - a.blockList.slice(-1)[0].x));\n\n    let maxBlockIndex = blockIndex;\n    // let maxBlockIndex = pointList.length - 1;\n    let xMargin = 3;\n    let maxY = 1;\n    let yArray = Array.from({ length: maxBlockIndex }, d => maxBlockIndex);\n    clusterNodeList.filter(nodeList => nodeList.y !== 0).forEach(cn => {\n        if (cn.cluster.child !== undefined && clusterNodeMapByCluster[cn.cluster.child.id] !== undefined) return;\n        // if (cn.cluster.child !== undefined && (!showPullRequestBranch && cn.cluster.child.onPullRequestBranch)) return;\n        let startX = cn.blockList[0].x;\n        let endX = cn.blockList[cn.blockList.length - 1].x;\n        // let endX = Math.max(cn.blockList[cn.blockList.length - 1].x + xMargin, pointList.length - 1);\n        let y;\n        for (y = 1; y < maxY; y++) {\n            if (Math.max(0, yArray[y] - xMargin) > endX) {\n                break;\n            }\n        }\n        if (y === maxY) {\n            maxY++;\n        }\n        // yArray[y] = startX;\n\n        let endXOfClusterTree = startX;\n        let pc = cn.cluster.parent;\n        while (pc !== undefined) {\n            // there can be some cases when parent is hidden but grandparent is not... -_-\n            if (clusterNodeMapByCluster[pc.id] === undefined) {\n                pc = pc.parent;\n                continue;\n            }\n            endXOfClusterTree = clusterNodeMapByCluster[pc.id].blockList[0].x;\n            clusterNodeMapByCluster[pc.id].y = y;\n            pc = pc.parent;\n        }\n        yArray[y] = endXOfClusterTree;\n        cn.y = y;\n    });\n\n    return [clusterNodeList, maxBlockIndex, thresholdList];\n}","import React, { useState } from 'react';\nimport { useDispatch } from \"react-redux\";\nimport * as actions from '../modules';\n\n// import \"./Search.css\";\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\n// import TextField from '@material-ui/core/TextField';\n\nimport Form from 'react-bootstrap/Form';\nimport { KeywordFilter } from './analyzer/GithruClasses';\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        display: 'flex',\n        flexWrap: 'wrap',\n    },\n    textArea: {\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        marginBottom: \"8px\",\n        fontSize: \"12px\",\n        minHeight: \"50px\",\n    },\n}));\n\nconst KeywordTextAreaFilter = props => {\n    const classes = useStyles();\n    const [ includeFilterStr, setIncludeFilterStr ] = useState(\"\");\n    const [ excludeFilterStr, setExcludeFilterStr ] = useState(\"\");\n    const dispatch = useDispatch();\n\n    const parseFilterStr = (str, isIncludes) => {\n        console.log(\"parseFilterStr\", str, isIncludes, str.split(\"\\n\"))\n        return str.split(\"\\n\").map(d => d.trim()).filter(d => d !== \"\").map(line => {\n            let items = line.split(\":\");\n            if (items.length !== 2) {\n                return undefined;\n            } else {\n                return new KeywordFilter(isIncludes, items[ 0 ], items[ 1 ]);\n            }\n        });\n    }\n\n    return (\n        <div align=\"center\" className=\"flexVerticalContainer\" style={{ width: \"100%\", alignItems: \"center\" }}>\n            {/* <TextField\n                style={{ \"fontSize\": \"11px\" }} \n                id=\"standard-basic\"\n                className={classes.textField}\n                margin=\"none\"\n                size=\"small\"\n\n                defaultValue={filters}\n                onChange={(event) => {\n                    console.log(\"addFilter!!\", event.target.value);\n                    setFilters(event.target.value);\n                }}\n            /> */}\n            <form className={classes.container} noValidate autoComplete=\"on\">\n                <Form.Control\n                    className={classes.textArea} as=\"textarea\" rows=\"2\"\n                    placeholder=\"INCLUDES (a:author, f:file, t:commitType, m:message)\"\n                    onChange={(event) => {\n                        setIncludeFilterStr(event.target.value);\n                    }}\n                />\n\n                <Form.Control\n                    className={classes.textArea} as=\"textarea\" rows=\"2\"\n                    placeholder=\"EXCLUDES (a:author, f:file, t:commitType, m:message)\"\n                    onChange={(event) => {\n                        setExcludeFilterStr(event.target.value);\n                    }}\n                />\n            </form>\n            <div className=\"flexVerticalContainer\" style={{ width: \"100%\", alignItems: \"center\" }}>\n                <Button\n                    style={{ \"fontSize\": \"11px\", width: \"95%\" }} size=\"small\" variant=\"outlined\"\n                    onClick={() => {\n                        let kfList = [];\n                        kfList = kfList.concat(parseFilterStr(includeFilterStr, true));\n                        kfList = kfList.concat(parseFilterStr(excludeFilterStr, false));\n\n                        if (kfList.filter(d => d === undefined).length > 0) {\n                            alert(\"insert [dataType]:[keyword]\");\n                            return;\n                        }\n                        console.log(\"keyword filters\", kfList);\n\n                        dispatch(actions.updateKeywordFilterList(kfList));\n                    }}>\n                    FILTER IN/OUT BY KEYWORDS\n                </Button>\n            </div>\n        </div>\n    );\n}\n\nexport default KeywordTextAreaFilter;","import React, { useState, } from 'react';\nimport \"./ValueSlider.css\";\nimport Slider from '@material-ui/core/Slider';\nimport Button from '@material-ui/core/Button';\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport { PreferenceList } from './analyzer/GithruClasses';\nimport { cloneDeep } from 'lodash';\nimport { useSelector, useDispatch } from 'react-redux';\nimport * as actions from '../modules';\n\nconst useStyles = makeStyles(theme => ({\n  icon: {\n    height: 35,\n    width: 35,\n    margin: theme.spacing(0),\n    color: \"skyblue\",\n  },\n  button: {\n      height:40,\n      width:40,\n      margin: theme.spacing(0),\n      padding: 0,\n      minWidth: 40\n  },\n  div: {\n    fontSize: \"16px\",\n    fontWeight: \"bold\",\n  },\n  prefDiv: {\n    display: \"flex\",\n    fontSize: \"12px\",\n    width: \"100%\",\n    height: \"20px\",\n    padding: 0\n  },\n  prefName: {\n    // display: \"flex\",\n    fontWeight: \"bold\",\n    fontSize: \"10px\",\n    width: \"90px\",\n    textAlign: \"right\",\n    paddingRight: 10,\n    paddingTop: 5,\n    textTransform: \"uppercase\"\n  },\n  buttons: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    marginTop: \"8px\",\n    paddingLeft: \"8px\",\n    paddingRight: \"8px\"\n  }\n}));\n\nconst HorizontalSlider = withStyles({\n  root: {\n    color: \"#78909c\",\n    height: 8,\n    padding: \"10px 0px\"\n  },\n  thumb: {\n    height: \"8px\",\n    width: \"8px\",\n    marginTop: \"-3px\",\n  },\n  valueLabel: {\n    fontSize: \"10px\",\n    circle: {\n      width: \"10px\",\n      height: \"10px\",\n    }\n  },\n  // valueLabelCircle: {\n  //   width: \"10px\",\n  //   height: \"10px\",\n  // }\n  // thumb: {\n  //   height: 10,\n  //   width: 10,\n  //   backgroundColor: '#fff',\n  //   border: '2px solid currentColor',\n  //   // marginTop: -8,\n  //   // marginLeft: -12,\n  //   // '&:focus,&:hover,&$active': {\n  //   //   boxShadow: 'inherit',\n  //   // },\n  // },\n  // valueLabel: {\n  //   left: 'calc(-50% + 4px)',\n  // },\n  // track: {\n  //   height: 8,\n  //   borderRadius: 4,\n  // },\n  // rail: {\n  //   height: 8,\n  //   borderRadius: 4,\n  // },\n})(Slider);\n\nconst PreferenceSliders = props => {\n  const classes = useStyles();\n// console.log(\"??\", props.pref);\n  const preferenceWeights = useSelector(state => state.groupingParameters.preferenceWeights);\n  const [pref, setPref] = useState(preferenceWeights);\n\n  const width = useSelector(state => state.layout.leftPaneWidth);\n  const dispatch = useDispatch();\n\n// console.log(\"PrefSliders ---\", PreferenceList);\n\n  // useEffect( () => {\n  //   setPref(preferenceWeights);\n  // }, [preferenceWeights]);\n\n  // if (pref === undefined) return null;\n\n  return (\n    <div id=\"preferenceSliders\" className=\"flexVerticalContainer\" style={{ width: width, marginRight:10 }}>\n      {PreferenceList.map((prefName, i) => (\n        <div key={i} className={classes.prefDiv}>\n          <div className={classes.prefName}>\n            {prefName.startsWith(\"commit\") ? \"commit \" + prefName.split(\"commit\")[1] : prefName}\n          </div>\n          \n          <div style={{width:\"150px\"}}>\n            <HorizontalSlider\n              value={pref[prefName]}\n              min={0}\n              max={1}\n              step={0.1}\n              valueLabelDisplay=\"auto\"\n              onChangeCommitted={(event, newValue) => {\n                let newPref = cloneDeep(pref);\n                newPref[prefName] = newValue;\n                setPref(newPref);\n              }}\n              onChange={(event, newValue) => {\n                let newPref = cloneDeep(pref);\n                newPref[prefName] = newValue;\n                setPref(newPref);\n              }}\n            />\n          </div>\n        </div>\n      ))}\n      {/* <div style={{height:10}}/> */}\n      <div className={classes.buttons} >\n          <Button style={{ \"fontSize\": \"11px\", \"flex\": 1, \"marginRight\": \"8px\"}}variant=\"outlined\" size=\"small\" onClick={() => {\n              let newPref = cloneDeep(pref);\n              PreferenceList.forEach(d => newPref[d] = 1);\n              setPref(newPref);\n          }}>\n            RESET\n          </Button>\n          <Button style={{ \"fontSize\": \"11px\"}} size=\"small\" variant=\"outlined\" \n            onClick={() => dispatch(actions.updatePreferenceWeights(pref))}>\n            CHANGE PREFERENCES\n          </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default PreferenceSliders;","import React, { useState, Fragment } from 'react';\nimport * as actions from '../modules';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Checkbox } from '@material-ui/core';\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport \"./ManageParameter.css\"\nimport Form from 'react-bootstrap/Form';\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        margin: \"0px\",\n        padding: \"2px\",\n    },\n    container: {\n        display: 'flex',\n        flexWrap: 'wrap',\n    },\n    textArea: {\n        marginTop: \"8px\",\n        marginBottom: \"8px\",\n        minHeight: \"50px\",\n        fontSize: \"12px\",\n    },\n}));\n\nconst ManageParameters = (props) => {\n    const classes = useStyles();\n\n    const {\n        width,\n        releaseBinningLevel,\n        nonConflictGroupingLevel,\n        summaryByLOC,\n        hideFiles,\n        useHeuristicMerge,\n        // showPullRequestBranch,\n        showMergeLink,\n        branchShowMapByType,\n    } = useSelector(state => ({\n        width: state.layout.leftPaneWidth,\n        releaseBinningLevel: state.groupingParameters.releaseBinningLevel,\n        nonConflictGroupingLevel: state.groupingParameters.nonConflictGroupingLevel,\n        useHeuristicMerge: state.groupingParameters.useHeuristicMerge,\n        // showPullRequestBranch: state.groupingParameters.showPullRequestBranch,\n        branchShowMapByType: state.groupingParameters.branchShowMapByType,\n        summaryByLOC: state.summaryParameters.summaryByLOC,\n        hideFiles: state.summaryParameters.hideFiles,\n        showMergeLink: state.showMergeLink,\n    }));\n\n    // console.log(\"hidefile\", hideFiles)\n    const [ hideFilesStr, setHideFilesStr ] = useState(hideFiles.join(\"\\n\"));\n    const dispatch = useDispatch();\n\n    const parseFilterStr = (str, isIncludes) => {\n        // console.log(\"parseFilterStr\", str, isIncludes, str.split(\"\\n\"))\n        return str.split(\"\\n\").map(d => d.trim()).filter(d => d !== \"\");\n    }\n\n    const defaultHideFilesValue = \"CHANGELOG.md\\nversion.txt\"\n\n    return (\n        <div className=\"flexVerticalContainer\">\n\n            {/* <SectionTitle title=\"\" /> */}\n            {/* <div style={{ fontSize: \"12px\" }}>\n                <Checkbox\n                    className={classes.root}\n                    size=\"small\"\n                    color=\"default\"\n                    checked={(!showPullRequestBranch)}\n                    onChange={() => {\n                        dispatch(actions.updateShowPullRequestBranch(!showPullRequestBranch));\n                    }}\n                />\n                Hide Pull Request Branches\n            </div> */}\n            <SectionTitle title=\"BRANCH TYPE FILTER\" />\n            <div className=\"parameter-body\">\n                {[\"EXPLICIT\", \"IMPLICIT\", \"PR_OPEN\", ].map( (type, i) => {\n                    let bool = branchShowMapByType[type];\n                    return (<Fragment key={i}>\n                        <Checkbox\n                            className={classes.root}\n                            size=\"small\"\n                            color=\"default\"\n                            checked={bool}\n                            onChange={() => {\n                                dispatch(actions.updateBranchShowMapByType([type, !bool]));\n                            }}\n                        />{type}\n                    </Fragment>);\n                })}\n            </div>\n            <div className=\"parameter-body\">\n                {[\"PR_MERGED\", \"PR_CLOSED\"].map( (type, i) => {\n                    let bool = branchShowMapByType[type];\n                    return (<Fragment key={i}>\n                        <Checkbox\n                            className={classes.root}\n                            size=\"small\"\n                            color=\"default\"\n                            checked={bool}\n                            onChange={() => {\n                                dispatch(actions.updateBranchShowMapByType([type, !bool]));\n                            }}\n                        />{type}\n                    </Fragment>);\n                })}\n            </div>\n            <SectionTitle title=\"CLUSTERING\" />\n            <div className=\"parameter-body\">\n                <Checkbox\n                    className={classes.root}\n                    size=\"small\"\n                    color=\"default\"\n                    checked={(useHeuristicMerge)}\n                    onChange={() => {\n                        dispatch(actions.updateUseHeuristicMerge(!useHeuristicMerge));\n                    }}\n                />\n                Apply CONTEXTUAL squash MERGE\n            </div>\n            <div style={{\n                marginLeft: \"17px\",\n                fontSize: \"12px\",\n                display: (!useHeuristicMerge ? \"\" : \"none\")\n            }}>\n                <Checkbox\n                    className={classes.root}\n                    size=\"small\"\n                    color=\"default\"\n                    checked={(!showMergeLink)}\n                    onChange={() => {\n                        dispatch(actions.updateShowMergeLink(!showMergeLink));\n                    }}\n                />\n                    Hide CONTEXTUAL squash MERGE Edges\n            </div>\n            <div className=\"parameter-body\">\n                <Checkbox\n                    className={classes.root}\n                    size=\"small\"\n                    color=\"default\"\n                    checked={(nonConflictGroupingLevel > 0)}\n                    onChange={() => {\n                        let val = (nonConflictGroupingLevel > 0 ? 0 : 1);\n                        dispatch(actions.updateNonConflictGroupingLevel(val));\n                    }}\n                />\n                Non-Conflict Clustering\n            </div>\n            <div className=\"parameter-body\">\n                <Checkbox\n                    className={classes.root}\n                    size=\"small\"\n                    color=\"default\"\n                    checked={(releaseBinningLevel === 1)}\n                    onChange={() => {\n                        let val = (releaseBinningLevel === 1 ? 0 : 1);\n                        dispatch(actions.updateReleaseBinningLevel(val));\n                    }}\n                />\n                CUT at RELEASE\n            </div>\n            <div className=\"parameter-body\">\n                <Checkbox\n                    className={classes.root}\n                    size=\"small\"\n                    color=\"default\"\n                    checked={(releaseBinningLevel === 2)}\n                    onChange={() => {\n                        let val = (releaseBinningLevel === 2 ? 0 : 2);\n                        dispatch(actions.updateReleaseBinningLevel(val));\n                    }}\n                />\n                CUT at MAJOR RELEASE\n            </div>\n            <div className=\"parameter-body\" align=\"right\">\n                <span\n                    style={{ \"fontSize\": \"11px\", width: \"100%\", textDecoration: \"underline\", cursor:\"pointer\" }}\n                    onClick={() => {\n                        dispatch(actions.updateUseHeuristicMerge(false));\n                        [\"EXPLICIT\", \"IMPLICIT\", \"PR_OPEN\", \"PR_MERGED\", \"PR_CLOSED\"].map( type => dispatch(actions.updateBranchShowMapByType([type, true])));\n                    }}>\n                    SHOW ALL BRANCHES/NODES\n                </span>\n            </div>\n            {/* <div style={{ height: \"20px\" }}></div> */}\n            <SectionTitle title={\"SUMMARY\"} />\n            <div className=\"parameter-body\">\n                <Checkbox\n                    className={classes.root}\n                    size=\"small\"\n                    color=\"default\"\n                    checked={(summaryByLOC)}\n                    onChange={() => {\n                        console.log(\"summaryByLOC\", summaryByLOC);\n                        dispatch(actions.updateSummaryByLOC(!summaryByLOC));\n                    }}\n                />\n                Summary by CLOC\n            </div>\n            <div className=\"flexVerticalContainer\" style={{\n                fontSize: \"12px\",\n                paddingLeft: \"8px\",\n                paddingRight: \"8px\"\n            }}>\n                <form className={classes.container} noValidate autoComplete=\"on\">\n                    <Form.Control\n                        className={classes.textArea}\n                        as=\"textarea\" rows=\"2\"\n                        placeholder=\"INSERT FILE NAMES\"\n                        defaultValue={hideFilesStr}\n                        onChange={(event) => {\n                            setHideFilesStr(event.target.value);\n                        }}\n                    />\n                </form>\n                <div style={{ width: \"100%\", alignItems: \"center\" }}>\n                    <Button\n                        style={{ \"fontSize\": \"11px\", width: \"100%\" }} size=\"small\" variant=\"outlined\"\n                        onClick={() => {\n                            let fList = hideFilesStr.split(\"\\n\").map(d => d.trim()).filter(d => d !== \"\");\n                            console.log(\"hide files\", fList);\n                            dispatch(actions.updateHideFiles(fList));\n                        }}>\n                        Hide files on Summary\n                    </Button>\n                </div>\n            </div>\n        </div >\n    );\n}\n\nexport default ManageParameters;\n\nconst SubTitle = (props) => {\n    return <div style={{\n        fontSize: '13px',\n        fontWeight: '500',\n        marginTop: \"5px\",\n        fontWeight: \"600\",\n        fontSize: \"0.75rem\"\n    }}>{props.title}</div>\n}\n\nconst SectionTitle = (props) => {\n    return <div style={{\n        fontWeight: \"500\",\n        // fontSize: \"0.86rem\",\n        borderBottom: \"1px solid #ccc\",\n        paddingLeft: \"3px\",\n        paddingBottom: \"1px\",\n        marginBottom: \"4px\",\n        marginTop: \"4px\"\n    }}>{props.title}</div>\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport GitAnalyzer from './analyzer/GitAnalyzer';\nimport { Table, TableRow, TableCell, TableBody, Button } from '@material-ui/core';\nimport * as d3 from 'd3';\nimport { useSelector, useDispatch } from 'react-redux';\nimport * as actions from '../modules';\nimport { AttributeColors } from './ColorClasses';\nimport './InformationFragments.css';\nimport { DataTypeByNameMap } from './analyzer/GithruClasses';\n\nconst useStyles = makeStyles(theme => ({\n    table: {\n        padding: 1,\n    },\n    tableCell: {\n        fontSize: \"12px\",\n        paddingLeft: 2,\n        paddingRight: 1,\n        paddingTop: 1,\n        paddingBottom: 1,\n        maxHeight: \"20px\",\n        // verticalAlign: \"text-top\",\n        // minWidth: \"40px\"\n    },\n    favorites: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        maxWidth: \"100%\",\n        overflowY: \"auto\",\n        // maxHeight: \"300px\",\n        width: \"100%\",\n        // minHeight: \"300px\",\n        padding: 2,\n    },\n    history: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        // maxHeight: \"450px\",\n        maxWidth: \"100%\",\n        width: \"100%\",\n        overflowY: \"auto\",\n    },\n}));\n\nconst InformationFragments = (props) => {\n    const classes = useStyles();\n    const { width } = props;\n    const buttonWidth = 15;\n\n    const dispatch = useDispatch();\n    const { fragmentHistory, favoriteFragments, currentCapturedSummaryInfoId } = useSelector(state => state);\n    const addFavoriteFragment = (f) => dispatch(actions.registerFavoriteFragment(f));\n    const removeFavoriteFragment = (f) => dispatch(actions.unregisterFavoriteFragment(f));\n    const clearFragment = () => dispatch(actions.clearFragments());\n\n    const addInterestsItems = (fragments) => {\n        dispatch(actions.addItemsToCapturedSummaryInfo(fragments));\n        // console.log(\"updated?\", capturedSummaryInfoList, fragments)\n    };\n\n\n    // console.log(classes.favorites, favoriteFragments, props);\n    return (\n        <div className=\"flexVerticalContainer\">\n            {\n                (favoriteFragments.length > 0 || fragmentHistory.length > 0) ? <>\n\n                    <div className=\"fragment-list\">\n                        {\n                            favoriteFragments.map((item, i) => {\n        console.log(\"-----\", item, DataTypeByNameMap[item[0]], AttributeColors[ DataTypeByNameMap[item[0]] ]);\n        \n                                return <div className=\"fragment-row\" key={i}>\n                                    <div className=\"fragment-cell-title\" cursor=\"pointer\">\n                                        <span\n                                        style={{\n                                            color: AttributeColors[ DataTypeByNameMap[item[0]] ][ 0 ],\n                                            fontSize: \"10px\",\n                                            overflow: \"hidden\",\n                                            fontWeight: \"bold\",\n                                        }}\n                                        onMouseOver={(event) => event.target.style.color = \"red\"}\n                                        onMouseOut={(event) => event.target.style.color = AttributeColors[ DataTypeByNameMap[item[0]] ][ 0 ]}\n                                        onClick={() => addInterestsItems([ item ], currentCapturedSummaryInfoId)}\n                                    >{GitAnalyzer.getTextValue(item[ 0 ], item[ 1 ])}</span>\n                                    </div>\n                                    <div className=\"fragment-cell-pin\"\n                                        cursor=\"pointer\"\n                                        onClick={() => removeFavoriteFragment(item)}>\n                                        <svg\n                                            x=\"0px\" y=\"0px\" viewBox=\"0 0 476.258 476.258\"\n                                            width=\"15px\" height=\"15px\"\n                                            fill=\"black\" stroke=\"#000000\" strokeWidth=\"0\">\n                                            <path d=\"M476.235,119.133L357.158,0L206.936,134.654c-19.906-7.082-39.446-10.666-58.205-10.666 c-31.648,0-58.709,10.364-78.259,29.972l-10.574,10.607l115.305,115.298L0.023,455.045l21.213,21.213l175.18-175.181 l115.325,115.318l10.606-10.614c16.936-16.948,27.105-39.913,29.41-66.414c1.905-21.911-1.6-45.947-10.156-70.022L476.235,119.133z M434.942,120.257L323.736,244.33l-91.784-91.811L356.025,41.303L434.942,120.257z M310.52,372.75L103.519,165.76 c12.401-7.74,27.764-11.773,45.212-11.773c16.56,0,34.831,3.715,53.014,10.748l109.781,109.813 C326.418,312.819,325.869,348.207,310.52,372.75z\"></path>\n                                        </svg>\n                                    </div>\n                                </div>\n                            })\n                        }\n                    </div>\n                    {favoriteFragments.length > 0 ? <>\n                        <div>\n                            <Button \n                                style={{ \"fontSize\": \"11px\", \"zIndex\": 10, width: \"100%\", marginBottom: \"12px\", background: \"white\" }} \n                                size=\"small\" \n                                variant=\"outlined\"\n                                // className=\"control-button\" \n                                size=\"small\" variant=\"outlined\" \n                                onClick={() => addInterestsItems(favoriteFragments)}>\n                                    INSPECT ALL PINS\n                            </Button>\n                        </div>\n                    </> : \"\"}\n                    {/* <div className=\"flexContainer\" style={{ justifyContent: \"space-between\", marginBottom: \"12px\" }}>\n                        <Button className=\"control-button\" size=\"small\" variant=\"outlined\" onClick={() => addInterestsItems(favoriteFragments)}>\n                            SELECT ALL PINS\n                        </Button>\n                    </div> */}\n                    <div className=\"fragment-list\">\n                        {\n                            fragmentHistory.map((item, i) => {\n                                let isPinned = (favoriteFragments.findIndex(d => d[ 0 ] === item[ 0 ] && d[ 1 ] === item[ 1 ]) >= 0);\n        console.log(\"-----\", item, AttributeColors[ DataTypeByNameMap[item[0]] ]);\n                                return (\n                                    <div className=\"fragment-row\" \n                                        key={i}\n                                        onMouseOver={() => d3.select(\"#fragmentPin\" + i).style(\"visibility\", \"visible\")}\n                                        onMouseOut={() => d3.select(\"#fragmentPin\" + i).style(\"visibility\", \"hidden\")}\n                                    >\n                                        <div className=\"fragment-cell-title\" cursor=\"pointer\">\n                                            <span\n                                                style={{\n                                                    color: AttributeColors[ DataTypeByNameMap[item[0]] ][ 0 ],\n                                                    fontSize: \"10px\",\n                                                    overflow: \"hidden\",\n                                                    fontWeight: (isPinned ? \"bold\" : \"\"),\n                                                }}\n                                                onMouseOver={(event) => event.target.style.color = \"red\"}\n                                                onMouseOut={(event) => event.target.style.color = AttributeColors[ DataTypeByNameMap[item[0]] ][ 0 ]}\n                                                onClick={() => { console.log(\"HERE???\"); addInterestsItems([ item ]) }}\n                                            >\n                                                {/* {GitAnalyzer.getTextValue(item[ 0 ], item[ 1 ]).replace(/\\//g, '/ ')} */}\n                                                {GitAnalyzer.getTextValue(item[ 0 ], item[ 1 ])}\n                                            </span>\n                                        </div>\n                                        <div className=\"fragment-cell-pin\"\n                                            id={\"fragmentPin\"+i}\n                                            cursor=\"pointer\"\n                                            style={{visibility:\"hidden\"}}\n                                            onClick={() => addFavoriteFragment(item)}>\n                                            <svg\n                                                x=\"0px\" y=\"0px\" viewBox=\"0 0 476.258 476.258\"\n                                                width=\"12px\" height=\"12px\"\n                                                fill=\"black\" stroke=\"#000000\" strokeWidth=\"0\">\n                                                <path d=\"M476.235,119.133L357.158,0L206.936,134.654c-19.906-7.082-39.446-10.666-58.205-10.666 c-31.648,0-58.709,10.364-78.259,29.972l-10.574,10.607l115.305,115.298L0.023,455.045l21.213,21.213l175.18-175.181 l115.325,115.318l10.606-10.614c16.936-16.948,27.105-39.913,29.41-66.414c1.905-21.911-1.6-45.947-10.156-70.022L476.235,119.133z M434.942,120.257L323.736,244.33l-91.784-91.811L356.025,41.303L434.942,120.257z M310.52,372.75L103.519,165.76 c12.401-7.74,27.764-11.773,45.212-11.773c16.56,0,34.831,3.715,53.014,10.748l109.781,109.813 C326.418,312.819,325.869,348.207,310.52,372.75z\"></path>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                );\n                            })\n                        }\n                    </div>\n                    <div>\n                    {/* style={{ justifyContent: \"space-between\", marginBottom: \"12px\" }}> */}\n                        <Button \n                            style={{ \"fontSize\": \"11px\", \"zIndex\": 10, width: \"100%\", background: \"white\" }} \n                            size=\"small\" \n                            variant=\"outlined\"\n                            // className=\"control-button\" \n                            size=\"small\" variant=\"outlined\" onClick={clearFragment}>\n                            CLEAR FRAGMENTS\n                        </Button>\n                    </div>\n                </> : <div style={{ color: 'white' }}>Select information fragments</div>\n            }\n        </div>\n    );\n}\n\nexport default InformationFragments;","import React, { useState } from 'react';\nimport './SidePanelContentUnit.css';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\n\nexport const SidePanelContentUnit = (props) => {\n    const [show, setShow] = useState( (props.show !== undefined ? props.show : true) );\n\n    return (\n        <div style={props.style}>\n            <div className=\"sidepanel-container-header flexContainer\">\n                <div>{props.title}</div>\n                <div\n                    style={{cursor:\"pointer\"}}\n                    onClick={ () => setShow(!show)}\n                >{show ? <RemoveIcon fontSize=\"small\"/>\n                 : <AddIcon fontSize=\"small\" />}</div>\n            </div>\n            <div className=\"sidepanel-container-content\">\n                {show ? props.children : \"\"}\n            </div>\n        </div>\n    );\n}","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport { useSelector, useDispatch } from 'react-redux';\nimport * as d3 from 'd3';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport * as actions from '../modules';\nimport GitAnalyzer from './analyzer/GitAnalyzer';\nimport { Table, TableRow, TableCell, TableBody, Checkbox, Button } from '@material-ui/core';\nimport { SidePanelContentUnit } from './container/SidePanelContentUnit';\nimport './CaptureTab.css';\nimport { changeRGBColorByOpacity } from './ColorClasses';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        margin: \"0px\",\n        padding: \"2px\",\n    },\n    table: {\n        padding: 1,\n    },\n    tableCell: {\n        fontSize: \"12px\",\n        paddingLeft: 2,\n        paddingRight: 1,\n        paddingTop: 1,\n        paddingBottom: 1,\n        // maxHeight: \"20px\",\n        // verticalAlign: \"text-top\",\n        // minWidth: \"40px\"\n    },\n}));\n\nconst CaptureTab = (props) => {\n    const classes = useStyles();\n    const { capturedSummaryInfoList, scrollToRight } = useSelector(state => state);\n    const [ checkedDic, setCheckedDic ] = useState({});\n    const dispatch = useDispatch();\n\n    // setCheckedListForCompare()\n    // console.log(\"captureTab render\", capturedSummaryInfoList, checkedDic);\n\n    return (<SidePanelContentUnit title=\"Captured Cluster(s)\" style={{ background: \"#7a7c90\" }}>\n        <div\n            id=\"captureTabDiv\"\n            className=\"flexVerticalContainer\"\n            style={{\n                // width: props.width + \"px\",\n                width: \"100%\",\n                fontSize: \"12px\",\n                height: props.height,\n            }}\n        >\n            {(capturedSummaryInfoList.length > 0 ? \n                <>\n                {capturedSummaryInfoList.map( (capturedInfo, i) => {\n                    let { id, clusterNodes, groupingParameters } = capturedInfo;\n\n                    const firstCommit = clusterNodes[ 0 ].cluster.nodeList[ 0 ].commit;\n                    const endCommit = clusterNodes.slice(-1)[ 0 ].cluster.nodeList.slice(-1)[ 0 ].commit;\n\n                    const getCommitName = (commit) => {\n                        if (commit.tags !== undefined && commit.tags.length > 0) return commit.tags[0];\n                        if (commit.branches !== undefined && commit.branches.length > 0) \n                            return (commit.branches[0].startsWith(\"origin/\") ? commit.branches[0].split(\"origin/\")[1] : commit.branches[0]);\n                        return \"#\" + commit.id.substring(0, 6);\n                    };\n\n                    return <div className=\"element\" key={id}>\n                        <div className=\"left-strip\" style={{\n                            background: changeRGBColorByOpacity(clusterNodes[ 0 ].color, 0.4),\n                        }}>\n                            <div>#{id}</div>\n                            <Checkbox\n                                id={\"capCheckBox\" + id}\n                                className={classes.root}\n                                size=\"small\"\n                                color=\"default\"\n                                onChange={(event) => {\n                                    let n = { ...checkedDic };\n                                    n[ id ] = event.target.checked;\n                                    setCheckedDic(n);\n                                }}\n                            />\n                        </div>\n\n                        <div className=\"content\" style={{ cursor: \"pointer\" }} onClick={() => {\n                            dispatch(actions.updateCurrentCapturedSummaryInfoId(id));\n                            d3.selectAll(\".detailTabPanel\").style(\"display\", \"none\");\n                            d3.select(\"#detailTabPanel\" + id).style(\"display\", \"\");\n                            d3.select(\"#comparePane\").style(\"display\", \"none\");\n\n                            dispatch(actions.updateScrollToRight(true));\n                            window.scrollTo(4000, 0);\n                        }}>\n                            <div className=\"element-header\">\n                                <div className='element-branch-name'>\n                                    {GitAnalyzer.getBranchNamesFromBranchClusterNodes(clusterNodes)[ 0 ]}\n                                </div>\n\n                                <DeleteIcon\n                                    size=\"small\"\n                                    color=\"action\"\n                                    className=\"element-remove-button\"\n                                    onClick={() => {\n                                        let n = { ...checkedDic };\n                                        delete n[ id ];\n                                        setCheckedDic(n);\n                                        dispatch(actions.removeCapturedSummaryInfoList(i));\n                                    }}\n                                />\n                            </div>\n\n                            <div className=\"element-body\">\n                                <div style={{ width: \"100%\", fontSize: \"8px\" }}>\n                                    {GitAnalyzer.trimYYYYMMDD(firstCommit.date).substring(2, 11)} ~ {GitAnalyzer.trimYYYYMMDD(endCommit.date).substring(2, 11)}\n                                    <br />({getCommitName(firstCommit)}) ~ ({getCommitName(endCommit)})\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                })}\n                </>\n                : <div style={{ color: 'white' }}>Select cluster(s) for capture</div>\n            )}\n        </div>\n        <div>\n            <Button \n                style={{ \"fontSize\": \"11px\", \"zIndex\": 10, width: \"100%\", background: \"white\" }} \n                size=\"small\" \n                variant=\"outlined\"\n                disabled={capturedSummaryInfoList.length < 2}\n                onClick={() => {\n                    let checkedList = Object.entries(checkedDic).filter(d => d[ 1 ]).map(d => d[ 0 ]);\n                    if (checkedList.length !== 2) {\n                        alert(\"CHOOSE 2 SUMMARIES!\");\n                        return;\n                    }\n                    let cList = checkedList.map(index => capturedSummaryInfoList[ capturedSummaryInfoList.findIndex(fi => fi.id === +index) ]);\n                    console.log(\"cList\", cList);\n                    dispatch(actions.updateCapturedSummaryInfoListForCompare(cList));\n\n                    d3.select(\"#comparePane\").style(\"display\", \"\");\n                    d3.selectAll(\".detailTabPanel\").style(\"display\", \"none\");\n\n                    // window.scrollTo(4000, 0);\n                }}>\n                COMPARE\n            </Button>\n        </div>\n\n    </SidePanelContentUnit>\n    );\n}\n\nexport default CaptureTab;","import React, { useEffect } from 'react';\nimport \"./UserInterests.css\";\nimport GitAnalyzer from \"./analyzer/GitAnalyzer\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport {DataTypeByNameMap} from \"./analyzer/GithruClasses\";\nimport * as d3 from 'd3';\nimport CheckIcon from '@material-ui/icons/Check';\nimport { AttributeColors, changeRGBColorByOpacity } from './ColorClasses';\n\nfunction ShowCheckBox(props) {\n    if (props.bool === true) return (<CheckIcon />);\n    else return \"\";\n}\n\nconst UserInterests = props => {\n    const { clusterColor, index, interestedItemList, checkSvgWidth, itemNameWidth, detailNodeEdgeWidthRatio, clusters, width, itemHeight, keywords } = props;\nconsole.log(\"UserInterests Render ----\", props, clusters, );\n\n    const buttonWidth = 15;\n\n    function findInterestItemInCluster(item, cluster) {\nconsole.log(\"findInterestItemInCluster\", cluster.nodeList, item[1].split(\" \"), DataTypeByNameMap[item[0]] );\n        return GitAnalyzer.searchByKeywords(cluster.nodeList, item[1].split(\" \"), DataTypeByNameMap[item[0]]).length > 0;\n    }\n\n    useEffect( () => {\n        let defaultClass = \"attrHeadText\";\n        d3.selectAll(\".interestKeyword\").nodes().map(d => d3.select(d)).forEach( n => {\n            if (props.keywords.filter(keyword => n.text().toLowerCase().indexOf(keyword) >= 0).length > 0)\n                n.attr(\"class\", defaultClass + \" matchedText\");\n            else\n                n.attr(\"class\", defaultClass);\n        });\n    }, [props.keywords]);\n\n    const xScale = d3.scaleBand().domain(d3.range(clusters.length)).range([0, checkSvgWidth])\n        .paddingInner(detailNodeEdgeWidthRatio).paddingOuter(detailNodeEdgeWidthRatio / 2);\n\n    let counts = clusters.map(d => 0);\nconsole.log(\"----interestedItemList\", interestedItemList);\n    return (\n        <div id={\"interestsDiv\" + index} className=\"flexVerticalContainer\">\n            {interestedItemList.map((item, ki) => (\n                <div key={ki} className=\"flexContainer\"\n                    style={{borderBottom:\"1px solid #AAAAAA\"}}>\n                    <div key={ki} \n                        style={{ \n                            width: itemNameWidth, \n                            font: \"14px bold\",\n                            textAlign: \"right\",\n                            height: \"19px\",\n                            overflow: \"hidden\",\n                            display: \"flex\"\n                        }}>\n                        <div width=\"10\">\n                            <svg width={buttonWidth} height=\"100%\">\n                                <text x=\"1\" y=\"96%\" textAnchor=\"center\" \n                                    onClick={() => props.removeInterestsItem(ki)}\n                                    cursor=\"pointer\" style={{fontSize:\"14px\"}}>\n                                    x\n                                </text>                           \n                            </svg>\n                        </div>\n                        <div>\n                            <svg width={(itemNameWidth - buttonWidth)+\"px\"} height=\"100%\" style={{marginLeft: \"2px\", marginRight: \"2px\"}}>\n                                <text\n                                    className=\"interestKeyword\"\n                                    x=\"97%\"\n                                    y=\"90%\"\n                                    style={{\n                                        font:\"12px bold\",\n                                        fill: AttributeColors[ DataTypeByNameMap[item[0]] ][ 0 ],\n                                    }}\n                                    textAnchor=\"end\"\n                                >{GitAnalyzer.getTextValue(item[0], item[1])}</text>\n                            </svg>\n                        </div>\n                    </div>\n                    {clusters.map((cluster, ci) => {\n                        // find item in cluster\n                        let found = findInterestItemInCluster(item, cluster);\n                        if (found) counts[ci] += 1;\n                        let colWidth = (checkSvgWidth) / counts.length;\n                        return (\n                            <svg key={ci}\n                                align=\"center\"\n                                style={{\n                                    width: colWidth,\n                                    fontSize: \"11px\",\n                                    height: itemHeight,\n                                    // marginBottom: \"0px\"\n                                    \n                                }}\n                                >\n                                <rect\n                                    style={{\n                                        x: xScale(0),\n                                        // x: xScale(ci),\n                                        y: 0,\n                                        width: xScale.bandwidth(),\n                                        height: itemHeight,\n                                        fill: (found ? changeRGBColorByOpacity(clusterColor, 0.4) : \"\"),\n                                        // fill: (found ? clusterColor : \"\"),\n                                        strokeWidth: 0,\n                                    }}\n                                />\n                                <ShowCheckBox bool={found} />\n                            </svg>\n                        );\n                    })}\n                </div>\n            ))}\n            <div className=\"flexContainer\">\n                <div style={{width: itemNameWidth, textAlign:\"right\"}}><i>(Hits!)</i></div>\n                {counts.map((d, ci) => (\n                    <div key={ci}\n                        align=\"center\"\n                        style={{\n                            // width: (width - itemNameWidth) / counts.length,\n                            width: (checkSvgWidth) / counts.length,\n                            fontSize: \"11px\",\n                            height: itemHeight,\n                        }}\n                    >\n                        {d}\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}\n\nexport default UserInterests;","export const AttributeIconSpecs = {\n    \"authors\": 'person',\n    \"keywords\": 'insert_comment',\n    \"commitTypes\": 'label',\n    \"clocByFiles\": 'insert_drive_file',\n    \"touchCountByFiles\": 'insert_drive_file',\n    \"clocByDirs\": 'folder',\n    \"touchCountByDirs\": 'folder',\n}","import React, { useState, useEffect, useRef } from 'react';\nimport \"./Detail.css\";\nimport ValueSlider from \"./ValueSlider\";\nimport * as d3 from 'd3';\nimport { ClusterData, DataTypeByNameMap } from \"./analyzer/GithruClasses\";\nimport { intersection } from \"lodash\";\nimport { AttributeColors } from \"./ColorClasses\";\nimport UserInterests from \"./UserIntererests\";\nimport GitAnalyzer from \"./analyzer/GitAnalyzer\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as actions from '../modules';\nimport Icon from '@material-ui/core/Icon';\nimport { AttributeIconSpecs } from './LegendIcons';\nimport NodeDetailList from \"./NodeDetailList\";\nimport { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst Detail = (props) => {\n    const searchResultList = [];\n    const state = useSelector(state => state);\n    const { capturedSummaryInfoId, gitAnalyzer, width, seq, } = props;\nconsole.log(\"detail state\", capturedSummaryInfoId, state, state.capturedSummaryInfoList.filter(d => d.id === 1)[0], props);\nconst capturedSummaryInfo = useSelector(state => state.capturedSummaryInfoList.filter(d => d.id === capturedSummaryInfoId)[0]);\n    const { clusterNodes, groupingParameters } = capturedSummaryInfo;\n\n    const detailStatDataNames = [\n        \"authors\",\n        \"keywords\",\n        \"commitTypes\",\n        \"clocByFiles\",\n        //insertionByFiles:\"file\",\n        //deletionByFiles:\"file\",\n        \"touchCountByFiles\",\n        \"clocByDirs\",\n        \"touchCountByDirs\",\n    ];\n    const initRef = useRef(false);\n    const sliderWidth = state.layout.clusterOverviewSliderWidth;\n    const itemNameWidth = 200;\n    const detailNodesHeight = 60;\n    const statHeight = 20;\n    const showTopCount = 5;\n    const detailNodeEdgeWidthRatio = 0.2;\n    const clusterColor = clusterNodes.slice(-1)[0].color;\n    const nodeList = clusterNodes.reduce( (prev, d) => prev.concat(d.cluster.nodeList), []);\n    // const [clusterNodes, setClusterNodes] = useState(clusterNodes);\n    const [newTh, thresholdList, firstClusterNodes] = gitAnalyzer.getClusters(groupingParameters.threshold, nodeList, \n        groupingParameters.preferenceWeights, groupingParameters.keywordFilterList, groupingParameters.releaseBinningLevel, groupingParameters.useHeuristicMerge);\n    const [threshold, setThreshold] = useState(groupingParameters.threshold);\n    const [currentClusters, setCurrentClusters] = useState(clusterNodes.map(d=>d.cluster));\n    // const [xScale, setXScale] = useState(undefined);\n    const suffix = \"-\" + seq;\n\n    const dispatch = useDispatch();\n    const addInterestsItems = (fragments) => {\n        dispatch(actions.addItemsToCapturedSummaryInfo(fragments));\n    }\n    const addFragmentHistory = (fragment) => dispatch(actions.addFragmentHistory(fragment));\n    const removeInterestsItem = (index) => dispatch(actions.removeItemFromCaptureSummaryInfo(index));\n    const fragmentClick = (values) => {\n        let [dataName, d] = values;\nconsole.log(\"fragmentClick\", dataName, d);\n        if (capturedSummaryInfo.interestedItemList.findIndex(item => item[0] === dataName && item[1] === d) < 0) {\n            addInterestsItems([[dataName, d]]);\n            addFragmentHistory([dataName, d]);\n        }\n    }\n\n    // visibility, left, top, nodeList, useHeuristicMerge\n    const [showCommitListInfo, setShowCommitListInfo] = useState([\"hidden\", 0, 0, [], false]);\n    const showCommitListWidth = 700;\n    const closeShowCommitListInfo = () => setShowCommitListInfo([\"hidden\", 0, 0, [], false]);\n\n\n    useEffect( () => {\n        let newClusters;\n        if (initRef.current === false) {\n            newClusters = firstClusterNodes;\n            initRef.current = true;\n        } else {\n            newClusters = gitAnalyzer.getClusters(threshold, nodeList, \n                    groupingParameters.preferenceWeights, groupingParameters.keywordFilterList, \n                    groupingParameters.releaseBinningLevel, groupingParameters.useHeuristicMerge)[2];\n        }\nconsole.log(\"???????\", groupingParameters);\n        detailNodeRender(newClusters, groupingParameters.useHeuristicMerge);\n        setCurrentClusters(newClusters);\n\n        closeShowCommitListInfo();\n    }, [threshold]);\n    \n\n    function detailNodeRender(clusters, useHeuristicMerge) {\n        if (clusters === undefined || clusters.length === 0) return;\n        \n        d3.select(\"#detailNodeSvg\" + suffix).select(\"g\").remove();\n        let detailNodeSvg = d3.select(\"#detailNodeSvg\" + suffix).append(\"g\");\n\n        detailNodeSvg.append(\"rect\")\n            .attr(\"x\", itemNameWidth + 1)\n            .attr(\"y\", 0)\n            .attr(\"width\", width - sliderWidth - itemNameWidth - 1)\n            .attr(\"height\", detailNodesHeight)\n            .style(\"stroke-width\", 2)\n            .style(\"stroke\", clusterColor);\n        ;\n\n        let detailNode = detailNodeSvg.selectAll(\"g\")\n            .data(clusters)\n            .enter();\n        let xScale = d3.scaleBand().domain(d3.range(clusters.length)).range([itemNameWidth, width - sliderWidth])\n            .paddingInner(detailNodeEdgeWidthRatio).paddingOuter(detailNodeEdgeWidthRatio / 2);\n\n        detailNode.append(\"g\")\n            .append(\"rect\")\n            .attr(\"x\", (d, i) => xScale(i))\n            .attr(\"y\", 5)\n            .attr(\"width\", xScale.bandwidth())\n            .attr(\"height\", detailNodesHeight - 10)\n            .attr(\"class\", \"detailNode\")\n            .style(\"stroke-width\", d => {\n                if (intersection(d.nodeList, searchResultList).length > 0) return \"2\";\n                else return \"0\";\n            })\n            .style(\"stroke\", d => {\n                if (intersection(d.nodeList, searchResultList).length > 0) return \"red\";\n                else return d3.schemeCategory10[d.nodeList[0].implicitBranchNo % 10];\n            })\n            .style(\"fill\", clusterColor)\n            .style(\"fill-opacity\", 0.3)\n            .on(\"click\", d => {\nconsole.log(\"??22??\", d, useHeuristicMerge);\n                let pageX = d3.event.pageX;\n                if (d3.event.pageX + showCommitListWidth > state.layout.screenWidth) {\n                    pageX = state.layout.screenWidth - showCommitListWidth;\n                }\n                setShowCommitListInfo([\n                    \"visible\", \n                    pageX + \"px\", \n                    (d3.event.pageY + 10) + \"px\", \n                    d.nodeList,\n                    useHeuristicMerge]\n                );\n            })\n            // .on(\"click\", d => this.props.onClusterSummary(d));\n        ;\n\n        detailNode.append(\"g\")\n            .append(\"text\")\n            .attr(\"class\", \"detailValues\")\n            .attr(\"x\", (d, i) => xScale(i) + xScale.bandwidth() - 1)\n            .attr(\"y\", detailNodesHeight - 7)\n            .attr(\"text-anchor\", \"end\")\n            // .text(d => \"ⓒx\" + d.nodeList.length);\n            .text(d => d.nodeList.length)// + (dataName.startsWith(\"cloc\") ? \"L\" : \"\"))\n        ;\n\n        let nodeLine = detailNodeSvg.selectAll(\"g .nodeLine\")\n            .data(clusters.slice(0, -1))\n            .enter()\n            .append(\"g\")\n            .append(\"line\")\n            .attr(\"x1\", (d, i) => xScale(i) + xScale.bandwidth())\n            .attr(\"x2\", (d, i) => xScale(i + 1))\n            .attr(\"y1\", detailNodesHeight / 2)\n            .attr(\"y2\", detailNodesHeight / 2)\n            .style(\"stroke-width\", 5)\n            .style(\"stroke\", clusterColor)\n            .style(\"stroke-opacity\", 0.5)\n            ;\n\n        detailStatRender(clusters);\n\n        return xScale;\n    }\n    \n    function detailStatRender(clusters) {\n        if (clusters === undefined || clusters.length === 0) return;\nconsole.log(\"detailStatRender ----\", clusters);\n\n        let clusterAttrDivPrefix = \"clusterAttrDiv\";\n        d3.select(\"#detailNodeStatDiv\" + suffix).selectAll(\"svg\").remove();\n        let xScale = d3.scaleBand().domain(d3.range(clusters.length)).range([0, width - sliderWidth - itemNameWidth])\n                .paddingInner(detailNodeEdgeWidthRatio).paddingOuter(detailNodeEdgeWidthRatio / 2);\n// console.log(\"corpusData\", gitAnalyzer.corpusData);\n        let clusterDataMapByClusterId = clusters.reduce( (prev, cur, i) => {\n                    prev[cur.id] = new ClusterData(cur, gitAnalyzer.corpusData);\n                    return prev;\n        }, {});\n\n        detailStatDataNames.forEach( (dataName, index) => {\n            // if (!(dataName in AttributeColors)) return;\n\n            let eachClusterStatListSortedByValue = clusters.map(d => \n                attrValueMapToSortedList(dataName, clusterDataMapByClusterId[d.id][dataName])\n                    //.filter( (d, i) => i < this.showTopCount)\n            );\n            let keyMap = eachClusterStatListSortedByValue.reduce( (prevMap, stat) => {\n                return stat.reduce( (prev, cur) => {\n                    // [key, value, sum]\n                    if (cur[0] in prev) prev[cur[0]] += +cur[1];\n                    else prev[cur[0]] = +cur[1];\n                    return prev;\n                }, prevMap);\n            }, {});\n            let sortedAllValues = Object.keys(keyMap).map(k => [k, keyMap[k], []]);\n            // sort by name => by value\n            sortedAllValues.sort((a, b) => b[0] - a[0]);\n            // if (dataName === \"keywords\") {\n            //     sortedAllValues = sortedAllValues.sort((a, b) => b[1][1] - a[1][1])\n            //         .map( d => [d[0], d[1][0]], []);\n            // } else {\n                sortedAllValues.sort((a, b) => b[1] - a[1]);\n            // }\n// console.log(\"sortedAllValues\", dataName, sortedAllValues)\n\n            let topKeys = sortedAllValues.filter( (d, i) => i < showTopCount);\n            let statTotalHeight = statHeight * topKeys.length;\n            let yScale = d3.scaleBand().domain(d3.range(topKeys.length)).range([0, statTotalHeight - 2]);\n            \n            let colorArray = AttributeColors[DataTypeByNameMap[dataName]];\n            let attrColorScale = d3.scaleLinear().range([ colorArray[3], colorArray[0]]).domain([topKeys.length, 0]);\n        \n            let heads = d3.select(\"#clusterAttrHeadDiv\" + index + suffix)\n                .append(\"svg\")\n                .style(\"width\",  width - itemNameWidth)\n                .style(\"height\", statTotalHeight)\n                .selectAll(\"rect\")\n                .data(topKeys)\n                .enter()\n            ;\n            const highlightDataItem = (i) => {\n                d3.select(\".\" + dataName + \"Header\" + i + suffix)\n                    .style(\"stroke\", \"blue\")\n                    .style(\"stroke-width\", \"2px\");\n\n                d3.selectAll(\".\" + dataName + \"Item\" + i)\n                    .style(\"stroke\", \"blue\")\n                    .style(\"stroke-width\", \"2px\");\n            }\n            const rollBackHighlightDataItem = (i) => {\n                let nodes = d3.selectAll(\".\" + dataName + \"Item\" + i);\n                if (nodes.size() > 0) {\n                    nodes.style(\"stroke\", nodes.style(\"fill\"))\n                        .style(\"stroke-width\", \"1px\");\n                }\n                d3.select(\".\" + dataName + \"Header\" + i + suffix)\n                    .style(\"stroke-width\", \"0\");\n            }\n            const hover = (event) => {\n                d3.event.target.style.textDecoration = \"underline\";\n                d3.event.target.style.fill = \"red\";\n            }\n            const hout = event => {\n                d3.event.target.style.textDecoration = \"\";\n                d3.event.target.style.fill = \"\";\n            }\n\n            heads.append(\"rect\")\n                .attr(\"x\", 0)\n                .attr(\"y\", (d, i) => yScale(i))\n                .attr(\"width\", itemNameWidth)\n                .attr(\"height\", d => yScale.bandwidth())\n                .attr(\"class\", (d, i) => dataName + \"Header\" + i + suffix)\n                .style(\"fill\", (d, i) => attrColorScale(i))\n                .style(\"stroke-width\", 0)\n                .style(\"fill-opacity\", 0.5)\n                .on(\"mouseenter\", (d, i) => highlightDataItem(i))\n                .on(\"mouseout\", (d, i) => rollBackHighlightDataItem(i))\n            ;\n            heads.append(\"text\")\n                .attr(\"x\", itemNameWidth - 5)\n                .attr(\"y\", (d, i) => yScale(i) + yScale.bandwidth() - 4)\n                .attr(\"text-anchor\", \"end\")\n                .style(\"cursor\", \"pointer\")\n                .text(d => GitAnalyzer.getTextValue(dataName, d[0]))\n                // .attr(\"class\", d => {\n                //     if (this.state.keywords.filter(keyword => d[0].toLowerCase().indexOf(keyword) >= 0).length > 0) return \"attrHeadText matchedText\";\n                //     else return \"attrHeadText\";\n                // })\n                .on(\"mouseenter\", (d, i) => {highlightDataItem(i);hover();})\n                .on(\"mouseout\", (d, i) => {rollBackHighlightDataItem(i);hout();})\n                .on(\"click\", d => {\n                    fragmentClick([dataName, d[0]]);\n                })\n            ;\n\n            let dataSvg = d3.select(\"#\" + clusterAttrDivPrefix + index + suffix)\n                .append(\"svg\")\n                    .style(\"width\",  width - itemNameWidth)\n                    .style(\"height\", statTotalHeight)\n            ;\n            let prevItems = topKeys.map(d => d[0]);\n\n            const changeTextOver = (node, txt) => {\n                d3.select(node).select(\"text\").text(txt)\n                    .style(\"font-weight\", \"400\")\n                    .style(\"z-index\", 100);\n            }\n            const changeTextOut = (node, txt) => {\n                d3.select(node).select(\"text\").text(txt)\n                    .style(\"font-weight\", \"\")\n                    .style(\"z-index\", \"\");\n            }\n            d3.range(clusters.length).forEach(clusterIndex => {\n                let valueList = eachClusterStatListSortedByValue[clusterIndex].slice(0, showTopCount);\n                let colors = [];\n                let clusterData = dataSvg.append(\"g\")\n                    .attr(\"id\", \"g\" + clusterIndex)\n                    .selectAll(\"rect\")\n                    .data(valueList)\n                    .enter()\n                    .append(\"g\")\n                ;\n// console.log(\"valueList\", valueList);\n                clusterData\n                    .append(\"rect\")\n                    // .attr(\"class\", \"clusterDataItem\")\n                    .attr(\"x\", xScale(clusterIndex))\n                    // .attr(\"y\", d => yScale(d[2] - d[1]))\n                    .attr(\"y\", (d, i) => yScale(i))\n                    .attr(\"width\", xScale.bandwidth())\n                    .attr(\"height\", d => yScale.bandwidth())\n                    .attr(\"id\", d => d[0] + \",\" + d[1] + \",\" + d[2])\n                    .style(\"stroke\", (d, i) => {\n                        let pos = topKeys.map(d => d[0]).indexOf(d[0]);\n                        let color;\n                        if (pos > -1) color = attrColorScale(pos);\n                        else color = \"efebe9\";\n                        colors.push(color);\n                        return color;\n                    })\n                    .style(\"fill\", (d, i) => colors[i])\n                    .style(\"fill-opacity\", 0.5)\n                    .attr(\"class\", d => dataName + \"Item\" + topKeys.map(d => d[0]).indexOf(d[0]))\n                    .on(\"mouseenter\", function (d) {\n                        changeTextOver(this.parentNode, d[0]);\n                    })\n                    .on(\"mouseleave\", function (d) {\n        console.log(\"changeTextOut\", d, dataName); \n                        changeTextOut(this.parentNode, d[1] + (dataName.startsWith(\"cloc\") ? \"L\" : \"\"));\n                    })\n                ;\n                clusterData.append(\"text\")\n                    .attr(\"class\", \"clusterDataItemValues\")\n                    .attr(\"x\", xScale(clusterIndex) + xScale.bandwidth())\n                    .attr(\"y\", (d, i) => yScale(i) + yScale.bandwidth() - 2)\n                    .attr(\"text-anchor\", \"end\")\n                    .text(d => d[1] + (dataName.startsWith(\"cloc\") ? \"L\" : \"\"))\n                    .on(\"mouseenter\", function (d) {\n                        changeTextOver(this, d[0]);\n                    })\n                    .on(\"mouseleave\", function (d) { \n                        changeTextOut(this, d[1] + (dataName.startsWith(\"cloc\") ? \"L\" : \"\"));\n                    })\n                ;\n                let curItems = valueList.map(d => d[0]);\n                prevItems.forEach( (item, i) => {\n                    let pos = curItems.indexOf(item);\n                    if (pos === -1) return;\n                \n                    let dataset = {\n                        source: {\n                            x: (clusterIndex === 0 ? 0 : xScale(clusterIndex - 1) + xScale.bandwidth()),\n                            y: yScale(i) + yScale.bandwidth() / 2\n                        },\n                        target: {\n                            x: xScale(clusterIndex),\n                            y: yScale(pos) + yScale.bandwidth() / 2\n                        }\n                    };\n                    let link = d3.linkHorizontal().x(d => d.x).y(d => d.y);\n                    dataSvg.append(\"g\")\n                        .append(\"path\")\n                        .datum(dataset)\n                        .attr(\"class\", \"line linkCurveLine\")\n                        .attr(\"d\", link)\n                        .style(\"stroke\", colors[pos])\n                        .style(\"fill-opacity\", \"0.5\")\n                    ;\n                });\n                prevItems = curItems;\n            });\n        });\n    }\n\n    function attrValueMapToSortedList(dataName, map, dirDepth = 3) {\n        let sum = 0;\n        let mapList = Object.keys(map)\n            .filter(k => !(dataName.endsWith(\"Dirs\") && k.split(\"/\").length !== dirDepth))\n            .map(k => [k, map[k]])\n            // .map(k => {\n            //     let v = map[k];\n            //     if (dataName.endsWith(\"Files\")) {\n            //         let ks = k.split(\"/\");\n            //         k = ks.slice(-1)[0];\n            //         if (ks.length > 1) k = \".../\" + k;\n            //     }\n            //     return [k.split(\" <\")[0], v];\n            // });\n        ;\n// console.log(\"mapList\", mapList);\n        // sort by name => value\n        mapList.sort( (a, b) => (b[0] - a[0]));\n        if(dataName != \"keywords\") mapList.sort((a, b) => b[1] - a[1]);\n        else mapList = mapList.sort((a, b) => b[1][1] - a[1][1]).map(d => [d[0], d[1][0]]);\n        // mapList.sort( (a, b) => (b[1] - a[1]));\n        mapList = mapList.map(d => {\n            sum += +d[1];\n            return [...d, sum];\n        });\n// console.log(\"mapList2\", mapList)\n\n        return mapList;\n    }\n\n    return (\n        <div id={\"detailTabPanel\" + seq} className=\"flexVerticalContainer detailTabPanel\"\n            style={{width:width, display:\"none\",}}\n        >\n            <div id=\"title-panel\" style={{width:width}}>\n                <div id=\"repository-name\">\n                    INSPECTION (#{props.capturedSummaryInfoId})\n                </div>\n                <div id=\"legend-container\">\n                    {[ \"authors\", \"keywords\", \"commitTypes\", \"clocByFiles\", \"clocByDirs\" ].map((d, i) => {\n                    let color = AttributeColors [ DataTypeByNameMap[d] ][ 3 ];\n                    return (\n                        <div key={i} className=\"legend-element\" style={{\n                            background: color,\n                        }}>\n\n                            <Icon>{AttributeIconSpecs[ d ]}</Icon>\n                            <span>{d.split(\"clocBy\").slice(-1)[ 0 ]}</span>\n\n                        </div>\n                        );\n                    })}\n                </div>\n            </div>\n            <div style={{width:width, height:\"50px\"}} />\n            <div style={{width:width}} className=\"flexContainer\">\n                <div id={\"detailValueSliderDiv\" + suffix} width={sliderWidth + \"px\"} align=\"right\"\n                    style={{marginRight: \"10px\"}}\n                >\n                    <ValueSlider \n                        index={seq}\n                        name={\"detail\"}\n                        defaultStepValue={0}\n                        threshold={threshold}\n                        thresholdList={thresholdList}\n                        width={sliderWidth}\n                        height=\"200\"\n                        changeThreshold={ (th) => {\n                            console.log(\"changed!!\", threshold, th)\n                            setThreshold(th)\n                        } } />\n                </div>\n                <div>\n                    <svg id={\"detailNodeSvg\" + suffix} width={width - sliderWidth} height={detailNodesHeight} />\n                    {currentClusters !== undefined && currentClusters.length > 0 && \n                        <UserInterests\n                            index={seq}\n                            clusters={currentClusters} \n                            itemNameWidth={itemNameWidth}\n                            width={width}\n                            checkSvgWidth={width - sliderWidth - itemNameWidth - 1}\n                            itemHeight={statHeight}\n                            clusterColor={clusterColor}\n                            \n                            interestedItemList={capturedSummaryInfo.interestedItemList}\n                            keywords={[]}\n                            sliderWidth={sliderWidth}\n                            detailNodeEdgeWidthRatio={detailNodeEdgeWidthRatio}\n                            removeInterestsItem={removeInterestsItem}\n                        /> \n                    }\n                    <div id={\"detailNodeStatDiv\" + suffix}>\n                        {Object.keys(DataTypeByNameMap).map((item, i) => (\n                            <div className=\"clusterData\" key={i}>\n                                <div id={\"clusterAttrHeadDiv\" + i + suffix} className=\"clusterDataHeader\" style={{ \"width\": itemNameWidth }} />\n                                <div id={\"clusterAttrDiv\" + i + suffix}></div>\n                            </div>\n                        ))}\n                    </div>\n                    <svg id={\"detailBlockSvg\" + suffix} width={width - sliderWidth} height={detailNodesHeight} />\n                    <div id={\"detailNodeCommitList\" + suffix} \n                        style={{ \n                            position: \"absolute\",\n                            border: \"2px solid #EEEEEE\",\n                            background: \"#FFFFFF\",\n                            overflowY: \"auto\",\n                            width: showCommitListWidth + \"px\",\n                            visibility: showCommitListInfo[0],\n                            left: showCommitListInfo[1],\n                            top: showCommitListInfo[2]\n                        }\n                    }>\n                        <div>\n                            <IconButton\n                                size=\"small\"\n                                variant=\"outlined\"\n                                onClick={closeShowCommitListInfo}\n                            >\n                                <CloseIcon \n                                    fontSize=\"small\"\n                                />\n                            </IconButton>\n                        </div>\n                        { (showCommitListInfo[3].length > 0 ?\n                            <NodeDetailList\n                                gitAnalyzer={gitAnalyzer}\n                                nodeList={showCommitListInfo[3]}\n                                registerFavoriteFragment={fragmentClick}\n                                useHeuristicMerge={showCommitListInfo[4]}\n                            />\n                            : \"\")\n                        }\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Detail;","import React from 'react';\nimport Detail from \"./Detail\";\nimport { useSelector } from \"react-redux\";\n\nconst Inspection = (props) => {\n    const { capturedSummaryInfoList, currentCapturedSummaryInfoId } = useSelector(state => state);\n    const { inspectionPaneWidth } = useSelector(state => state.layout);\n\n    return (\n        <div\n          id=\"inspectionPane\"\n             style={{\n                 width: \"1676px\"\n             }}\n        //   style={{\n        //     visibility:\"hidden\",\n        //     width:clusterOverviewWidth + \"px\"\n        //   }}\n        >\n            {capturedSummaryInfoList.map( (d, i) => (\n                <Detail\n                    capturedSummaryInfoId = {d.id}\n                    key={d.id}\n                    gitAnalyzer={props.gitAnalyzer}\n                    width={inspectionPaneWidth}\n                    \n                    keywords={[]}\n                    searchResultList={[]}\n\n                    seq={d.id}\n                    capturedClusterNodes={d.clusterNodes}\n                    groupingParameters={d.groupingParameters}\n\n                    interestedItemList={d.interestedItemList}\n                    // addInterestsItems={undefined}\n                    // removeInterestsItem={undefined}\n                    // addFavoriteFragment={undefined}\n                    // addFragmentHistory={undefined}\n                />\n            ))}\n        \n        </div>\n        \n    );\n}\n\nexport default Inspection;","import * as d3 from 'd3';\nimport WordCloud from 'wordcloud';\n\nfunction processKey(word) {\n    if (word === undefined) return word;\n    return word.replace(/[`~! @#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/gi, '');\n    // return replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(word, \".\", \"\"), \">\", \"\"), \"=\", \"\"), \"}\", \"\"), \"{\", \"\"), \" \", \"\"), \"/\", \"\");\n}\n\nlet color = {\n    a: \"rgb(255, 182, 182)\",\n    b: \"#78e5cb\",\n    inter: \"rgb(119, 122, 216)\"\n}\n\n\nexport class KeywordCloud {\n\n    static generate(aList, bList, interList, canvas1, canvas2, weightFactor, changeOpacity, min, max) {\n\n        \n        console.log(aList, bList);\n        console.log(interList);\n\n        console.log(document.getElementById(canvas1));\n\n        let aMin = aList[0][1];\n        let aMax = aList[0][1];\n        let bMin = bList[0][1];\n        let bMax = bList[0][1];\n\n        aList.forEach(node => {\n            if(node[1] > aMax) aMax = node[1];\n            if(node[1] < aMin) aMin = node[1];\n        })\n        bList.forEach(node => {\n            if(node[1] > bMax) bMax = node[1];\n            if(node[1] < bMin) bMin = node[1];\n        })\n\n        aList.forEach(node => {\n            node[1] = ((node[1] - aMin) / (aMax - aMin)) * (max - min) + min;\n        })\n        bList.forEach(node => {\n            node[1] = ((node[1] - bMin) / (bMax - bMin)) * (max - min) + min;\n        })\n        // normalize to min < < max\n\n\n        WordCloud(document.getElementById(canvas1), {\n            list: aList,\n            wait: 0,\n            rotateRatio: 0,\n            weightFactor: weightFactor,\n            color: function(word) {\n                if(interList.includes(word)) return color.inter;\n                else return color.a;\n            },\n            classes: function(word) {\n                return \"wordCloud wordCloud_\" + processKey(word); \n            },\n            hover: function(item, dimension, event) {\n                if(item !== undefined) {\n                    d3.selectAll(\".wordCloud\")\n                      .style(\"font-weight\", \"300\")\n                      .style(\"opacity\", changeOpacity);\n                    d3.selectAll(\".wordCloud_\" + processKey(item[0]))\n                      .style(\"font-weight\", \"900\")\n                      .style(\"opacity\", 1);\n                }\n            }\n        });\n\n\n        WordCloud(document.getElementById(canvas2), {\n            list: bList,\n            wait: 0,\n            rotateRatio: 0,\n            weightFactor: weightFactor,\n            color: function(word) {\n                if(interList.includes(word)) return color.inter;\n                else return color.b;\n            },\n            classes: function(word) {\n                return \"wordCloud wordCloud_\" + processKey(word); \n            },\n            hover: function(item, dimension, event) {\n                if(item !== undefined) {\n                    d3.selectAll(\".wordCloud\")\n                    .style(\"font-weight\", \"300\")\n                    .style(\"opacity\", changeOpacity);\n                    d3.selectAll(\".wordCloud_\" + processKey(item[0]))\n                    .style(\"font-weight\", \"900\")\n                    .style(\"opacity\", 1);\n                }\n            }\n        });\n\n        d3.select(\"#\" + canvas1)\n        .on(\"mouseleave\", function(d) {\n            d3.selectAll(\".wordCloud\")\n            .style(\"font-weight\", 300)\n            .style(\"opacity\", 1);\n        })\n        .style(\"position\", \"absolute\");\n\n        d3.select(\"#\" + canvas2)\n        .on(\"mouseleave\", function(d) {\n            d3.selectAll(\".wordCloud\")\n            .style(\"font-weight\", 300)\n            .style(\"opacity\", 1);\n        })\n        .style(\"position\", \"absolute\");\n    }\n}\n\nexport default KeywordCloud;","import React, { useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { CommitCluster } from './analyzer/GithruClasses';\nimport * as d3 from 'd3';\nimport GitAnalyzer from './analyzer/GitAnalyzer';\nimport { intersection } from \"lodash\";\nimport { Checkbox } from '@material-ui/core';\nimport \"./DetailCompare.css\";\nimport * as actions from '../modules';\nimport { KeywordCloud } from './library/wordCloudGenerator';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\n\n\nconst DetailCompare = (props) => {\n\n    const { hideFiles } = useSelector(state => state.summaryParameters);\n    const { width } = props;\n\n\n    //d3.select(\"#inspectionPane\").style(\"width\", \"0px\");\n    // d3.select('#comparePane').style(\"width\", \"1700px\");\n\n\n    let aCapturedSummaryInfo = props.capturedSummaryInfoListForCompare[0];\n    let bCapturedSummaryInfo = props.capturedSummaryInfoListForCompare[1];\n    let aName = GitAnalyzer.getBranchNamesFromBranchClusterNodes(aCapturedSummaryInfo.clusterNodes)[0];\n    let bName = GitAnalyzer.getBranchNamesFromBranchClusterNodes(bCapturedSummaryInfo.clusterNodes)[0];\n\n    let reducingCapturedSummary = function(dict, val) {\n        let fileList = val.clusterData.keywordsByRank;\n       // console.log(fileList);\n        fileList.forEach(e => {\n            if(e[0] in dict) dict[e[0]] += e[1];\n            else dict[e[0]] = e[1];\n        })\n        return dict;\n    }\n\n    let aCapturedSummaryInfoKeywordDict = aCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummary, {});\n    let bCapturedSummaryInfoKeywordDict = bCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummary, {});\n\n\n    let aCapturedSummaryInfoKeyword = [], \n        bCapturedSummaryInfoKeyword = [];\n    \n    for(let key in aCapturedSummaryInfoKeywordDict) \n        aCapturedSummaryInfoKeyword.push([key, aCapturedSummaryInfoKeywordDict[key]]);\n    \n    for(let key in bCapturedSummaryInfoKeywordDict) \n        bCapturedSummaryInfoKeyword.push([key, bCapturedSummaryInfoKeywordDict[key]]);\n\n    const clusterNodesList = props.capturedSummaryInfoListForCompare.reduce((prev, capturedSummaryInfo) => {\n        let newCluster = new CommitCluster(undefined, undefined, undefined);\n        capturedSummaryInfo.clusterNodes.forEach(clusterNode => {\n            clusterNode.cluster.nodeList.forEach(node => newCluster.addNode(node));\n        });\n        prev.push(newCluster);\n        return prev;\n    }, []);\n\n    let aClusterNode = clusterNodesList[0];\n    let bClusterNode = clusterNodesList[1];\n\n    // Processing Data\n\n    /* ================ Very IMPORTANT DATA Variables!! ========== */\n    // overall\n    let aCloc, bCloc;\n    let aCommitNum, bCommitNum;\n\n    // Author\n    let interAuthorList;\n    let aAuthorData, bAuthorData;\n    let aAuthorArrayData = [], bAuthorArrayData = [];\n    let aAuthorArrayDataLoc, bAuthorArrayDataLoc,\n        aAuthorArrayDataCommit, bAuthorArrayDataCommit;\n\n    // Commit Types\n    let aCommitTypeArrayData = [], bCommitTypeArrayData = [];\n    let aCommitTypeArrayDataLoc, bCommitTypeArrayDataLoc,\n        aCommitTypeArrayDataCommit, bCommitTypeArrayDataCommit;\n    /* ================ Very IMPORTANT DATA Variables!! ========== */\n\n    // author data collection\n\n    aCloc = aClusterNode.locStat.clocSum;\n    bCloc = bClusterNode.locStat.clocSum;\n    aCommitNum = aClusterNode.nodeCount;\n    bCommitNum = bClusterNode.nodeCount;\n\n\n    let authorCollector = function (authorList, node) {\n        Object.keys(node.clusterData.authors).forEach(rawAuthor => {\n            let author = GitAnalyzer.getTextValue(\"authors#2\", rawAuthor); \n            authorList.push(author);\n        })\n        return authorList;\n    }\n\n    // interAuthorList = intersection(Array.from(new Set(aClusterNode.nodeList.reduce(authorCollector, []))),\n    //     Array.from(new Set(bClusterNode.nodeList.reduce(authorCollector, []))));\n\n    interAuthorList = intersection(Array.from(new Set(aCapturedSummaryInfo.clusterNodes.reduce(authorCollector, []))), \n                                   Array.from(new Set(bCapturedSummaryInfo.clusterNodes.reduce(authorCollector, []))));\n\n    console.log(interAuthorList);\n\n\n    let authorDataCollector = function (authorData, node) {\n        Object.keys(node.clusterData.authors).forEach(rawAuthor => {\n            let author = GitAnalyzer.getTextValue(\"authors#2\", rawAuthor); \n\n            if (authorData[author] !== undefined) {\n                authorData[author].commitNum += node.clusterData.authors[rawAuthor];\n                authorData[author].cloc += node.clusterData.authorsLOCStat[rawAuthor].clocSum;\n            }\n            else {\n                authorData[author] = {\n                    commitNum: node.clusterData.authors[rawAuthor], \n                    cloc: node.clusterData.authorsLOCStat[rawAuthor].clocSum,\n                    inIntersection: interAuthorList.includes(author) \n                }\n            }\n        })\n        return authorData;\n    }\n\n\n    aAuthorData = aCapturedSummaryInfo.clusterNodes.reduce(authorDataCollector, {});\n    bAuthorData = bCapturedSummaryInfo.clusterNodes.reduce(authorDataCollector, {});\n\n    for (let authorKey in aAuthorData) {\n        aAuthorArrayData.push({\n            author: authorKey,\n            commitNum: aAuthorData[authorKey].commitNum,\n            loc: aAuthorData[authorKey].cloc,\n            inIntersection: aAuthorData[authorKey].inIntersection\n        });\n    }\n    for (let authorKey in bAuthorData) {\n        bAuthorArrayData.push({\n            author: authorKey,\n            commitNum: bAuthorData[authorKey].commitNum,\n            loc: bAuthorData[authorKey].cloc,\n            inIntersection: bAuthorData[authorKey].inIntersection\n        });\n    }\n\n\n    aAuthorArrayDataLoc = accumulatingLoc(aAuthorArrayData.sort(sortByLoc));\n    bAuthorArrayDataLoc = accumulatingLoc(bAuthorArrayData.sort(sortByLoc));\n    aAuthorArrayDataCommit = accumulatingCommitNum(aAuthorArrayData.sort(sortByCommitNum));\n    bAuthorArrayDataCommit = accumulatingCommitNum(bAuthorArrayData.sort(sortByCommitNum));\n\n    // CommitType data collection\n\n    let commitTypeCollector = function (commitTypeList, node) {\n        Object.keys(node.clusterData.commitTypes).forEach(commitType => {\n            commitTypeList.push(commitType);\n        })\n        return commitTypeList;\n    }\n\n    let interCommitTypeList = intersection(Array.from(new Set(aCapturedSummaryInfo.clusterNodes.reduce(commitTypeCollector, []))),\n                                           Array.from(new Set(bCapturedSummaryInfo.clusterNodes.reduce(commitTypeCollector, []))))\n\n\n    let commitTypeDataCollector = function (commitTypeData, node) {\n        Object.keys(node.clusterData.commitTypes).forEach(commitType => {\n            if(commitTypeData[commitType] !== undefined) {\n                commitTypeData[commitType].commitNum += node.clusterData.commitTypes[commitType];\n                commitTypeData[commitType].cloc += node.clusterData.commitTypesLOCStat[commitType].clocSum;\n            }\n            else {\n                commitTypeData[commitType] = {\n                    commitNum :node.clusterData.commitTypes[commitType], \n                    cloc: node.clusterData.commitTypesLOCStat[commitType].clocSum,\n                    inIntersection: interCommitTypeList.includes(commitType)\n                }\n            }\n        })\n       \n        return commitTypeData;\n    }\n\n    let aCommitTypeData = aCapturedSummaryInfo.clusterNodes.reduce(commitTypeDataCollector, {});\n    let bCommitTypeData = bCapturedSummaryInfo.clusterNodes.reduce(commitTypeDataCollector, {});\n\n    //console.log(aCommitTypeData, bCommitTypeData)\n\n    for (let commitTypeKey in aCommitTypeData) {\n        aCommitTypeArrayData.push({\n            commitType: commitTypeKey,\n            commitNum: aCommitTypeData[commitTypeKey].commitNum,\n            loc: aCommitTypeData[commitTypeKey].cloc,\n            inIntersection: aCommitTypeData[commitTypeKey].inIntersection\n        });\n    }\n    for (let commitTypeKey in bCommitTypeData) {\n        bCommitTypeArrayData.push({\n            commitType: commitTypeKey,\n            commitNum: bCommitTypeData[commitTypeKey].commitNum,\n            loc: bCommitTypeData[commitTypeKey].cloc,\n            inIntersection: bCommitTypeData[commitTypeKey].inIntersection\n        });\n    }\n\n    //console.log(\"Final CommitType DATA!!\", aCommitTypeArrayData, bCommitTypeArrayData)\n\n    aCommitTypeArrayDataLoc = accumulatingLoc(aCommitTypeArrayData.sort(sortByLoc));\n    bCommitTypeArrayDataLoc = accumulatingLoc(bCommitTypeArrayData.sort(sortByLoc));\n    aCommitTypeArrayDataCommit = accumulatingCommitNum(aCommitTypeArrayData.sort(sortByCommitNum));\n    bCommitTypeArrayDataCommit = accumulatingCommitNum(bCommitTypeArrayData.sort(sortByCommitNum));\n\n    // Keywords\n    // variables for keyword\n    let aClusterKeywordData = aCapturedSummaryInfoKeyword.sort((a,b) => b[1] - a[1]);\n    let bClusterKeywordData = bCapturedSummaryInfoKeyword.sort((a,b) => b[1] - a[1]);\n\n    let presentingKeywordNum = useRef(10);\n\n\n    let aKeywords = [], bKeywords = [], interKeywords = [];\n    for (let i = 0; i < 20; i++) {\n        try {\n            let word = aClusterKeywordData[i][0];\n            aKeywords.push(word);\n        }\n        catch (e) { console.log(\"error\") }\n        try {\n            let word = bClusterKeywordData[i][0];\n            bKeywords.push(word);\n        }\n        catch (e) { console.log(\"error\") }\n    }\n    interKeywords = intersection(aKeywords, bKeywords);\n\n    let aList = aClusterKeywordData.slice(0, 20);\n    let bList = bClusterKeywordData.slice(0, 20);\n    let interList = interKeywords;\n\n    // processing keyword data ENDD!!!\n\n\n    // Processing data for file structure\n\n    function generateFileDirData(aData, bData, aArray, bArray, aSum, bSum) {\n        let aDataTempArray = [], bDataTempArray = [];\n        for (let key in aData) aDataTempArray.push([key, aData[key]]);\n        for (let key in bData) bDataTempArray.push([key, bData[key]]);\n\n        aDataTempArray.sort((a, b) => b[1] - a[1]);\n        bDataTempArray.sort((a, b) => b[1] - a[1]);\n\n        aDataTempArray = aDataTempArray.slice(0, presentingKeywordNum.current);\n        bDataTempArray = bDataTempArray.slice(0, presentingKeywordNum.current);\n        let interArray = intersection(aDataTempArray.map(x => x[0]), bDataTempArray.map(x => x[0]));\n\n        for (let i = 0; i < presentingKeywordNum.current; i++) {\n            try {\n                let name = aDataTempArray[i][0];\n                aArray.push({\n                    keyword: name,\n                    score: aData[name] / aSum,\n                    inIntersection: interArray.includes(name)\n                });\n            }\n            catch {\n                aArray.push({ keyword: \"\", score: 0, inIntersection: true });\n            }\n            try {\n                let name = bDataTempArray[i][0];\n                bArray.push({\n                    keyword: name,\n                    score: bData[name] / bSum,\n                    inIntersection: interArray.includes(name)\n                });\n            }\n            catch {\n                bArray.push({ keyword: \"\", score: 0, inIntersection: true });\n            }\n        }\n    }\n\n    let reducingCapturedSummaryCloc = function(dict, val) {\n        let fileDict = val.clusterData.clocByFiles;\n        //console.log(fileList);\n        for (let key in fileDict) {\n            if(key in dict) dict[key] += fileDict[key];\n            else dict[key] = fileDict[key];\n        }\n        return dict;\n    }\n    let reducingCapturedSummaryCommitNum = function(dict, val) {\n        let fileDict = val.clusterData.touchCountByFiles;\n        //console.log(fileList);\n        for (let key in fileDict) {\n            if(key in dict) dict[key] += fileDict[key];\n            else dict[key] = fileDict[key];\n        }\n        return dict;\n    }\n\n    let aRawModLocFileData = aCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummaryCloc, {});\n    let aRawModNumFileData = aCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummaryCommitNum, {});;\n    let bRawModLocFileData = bCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummaryCloc, {});\n    let bRawModNumFileData = bCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummaryCommitNum, {});;\n\n    // Removing hideFiles\n    hideFiles.forEach(fileName => {\n        delete aRawModLocFileData[fileName]\n        delete aRawModNumFileData[fileName]\n        delete bRawModLocFileData[fileName]\n        delete bRawModNumFileData[fileName]\n    })\n\n    let aLocFileArray = [], bLocFileArray = [], aNumFileArray = [], bNumFileArray = [];\n    generateFileDirData(aRawModLocFileData, bRawModLocFileData, aLocFileArray, bLocFileArray, aCloc, bCloc);\n    generateFileDirData(aRawModNumFileData, bRawModNumFileData, aNumFileArray, bNumFileArray, aCommitNum, bCommitNum);\n\n    let aFileArray = [], bFileArray = [];\n    for (let i = 0; i < presentingKeywordNum.current; i++) {\n        aFileArray.push({\n            keyword: aLocFileArray[i].keyword,\n            loc: aLocFileArray[i],\n            num: aNumFileArray[i]\n        });\n        bFileArray.push({\n            keyword: bLocFileArray[i].keyword,\n            loc: bLocFileArray[i],\n            num: bNumFileArray[i]\n        })\n    }\n\n    function processKey(word) {\n        if (word === undefined) return word;\n        return word.replace(/[`~! @#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/gi, '');\n        // return replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(word, \".\", \"\"), \">\", \"\"), \"=\", \"\"), \"}\", \"\"), \"{\", \"\"), \" \", \"\"), \"/\", \"\");\n    }\n\n\n    // helper function to draw ben diagram\n    function calIntersection(x0, y0, r0, x1, y1, r1) {\n        var a, dx, dy, d, h, rx, ry;\n        var x2, y2;\n        dx = x1 - x0;\n        dy = y1 - y0;\n\n        d = Math.sqrt((dy * dy) + (dx * dx));\n\n        if (d > (r0 + r1)) {\n            return false;\n        }\n        if (d < Math.abs(r0 - r1)) {\n            return false;\n        }\n\n        a = ((r0 * r0) - (r1 * r1) + (d * d)) / (2.0 * d);\n\n        x2 = x0 + (dx * a / d);\n        y2 = y0 + (dy * a / d);\n\n        h = Math.sqrt((r0 * r0) - (a * a));\n\n        rx = -dy * (h / d);\n        ry = dx * (h / d);\n\n        var xi = x2 + rx;\n        var xi_prime = x2 - rx;\n        var yi = y2 + ry;\n        var yi_prime = y2 - ry;\n\n        return [xi, xi_prime, yi, yi_prime];\n    }\n\n    // helper functions for sorting\n    function sortByLoc(a, b) {\n        return a.loc - b.loc;\n    }\n\n    function sortByCommitNum(a, b) {\n        return a.commitNum - b.commitNum;\n    }\n\n    function accumulatingLoc(array) {\n        let currentLocSum = 0;\n        for (let i = 0; i < array.length; i++) {\n            array[i][\"currentLocSum\"] = currentLocSum;\n            currentLocSum += array[i][\"loc\"];\n        }\n        return array;\n    }\n\n    function accumulatingCommitNum(array) {\n        let currentCommitSum = 0;\n        for (let i = 0; i < array.length; i++) {\n            array[i][\"currentCommitSum\"] = currentCommitSum;\n            currentCommitSum += array[i][\"commitNum\"];\n        }\n        return array;\n    }\n\n    // Color scheme!!!!!!\n    let color = {\n        a: \"rgb(255, 182, 182)\",\n        b: \"#78e5cb\",\n        inter: \"rgb(119, 122, 216)\"\n    }\n\n\n    let aChecked = useRef(true);\n    let interChecked = useRef(true);\n    let bChecked = useRef(true);\n    let isLoc = useRef(true); // false if commitNum\n\n    let xAxisScale = useRef();\n\n    let aAuthorSvgMolds = useRef();\n    let aAuthorRects = useRef();\n    let aAuthorTexts = useRef();\n\n    let bAuthorSvgMolds = useRef();\n    let bAuthorRects = useRef();\n    let bAuthorTexts = useRef();\n\n    let aCommitTypeSvgMolds = useRef();\n    let aCommitTypeRects = useRef();\n    let aCommitTypeTexts = useRef();\n\n    let bCommitTypeSvgMolds = useRef();\n    let bCommitTypeRects = useRef();\n    let bCommitTypeTexts = useRef();\n\n\n    let aFileSvg = useRef();\n    let bFileSvg = useRef();\n\n    let showFileFullPath = useRef(false);\n\n    const dispatch = useDispatch();\n    \n    \n    let updateXAxis;\n    let updateAuthorSvg;\n    let updateCommitTypeSvg;\n    let updateKeywordSvg;\n    let updatefileSvg;\n    let updateLegends;\n    \n    useEffect(() => {\n        dispatch(actions.updateScrollToRight(true));\n        window.scrollTo({\n            top:0,\n            left:4000,\n        });\n\n        let mainSvg = d3.select(\"#compareClusters\");\n        mainSvg.selectAll(\"g\").remove();\n\n\n        /* ================================================== */\n        /* ================================================== */\n        /* Implementing Venn Diagram Comparison SELECTOR!!!!  */\n        /* ================================================== */\n        /* ================================================== */\n\n        let radius = 45;\n        let vennHeight = 65;\n        let aClusterX = 72, bClusterX = 114;\n        let interPoints = calIntersection(aClusterX, vennHeight, radius, bClusterX, vennHeight, radius);\n\n        let vennSvg = mainSvg.append(\"g\");\n\n        let aCircle = vennSvg.append(\"g\")\n            .append(\"path\")\n            .attr(\"id\", \"aVenn\")\n            .style(\"fill\", color.a)\n            .attr(\"d\", null)\n            .attr(\"stroke\", color.a)\n            .attr(\"stroke-width\", \"0px\")\n            .style(\"opacity\", 0.8)\n            .style(\"cursor\", \"pointer\")\n            .on(\"mouseover\", function (d) { d3.select(this).attr(\"stroke-width\", 4); })\n            .on(\"mouseout\", function (d) { d3.select(this).attr(\"stroke-width\", 0); })\n            .on(\"click\", function (d) {\n                if (aChecked.current === true) {\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.3);\n                    aChecked.current = false;\n                    updateAuthorSvg();\n                    updateCommitTypeSvg();\n                    updateKeywordSvg();\n                    updatefileSvg();\n                    updateVennText();\n                }\n                else {\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.8);\n                    aChecked.current = true;\n                    updateAuthorSvg();\n                    updateCommitTypeSvg();\n                    updateKeywordSvg();\n                    updatefileSvg();\n                    updateVennText();\n                }\n            })\n\n        aCircle.attr(\"d\", function () {\n            return \"M\" + interPoints[0] + \",\" + interPoints[2] + \"A\" + radius + \",\" + radius +\n                \" 0 1,1 \" + interPoints[1] + \",\" + interPoints[3] + \"A\" + radius + \",\" + radius +\n                \" 0 0,0 \" + interPoints[0] + \",\" + interPoints[2];\n        });\n\n        let bCircle = vennSvg.append(\"g\")\n            .append(\"path\")\n            .attr(\"id\", \"bVenn\")\n            .style(\"fill\", color.b)\n            .attr(\"d\", null)\n            .attr(\"stroke\", color.b)\n            .attr(\"stroke-width\", \"0px\")\n            .style(\"opacity\", 0.8)\n            .style(\"cursor\", \"pointer\")\n            .on(\"mouseover\", function (d) { d3.select(this).attr(\"stroke-width\", 4); })\n            .on(\"mouseout\", function (d) { d3.select(this).attr(\"stroke-width\", 0); })\n            .on(\"click\", function (d) {\n                if (bChecked.current === true) {\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.3);\n                    bChecked.current = false;\n                    updateAuthorSvg();\n                    updateCommitTypeSvg();\n                    updateKeywordSvg();\n                    updatefileSvg();\n                    updateVennText();\n                }\n                else {\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.8);\n                    bChecked.current = true;\n                    updateAuthorSvg();\n                    updateCommitTypeSvg();\n                    updateKeywordSvg();\n                    updatefileSvg();\n                    updateVennText();\n                }\n            })\n        bCircle.attr(\"d\", function () {\n            return \"M\" + interPoints[0] + \",\" + interPoints[2] + \"A\" + radius + \",\" + radius +\n                \" 0 0,0 \" + interPoints[1] + \",\" + interPoints[3] + \"A\" + radius + \",\" + radius +\n                \" 0 1,1 \" + interPoints[0] + \",\" + interPoints[2];\n        });\n\n        let vennIntersection = vennSvg.append(\"g\")\n            .append(\"path\")\n            .attr(\"id\", \"interVenn\")\n            .style(\"fill\", color.inter)\n            .attr(\"d\", null)\n            .attr(\"stroke\", color.inter)\n            .attr(\"stroke-width\", \"0px\")\n            .style(\"opacity\", 0.8)\n            .style(\"cursor\", \"pointer\")\n            .on(\"mouseover\", function (d) { d3.select(this).attr(\"stroke-width\", 4); })\n            .on(\"mouseout\", function (d) { d3.select(this).attr(\"stroke-width\", 0); })\n            .on(\"click\", function (d) {\n                if (interChecked.current === true) {\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.3);\n                    interChecked.current = false;\n                    updateAuthorSvg();\n                    updateCommitTypeSvg();\n                    updateKeywordSvg();\n                    updatefileSvg();\n                    updateVennText();\n                }\n                else {\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.8);\n                    interChecked.current = true;\n                    updateAuthorSvg();\n                    updateCommitTypeSvg();\n                    updateKeywordSvg();\n                    updatefileSvg();\n                    updateVennText();\n                }\n            })\n\n        vennIntersection.attr(\"d\", function () {\n            return \"M\" + interPoints[0] + \",\" + interPoints[2] + \"A\" + radius + \",\" + radius +\n                \" 0 0,1 \" + interPoints[1] + \",\" + interPoints[3] + \"A\" + radius + \",\" + radius +\n                \" 0 0,1 \" + interPoints[0] + \",\" + interPoints[2];\n        });\n\n        vennSvg.append(\"svg\")\n            .attr(\"x\", 14)\n            .attr(\"width\", 70)\n            .attr(\"height\", 121)\n            .append(\"text\")\n            .attr(\"id\", \"vennTextA\")\n            .attr(\"dominant-baseline\", \"middle\")\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"x\", \"50%\")\n            .attr(\"y\", \"50%\")\n            .style(\"font-size\", \"14px\")\n            .style(\"fill\", \"black\")\n            .style(\"font-weight\", \"bold\")\n            .text(\"#\" + aCapturedSummaryInfo.id)\n            // .text(\"#\" + aCapturedSummaryInfo.id + \" (\" + aName + \")\")\n\n        vennSvg.append(\"svg\")\n            .attr(\"x\", 100)\n            .attr(\"width\", 70)\n            .attr(\"height\", 121)\n            .append(\"text\")\n            .attr(\"id\", \"vennTextB\")\n            .attr(\"dominant-baseline\", \"middle\")\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"x\", \"50%\")\n            .attr(\"y\", \"50%\")\n            .style(\"font-size\", \"14px\")\n            .style(\"fill\", \"black\")\n            .style(\"font-weight\", \"bold\")\n            // .text(\"#\" + bCapturedSummaryInfo.id + \" (\" + bName + \")\")\n            .text(\"#\" + bCapturedSummaryInfo.id)\n\n        vennSvg.append(\"svg\")\n            .attr(\"x\", 57)\n            .attr(\"width\", 70)\n            .attr(\"height\", 121)\n            .append(\"text\")\n            .attr(\"id\", \"vennTextInter\")\n            .attr(\"dominant-baseline\", \"middle\")\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"x\", \"50%\")\n            .attr(\"y\", \"50%\")\n            .style(\"font-size\", \"15px\")\n            .style(\"fill\", \"black\")\n            .style(\"font-weight\", \"bold\")\n            // .text(\"#\" + bCapturedSummaryInfo.id + \" (\" + bName + \")\")\n            .text(\"∩\")\n\n        function updateVennText() {\n            if (aChecked.current)     d3.select(\"#vennTextA\").transition().duration(800).style(\"opacity\", 1);\n            else                      d3.select(\"#vennTextA\").transition().duration(800).style(\"opacity\", 0);\n            if (bChecked.current)     d3.select(\"#vennTextB\").transition().duration(800).style(\"opacity\", 1);\n            else                      d3.select(\"#vennTextB\").transition().duration(800).style(\"opacity\", 0);\n            if (interChecked.current) d3.select(\"#vennTextInter\").transition().duration(800).style(\"opacity\", 1);\n            else                      d3.select(\"#vennTextInter\").transition().duration(800).style(\"opacity\", 0);\n        }\n        /* Finished Implementing Venn Diagram Comparison SELECTOR!!!!  */\n \n\n        // Axis\n\n        let xAxisLength = (width / 2) * 0.92;\n        xAxisScale.current = d3.scaleLinear()\n            .domain([0, Math.max(aClusterNode.locStat.clocSum, bClusterNode.locStat.clocSum)])\n            .range([0, xAxisLength]);\n\n\n\n        updateXAxis = function () {\n            if (isLoc.current) {\n                xAxisScale.current = d3.scaleLinear()\n                    .domain([0, Math.max(aClusterNode.locStat.clocSum, bClusterNode.locStat.clocSum)])\n                    .range([0, xAxisLength]);\n\n            }\n            else {\n                xAxisScale.current = d3.scaleLinear()\n                    .domain([0, Math.max(aClusterNode.nodeCount, bClusterNode.nodeCount)])\n                    .range([0, xAxisLength]);\n\n            }\n        }\n\n        let yAxisLength = 80;\n        let yAxisMargin = 10;\n        let rectHeight = (yAxisLength - 3 * yAxisMargin) / 2;\n\n        // BARGRAPH Generator / updater\n\n        function initBarGraphElement(type, svg, svgMolds, arrayDataLoc, rects, texts, defualtColor, checked) {\n            console.log(arrayDataLoc);\n\n            svgMolds.current = svg.selectAll(\"svg\")\n                .data(arrayDataLoc)\n                .enter()\n                .append(\"svg\")\n                .attr(\"x\", d => xAxisScale.current(d.currentLocSum) + 1)\n                .attr(\"y\", 0)\n                .attr(\"width\", d => xAxisScale.current(d.loc))\n                .attr(\"height\", rectHeight)\n                .attr(\"class\", d => type + \"_\" + processKey(d[type]))\n                .on(\"mouseover\", function (d) {\n                    if (d.inIntersection ? interChecked.current : checked.current) {\n                        d3.selectAll(\".\" + type + \"_\" + processKey(d[type])).attr(\"width\", xAxisLength).raise()\n                        d3.selectAll(\".\" + type + \"_rect_\" + processKey(d[type])).style(\"opacity\", 1);\n                        d3.selectAll(\".\" + type + \"_text\").style(\"opacity\", 0);\n                        d3.selectAll(\".\" + type + \"_text_\" + processKey(d[type])).style(\"opacity\", 1).style(\"font-weight\", \"bold\");\n                    \n                        d3.select(\".tooltipHover\")\n                          .style(\"left\", (d3.event.pageX) + \"px\")\t\t\n                          .style(\"top\", (d3.event.pageY) + \"px\")\n                          .style(\"opacity\", 0.8)\n                          .style(\"width\", \"140px\")\n                          .html(isLoc.current ? d.loc.toFixed(0) + \" lines modified\" : d.commitNum.toFixed(1) + \" commits\")\n                    }\n                })\n                .on(\"mouseout\", function (d) {\n                    if (d.inIntersection ? interChecked.current : checked.current) {\n                        d3.selectAll(\".\" + type + \"_\" + processKey(d[type])).attr(\"width\", d => isLoc.current ? xAxisScale.current(d.loc) : xAxisScale.current(d.commitNum)).lower()\n                        d3.selectAll(\".\" + type + \"_rect_\" + processKey(d[type])).style(\"opacity\", d => {\n                            if (d.inIntersection) return interChecked.current ? 0.7 : 0.3;\n                            else return checked.current ? 0.7 : 0.3;\n                        });\n                        d3.selectAll(\".\" + type + \"_text_\" + processKey(d[type])).style(\"font-weight\", 300);\n                        d3.selectAll(\".\" + type + \"_text\").style(\"opacity\", d => {\n                            if (d.inIntersection) return interChecked.current ? 1 : 0;\n                            else return checked.current ? 1 : 0;\n                        });\n                    }\n                    d3.select(\".tooltipHover\").style(\"opacity\", 0);\n                })\n                .on(\"mousemove\", function (d) {\n                    d3.select(\".tooltipHover\")\n                      .style(\"left\", (d3.event.pageX) + \"px\")\t\t\n                      .style(\"top\", (d3.event.pageY) + \"px\");\n                });\n\n            rects.current = svgMolds.current.append(\"rect\")\n                .attr(\"class\", d => type + \"_rect_\" + processKey(d[type]))\n                .attr(\"width\", d => xAxisScale.current(d.loc))\n                .attr(\"height\", rectHeight)\n                .attr(\"rx\", 4).attr(\"ry\", 4)\n                .style(\"stroke\", \"white\")\n                .style(\"stroke-width\", 0.5)\n                .style(\"opacity\", 0.7)\n                .style(\"fill\", d => {\n                    if (d.inIntersection === true) return color.inter;\n                    else return defualtColor;\n                })\n\n\n\n            texts.current = svgMolds.current.append(\"text\")\n                .attr(\"class\", d => type + \"_text \" + type + \"_text_\" + processKey(d[type]))\n                .attr(\"y\", rectHeight * 0.6)\n                .attr(\"x\", 4)\n                .text(d => d[type]);\n\n        }\n\n        function updateBarGraphElement(type, arrayData, svgMolds, rects, texts, defaultColor, checked) {\n\n            svgMolds.current.data(arrayData)\n                .join()\n                .transition().duration(800)\n                .attr(\"x\", d => {\n                    if (isLoc.current) return xAxisScale.current(d.currentLocSum) + 1\n                    else return xAxisScale.current(d.currentCommitSum) + 1\n                })\n                .attr(\"width\", d => { return isLoc.current ? xAxisScale.current(d.loc) : xAxisScale.current(d.commitNum); })\n                .attr(\"class\", d => type + \"_\" + processKey(d[type]))\n\n            rects.current.data(arrayData)\n                .join()\n                .transition().duration(800)\n                .style(\"opacity\", d => {\n                    if (d.inIntersection) return interChecked.current ? 0.7 : 0.3;\n                    else return checked.current ? 0.7 : 0.3;\n                })\n                .style(\"fill\", d => {\n                    if (d.inIntersection === true) return color.inter;\n                    else return defaultColor;\n                })\n                .attr(\"width\", d => isLoc.current ? xAxisScale.current(d.loc) : xAxisScale.current(d.commitNum))\n                .attr(\"class\", d => type + \"_rect_\" + processKey(d[type]))\n\n            texts.current.data(arrayData)\n                .join()\n                .transition().duration(800)\n                .attr(\"class\", d => type + \"_text \" + type + \"_text_\" + processKey(d[type]))\n                .style(\"opacity\", d => {\n                    if (d.inIntersection) return interChecked.current ? 1 : 0;\n                    else return checked.current ? 1 : 0;\n                })\n                .text(d => d[type]);\n        }\n\n        // End of BARGRAPH Generator / updater\n\n        let labelYMargin = 15;\n\n        // Author\n\n        let authorX = (width / 2) * 0.04;\n        let authorY = 160;\n\n        let authorSvg = mainSvg.append(\"g\");\n\n        mainSvg.append(\"text\")\n               .text(\"Authors\")\n               .attr(\"x\", authorX)\n               .attr(\"y\", authorY - labelYMargin)\n               .style(\"font-size\", \"20px\")\n               .style(\"font-weight\", 350);\n\n        authorSvg.append(\"g\")\n            .attr('transform', 'translate(' + authorX + ',' + authorY + ')')\n            .append(\"path\")\n            .attr(\"d\", \"M 0 0 L 0 \" + yAxisLength)\n            .style(\"stroke\", \"black\")\n\n        let authorAxis = authorSvg.append(\"g\")\n            .attr('transform', 'translate(' + authorX + ',' + (authorY + yAxisLength) + ')')\n            .call(d3.axisBottom(xAxisScale.current));\n\n        // appending legend\n\n        authorSvg.append(\"text\")\n                 .text(\"#0\")\n                 .attr(\"x\", 13)\n                 .attr(\"y\", authorY + 27)\n                 .style(\"font-weight\", 400);\n\n        authorSvg.append(\"text\")\n                 .text(\"#1\")\n                 .attr(\"x\", 13)\n                 .attr(\"y\", authorY + 62)\n                 .style(\"font-weight\", 400);\n\n        authorSvg.append(\"text\")\n                 .attr(\"class\", \"basicXLegend\")\n                 .text(\"CLOC\")\n                 .attr(\"x\", xAxisLength / 2 + 16)\n                 .attr(\"y\", authorY + yAxisLength + 35)\n                 .style(\"font-weight\", 400);\n\n        /* ========= INIT AUTHOR - A START ========== */\n        // preparing main svg\n        let aAuthorSvg = authorSvg.append(\"g\")\n            .attr('transform', 'translate(' + authorX + ',' + (authorY + yAxisMargin) + ')');\n        // preparing data\n        aAuthorArrayData.sort(sortByLoc);\n\n        //variables \n        initBarGraphElement(\"author\", aAuthorSvg, aAuthorSvgMolds, aAuthorArrayDataLoc, aAuthorRects, aAuthorTexts, color.a, aChecked);\n        /* ========== INIT AUTHOR - A END =========== */\n\n        /* ========= INIT AUTHOR - B START ========== */\n        // preparing main svg\n        let bAuthorSvg = authorSvg.append(\"g\")\n            .attr('transform', 'translate(' + authorX + ',' + (authorY + yAxisMargin * 2 + rectHeight) + ')');\n        // preparing data\n        bAuthorArrayData.sort(sortByLoc);\n\n        //variables \n        initBarGraphElement(\"author\", bAuthorSvg, bAuthorSvgMolds, bAuthorArrayDataLoc, bAuthorRects, bAuthorTexts, color.b, bChecked);\n        /* ========== INIT AUTHOR - B END =========== */\n\n        updateAuthorSvg = function () {\n            authorAxis.call(d3.axisBottom(xAxisScale.current));\n            let aArrayData = isLoc.current ? aAuthorArrayDataLoc : aAuthorArrayDataCommit;\n            let bArrayData = isLoc.current ? bAuthorArrayDataLoc : bAuthorArrayDataCommit;\n            updateBarGraphElement(\"author\", aArrayData, aAuthorSvgMolds, aAuthorRects, aAuthorTexts, color.a, aChecked)\n            updateBarGraphElement(\"author\", bArrayData, bAuthorSvgMolds, bAuthorRects, bAuthorTexts, color.b, bChecked)\n        }\n\n        // End of Author\n\n        // CommitTypes\n\n        let commitTypeX = authorX;\n        let commitTypeY = authorY * 2 - 8;\n\n        let commitTypeSvg = mainSvg.append(\"g\");\n\n        mainSvg.append(\"text\")\n               .text(\"Commit Type\")\n               .attr(\"x\", commitTypeX)\n               .attr(\"y\", commitTypeY - labelYMargin)\n               .style(\"font-size\", \"20px\")\n               .style(\"font-weight\", 350);\n\n\n        commitTypeSvg.append(\"g\")\n            .attr('transform', 'translate(' + commitTypeX + ',' + commitTypeY + ')')\n            .append(\"path\")\n            .attr(\"d\", \"M 0 0 L 0 \" + yAxisLength)\n            .style(\"stroke\", \"black\")\n\n        let commitTypeAxis = commitTypeSvg.append(\"g\")\n            .attr('transform', 'translate(' + commitTypeX + ',' + (commitTypeY + yAxisLength) + ')')\n            .call(d3.axisBottom(xAxisScale.current));\n\n        commitTypeSvg.append(\"text\")\n                     .text(\"#0\")\n                     .attr(\"x\", commitTypeX - 20)\n                     .attr(\"y\", commitTypeY + 27)\n                     .style(\"font-weight\", 400);\n\n        commitTypeSvg.append(\"text\")\n                     .text(\"#1\")\n                     .attr(\"x\", commitTypeX - 20)\n                     .attr(\"y\", commitTypeY + 62)\n                     .style(\"font-weight\", 400);\n\n\n        commitTypeSvg.append(\"text\")\n                     .attr(\"class\", \"basicXLegend\")\n                     .text(\"CLOC\")\n                     .attr(\"x\", commitTypeX + xAxisLength / 2 - 14)\n                     .attr(\"y\", commitTypeY + yAxisLength + 35)\n                     .style(\"font-weight\", 400);\n\n\n        /* ========= INIT CommitType - A START ========== */\n        // preparing main svg\n        let aCommitTypeSvg = commitTypeSvg.append(\"g\")\n            .attr('transform', 'translate(' + commitTypeX + ',' + (commitTypeY + yAxisMargin) + ')');\n        // preparing data\n        aCommitTypeArrayData.sort(sortByLoc);\n\n        //variables \n        initBarGraphElement(\"commitType\", aCommitTypeSvg, aCommitTypeSvgMolds, aCommitTypeArrayDataLoc, aCommitTypeRects, aCommitTypeTexts, color.a, aChecked);\n        /* ========== INIT CommitType - A END =========== */\n\n        /* ========= INIT CommitType - B START ========== */\n        // preparing main svg\n        let bCommitTypeSvg = commitTypeSvg.append(\"g\")\n            .attr('transform', 'translate(' + commitTypeX + ',' + (commitTypeY + yAxisMargin * 2 + rectHeight) + ')');\n        // preparing data\n        bCommitTypeArrayData.sort(sortByLoc);\n\n        //variables \n        initBarGraphElement(\"commitType\", bCommitTypeSvg, bCommitTypeSvgMolds, bCommitTypeArrayDataLoc, bCommitTypeRects, bCommitTypeTexts, color.b, bChecked);\n        /* ========== INIT CommitType - B END =========== */\n\n        updateCommitTypeSvg = function () {\n            commitTypeAxis.call(d3.axisBottom(xAxisScale.current));\n            let aArrayData = isLoc.current ? aCommitTypeArrayDataLoc : aCommitTypeArrayDataCommit;\n            let bArrayData = isLoc.current ? bCommitTypeArrayDataLoc : bCommitTypeArrayDataCommit;\n            updateBarGraphElement(\"commitType\", aArrayData, aCommitTypeSvgMolds, aCommitTypeRects, aCommitTypeTexts, color.a, aChecked)\n            updateBarGraphElement(\"commitType\", bArrayData, bCommitTypeSvgMolds, bCommitTypeRects, bCommitTypeTexts, color.b, bChecked)\n        }\n        // End of commitTypes\n\n        // Keywords\n\n        let keywordsX = authorX;\n        let keywordsY = authorY * 4 + 195;\n        let keywordsWidth = width * 0.5 * 0.92;\n        let keywordsHeight = 270;\n\n        let keywordsSvg = mainSvg.append(\"g\")\n            .attr('transform', 'translate(' + keywordsX + ',' + keywordsY + ')');\n\n     \n\n       \n        mainSvg.append(\"text\")\n               .text(\"Keywords\")\n               .attr(\"x\", keywordsX)\n               .attr(\"y\", keywordsY - labelYMargin)\n               .style(\"font-size\", \"20px\")\n               .style(\"font-weight\", 350);\n\n        mainSvg.append(\"text\")\n               .text(\"(ranked by tf-idf score)\")\n               .attr(\"x\", keywordsX + 93)\n               .attr(\"y\", keywordsY - labelYMargin - 1)\n               .style(\"font-size\", \"13px\")\n               .style(\"font-weight\", 350);\n        \n        // Appending Axis\n\n        let keywordsAxisScale = d3.scaleLinear()\n            .domain([0, 1])\n            .range([0, keywordsWidth / 2 - 25]);\n     \n        KeywordCloud.generate(aList, bList, interList, \"keywordsCanvas_1\", \"keywordsCanvas_2\", 3, 0.5, 3, 10);\n        \n        let graphMargin = 5;\n        let rectMargin = 5;\n        let rectSingleHeight = (keywordsHeight - 2 * graphMargin - (presentingKeywordNum.current - 1) * rectMargin) / 10;\n        let rectSingleY = rectSingleHeight + rectMargin;\n\n        function initSmallChart(key, graphX, yourKeywordsSvg, keywordsData, defaultColor, checked, componentSvg, type) {\n\n            yourKeywordsSvg.current = componentSvg.selectAll(\".\" + key)\n                .data(keywordsData)\n                .enter()\n                .append(\"svg\")\n                .attr(\"class\", key)\n                .attr(\"x\", 1 + graphX)\n                .attr(\"y\", (d, i) => ((i) * rectSingleY + graphMargin))\n                .on(\"mouseover\", function (d) {\n                    if (type === \"keyword\") {\n                        if (d.inIntersection ? interChecked.current : checked.current) {\n                            d3.selectAll(\".\" + type + \"_rect_\" + processKey(d.keyword)).style(\"opacity\", 1.0);\n                            d3.selectAll(\".\" + type + \"_text_\" + processKey(d.keyword)).style(\"font-weight\", \"bold\");\n\n                            d3.select(\".tooltipHover\")\n                              .style(\"left\", (d3.event.pageX) + \"px\")\t\t\n                              .style(\"top\", (d3.event.pageY) + \"px\")\n                              .style(\"opacity\", 0.8)\n                              .style(\"width\", \"80px\")\n                              .html(isLoc.current ? (d.loc*100).toFixed(2) + \" %\" : (100*d.commitNum).toFixed(2) + \" %\")\n                        }\n                        \n                    }\n                    else {\n                        if (isLoc.current) {\n                            if (d.loc.inIntersection ? interChecked.current : checked.current) {\n                                d3.selectAll(\".\" + type + \"_rect_\" + processKey(d.loc.keyword)).style(\"opacity\", 1.0);\n                                d3.selectAll(\".\" + type + \"_text_\" + processKey(d.loc.keyword)).style(\"font-weight\", \"bold\");\n                                fileFullnameView.text(d.loc.keyword);\n                                d3.select(\".tooltipHover\")\n                                  .style(\"left\", (d3.event.pageX) + \"px\")\t\t\n                                  .style(\"top\", (d3.event.pageY) + \"px\")\n                                  .style(\"opacity\", 0.8)\n                                  .style(\"width\", \"80px\")\n                                  .html(isLoc.current ? (d.loc.score*100).toFixed(2) + \" %\" : (100*d.num.score).toFixed(2) + \" %\")\n                            }\n                        }\n                        else {\n                            if (d.num.inIntersection ? interChecked.current : checked.current) {\n                                d3.selectAll(\".\" + type + \"_rect_\" + processKey(d.num.keyword)).style(\"opacity\", 1.0);\n                                d3.selectAll(\".\" + type + \"_text_\" + processKey(d.num.keyword)).style(\"font-weight\", \"bold\");\n                                fileFullnameView.text(d.num.keyword);\n                                d3.select(\".tooltipHover\")\n                                  .style(\"left\", (d3.event.pageX) + \"px\")\t\t\n                                  .style(\"top\", (d3.event.pageY) + \"px\")\n                                  .style(\"opacity\", 0.8)\n                                  .style(\"width\", \"80px\")\n                                  .html(isLoc.current ? (d.loc.score*100).toFixed(2) + \" %\" : (100*d.num.score).toFixed(2) + \" %\")\n                            }\n                        }\n                       \n                    }\n\n\n                })\n                .on(\"mouseout\", function (d) {\n                    if (type === \"keyword\") {\n                        if (d.inIntersection ? interChecked.current : checked.current) {\n                            d3.selectAll(\".\" + type + \"_rect_\" + processKey(d.keyword)).style(\"opacity\", 0.7);\n                            d3.selectAll(\".\" + type + \"_text_\" + processKey(d.keyword)).style(\"font-weight\", 300);\n                        }\n                    }\n                    else {\n                        let keyword = isLoc.current ? d.loc.keyword : d.num.keyword;\n                        if (isLoc.current) {\n                            if (d.loc.inIntersection ? interChecked.current : checked.current) {\n                                d3.selectAll(\".\" + type + \"_rect_\" + processKey(keyword)).style(\"opacity\", 0.7);\n                                d3.selectAll(\".\" + type + \"_text_\" + processKey(keyword)).style(\"font-weight\", 300);\n                            }\n                        }\n                        else {\n                            if (d.num.inIntersection ? interChecked.current : checked.current) {\n                                d3.selectAll(\".\" + type + \"_rect_\" + processKey(keyword)).style(\"opacity\", 0.7);\n                                d3.selectAll(\".\" + type + \"_text_\" + processKey(keyword)).style(\"font-weight\", 300);\n                            }\n                        }\n                        fileFullnameView.text(\"\");\n                    }\n                    d3.select(\".tooltipHover\").style(\"opacity\", 0);\n\n                })\n                .on(\"mousemove\", function(d) {\n                    d3.select(\".tooltipHover\")\n                      .style(\"left\", (d3.event.pageX) + \"px\")\t\t\n                      .style(\"top\", (d3.event.pageY) + \"px\")\n                });\n\n            yourKeywordsSvg.current.append(\"rect\")\n                .attr(\"class\", d => type + \"_rect \" + type + \"_rect_\" + processKey(d.keyword))\n                .attr(\"width\", d => {\n                    if (type === \"keyword\")\n                        return keywordsAxisScale(d.loc);\n                    else\n                        return keywordsAxisScale(d.loc.score);\n                })\n                .attr(\"height\", rectSingleHeight)\n                .style(\"fill\", d => {\n                    if (type === \"keyword\")\n                        return d.inIntersection ? color.inter : defaultColor\n                    else\n                        return d.loc.inIntersection ? color.inter : defaultColor\n                })\n                .style(\"stroke-width\", 0)\n                .style(\"opacity\", 0.7)\n                .attr(\"rx\", 2).attr(\"ry\", 2);\n\n            yourKeywordsSvg.current.append(\"text\")\n                .attr(\"class\", d => type + \"_text \" + type + \"_text_\" + processKey(d.keyword))\n                .text(d => {\n                    if (type === \"keyword\")\n                        return d.keyword;\n                    else {\n                        if(showFileFullPath.current)\n                            return GitAnalyzer.reduceLongName(d.keyword, 60);\n                        else {\n                            let split = d.keyword.split(\"/\");\n                            return split[split.length - 1];\n                        }\n                    }\n                })\n                .attr(\"x\", 3)\n                .attr(\"y\", 14);\n        }\n\n        function updateSmallChart(yourKeywordsSvg, checked, type, defaultColor) {\n            yourKeywordsSvg.current.selectAll(\"rect\")\n                .attr(\"class\", d => {\n                    if (type === \"keyword\") {\n                        return type + \"_rect \" + type + \"_rect_\" + processKey(d.keyword);\n                    }\n                    else {\n                        let keyword = isLoc.current ? d.loc.keyword : d.num.keyword;\n                        return type + \"_rect \" + type + \"_rect_\" + processKey(keyword)\n                    }\n                })\n                .transition()\n                .duration(800)\n                .style(\"opacity\", function (d) {\n                    if (type === \"keyword\") {\n                        if (d.inIntersection) return interChecked.current ? 0.7 : 0.3;\n                        else return checked.current ? 0.7 : 0.3;\n                    }\n                    else {\n                        if (isLoc.current ? d.loc.inIntersection : d.num.inIntersection) return interChecked.current ? 0.7 : 0.3;\n                        else return checked.current ? 0.7 : 0.3;\n                    }\n                })\n                .attr(\"width\", function (d) {\n                    if (type === \"keyword\") return isLoc.current ? keywordsAxisScale(d.loc) : keywordsAxisScale(d.commitNum);\n                    else return isLoc.current ? keywordsAxisScale(d.loc.score) : keywordsAxisScale(d.num.score);\n                })\n                .style(\"fill\", d => {\n                    if (type === \"keyword\")\n                        return d.inIntersection ? color.inter : defaultColor\n                    else {\n                        if (isLoc.current) return d.loc.inIntersection ? color.inter : defaultColor;\n                        else return d.num.inIntersection ? color.inter : defaultColor;\n                    }\n\n                })\n            yourKeywordsSvg.current.selectAll(\"text\")\n                .attr(\"class\", d => {\n                    if (type === \"keyword\") {\n                        return type + \"_text \" + type + \"_text_\" + processKey(d.keyword);\n                    }\n                    else {\n                        let keyword = isLoc.current ? d.loc.keyword : d.num.keyword;\n                        return type + \"_text \" + type + \"_text_\" + processKey(keyword)\n                    }\n                })\n                .transition()\n                .duration(800)\n                .style(\"opacity\", function (d) {\n                    if (type === \"keyword\") {\n                        if (d.inIntersection) return interChecked.current ? 1 : 0;\n                        else return checked.current ? 1 : 0;\n                    }\n                    else {\n                        if (isLoc.current ? d.loc.inIntersection : d.num.inIntersection) return interChecked.current ? 1 : 0;\n                        else return checked.current ? 1 : 0;\n                    }\n                })\n                .text(d => {\n                    if (type === \"keyword\") {\n                        return d.keyword;\n                    }\n                    else {\n                        let split = isLoc.current ? d.loc.keyword.split(\"/\") : d.num.keyword.split(\"/\")\n                        return split[split.length - 1];\n                    }\n                })\n        }\n\n        \n        \n\n        updateKeywordSvg = function () {\n            \n        }\n\n\n        // File structure\n\n        let fileX = authorX;\n        let fileY = authorY * 3 - 13;\n        let fileWidth = width * 0.5;\n        let fileHeight = keywordsHeight;\n\n        let fileSvg = mainSvg.append(\"g\")\n            .attr('transform', 'translate(' + fileX + ',' + fileY + ')');\n\n        mainSvg.append(\"text\")\n               .text(\"Files\")\n               .attr(\"x\", fileX)\n               .attr(\"y\", fileY - labelYMargin)\n               .style(\"font-size\", \"20px\")\n               .style(\"font-weight\", 350);\n\n        // Appending Axis\n\n        let fileAxisScale = d3.scaleLinear()\n            .domain([0, 1])\n            .range([0, fileWidth / 2 - 25]);\n        let fileAxis = d3.axisBottom(fileAxisScale).tickFormat(d3.format(\".0%\")).ticks(5);\n\n\n        fileSvg.append(\"g\")\n            .append(\"path\")\n            .attr(\"d\", \"M 0 0 L 0 \" + fileHeight)\n            .style(\"stroke\", \"black\");\n\n        fileSvg.append(\"g\")\n            .append(\"path\")\n            .attr(\"d\", \"M \" + (fileWidth / 2) + \" 0 L \" + (fileWidth / 2) + \" \" + fileHeight)\n            .style(\"stroke\", \"black\");\n\n        fileSvg.append(\"g\")\n            .attr('transform', 'translate(' + 0 + ',' + fileHeight + ')')\n            .call(fileAxis);\n\n        fileSvg.append(\"g\")\n            .attr('transform', 'translate(' + (fileWidth / 2) + ',' + fileHeight + ')')\n            .call(fileAxis);\n\n\n        // legends\n\n        fileSvg.append(\"text\")\n                    .attr(\"class\",\"ratioXLegend\")\n                    .text(\"CLOC / Total CLOC (%)\")\n                    .style(\"font-weight\", 400)\n                    .attr(\"x\", keywordsWidth / 4 - 66)\n                    .attr(\"y\", keywordsHeight + 35);\n\n        fileSvg.append(\"text\")\n                    .attr(\"class\",\"ratioXLegend\")\n                    .text(\"CLOC / Total CLOC (%)\")\n                    .style(\"font-weight\", 400)\n                    .attr(\"x\", keywordsWidth * 3 / 4 - 66)\n                    .attr(\"y\", keywordsHeight + 35);\n\n        let fileFullnameView = fileSvg.append(\"g\")\n            .attr('transform', 'translate(' + 1 + ',' + (fileHeight + 53) + ')')\n            .append(\"text\")\n            .style(\"font-weight\", \"bold\")\n            .text(\"\");\n\n        initSmallChart(\"a\", 0, aFileSvg, aFileArray, color.a, aChecked, fileSvg, \"file\");\n        initSmallChart(\"b\", (fileWidth / 2), bFileSvg, bFileArray, color.b, bChecked, fileSvg, \"file\");\n\n        updatefileSvg = function() {\n            if (isLoc.current) {\n                updateSmallChart(aFileSvg, aChecked, \"file\", color.a);\n                updateSmallChart(bFileSvg, bChecked, \"file\", color.b);\n            }\n            else {\n                updateSmallChart(aFileSvg, aChecked, \"file\", color.a);\n                updateSmallChart(bFileSvg, bChecked, \"file\", color.b);\n            }\n        }\n\n        updateLegends = function () {\n\n            console.log(\"UPDATESS!!\")\n            d3.selectAll(\".basicXLegend\")\n              .text(() => {\n                  if(isLoc.current) return \"CLOC\";\n                  else return \"Commit #\"\n              })\n            d3.selectAll(\".ratioXLegend\")\n              .text(() => {\n                  if(isLoc.current) return \"CLOC / Total CLOC (%)\"\n                  else return \"Commit # / Total Commit # (%)\"\n              })\n        }\n\n         // Hovering\n\n        let tooltip = d3.selectAll(\"#mainCompareDiv\")\n                        .append(\"div\")\n                        .attr(\"class\", \"tooltipHover\")\n                        .style(\"opacity\", 0);\n\n        tooltip.style(\"position\", \"absolute\")\n               .style(\"text-align\", \"center\")\n               .style(\"width\", \"120px\")\n               .style(\"height\", \"24px\")\n               .style(\"padding\", \"2px\")\n               .style(\"background\", \"#6ec2de\")\n               .style(\"border\", \"0px\")\n               .style(\"border-radius\", \"8px\")\n               .style(\"pointer-events\", \"none\");\n\n    \n    }, [props.capturedSummaryInfoListForCompare]);\n\n\n    return (\n        <div id =\"mainCompareDiv\">\n            <div id=\"title-panel\" style={{width:800}}>\n                <div id=\"repository-name\">\n                    COMPARE: \n                    <span style={{color: color.a}}>#{aCapturedSummaryInfo.id} ({aName})</span> vs <span style={{color: color.b}}>#{bCapturedSummaryInfo.id} ({bName})</span>\n                </div>\n                {/* <div id=\"legend-container\">\n                    {[ \"authors\", \"keywords\", \"commitTypes\", \"clocByFiles\", \"clocByDirs\" ].map((d, i) => {\n                    let color = AttributeColors [ DataTypeByNameMap[d] ][ 3 ];\n                    return (\n                        <div key={i} className=\"legend-element\" style={{\n                            background: color,\n                        }}>\n\n                            <Icon>{AttributeIconSpecs[ d ]}</Icon>\n                            <span>{d.split(\"clocBy\").slice(-1)[ 0 ]}</span>\n\n                        </div>\n                        );\n                    })}\n                </div> */}\n            </div>\n            \n            <div id=\"radioButtons\" style={{position: \"relative\", left: \"160px\", top: \"37px\", width: \"800px\"}}>\n                <RadioGroup aria-label=\"gender\" name=\"gender1\" defaultValue={\"CLOC\"} onChange={\n                    function(event) {\n                        if(event.target.value == \"CLOC\") {\n                            isLoc.current = true;\n                            updateXAxis();\n                            updateAuthorSvg();\n                            updateCommitTypeSvg();\n                            updateKeywordSvg();\n                            updatefileSvg();\n                            updateLegends();\n                        }\n                        else {\n                            isLoc.current = false;\n                            updateXAxis();\n                            updateAuthorSvg();\n                            updateCommitTypeSvg();\n                            updateKeywordSvg();\n                            updatefileSvg();\n                            updateLegends();\n                        }\n                    }\n                }>\n                    <div>\n                        <Radio\n                            style={{width:\"25px\", height:\"25px\", padding:0, margin: 0}}\n                            color=\"primary\"\n                            value=\"CLOC\"\n                            icon={<RadioButtonUncheckedIcon fontSize=\"small\" />}\n                            checkedIcon={<RadioButtonCheckedIcon fontSize=\"small\" />}\n                            label=\"CLOC\"\n                        />\n                        CLOC\n                    </div>\n                    <div>\n                        <Radio\n                            style={{width:\"25px\", height:\"25px\", padding:0, margin: 0}}\n                            color=\"primary\"\n                            value=\"Commit #\"\n                            icon={<RadioButtonUncheckedIcon fontSize=\"small\" />}\n                            checkedIcon={<RadioButtonCheckedIcon fontSize=\"small\" />}\n                            label=\"Commit #\"\n                        />\n                        Commit #\n                    </div>\n                </RadioGroup>\n            </div>\n            \n            \n            {/* <div style={{width:width, height:\"50px\"}} /> */}\n            <div style={{ fontSize: \"12px\", left: \"70px\", top: \"375px\", position: \"relative\", width: \"400px\", margin: \"0px\"}} >\n                <Checkbox\n                    className={\"showFileFullPath\"}\n                    size=\"small\"\n                    color=\"default\"\n                    defaultChecked={false}\n                    onChange={()=> {\n                        showFileFullPath.current = !showFileFullPath.current;\n                        if(showFileFullPath.current) {\n                            console.log(\"TRUE\")\n                            console.log(d3.selectAll(\".file_text\"))\n                            d3.selectAll(\".file_text\")\n                              .text(d => {\n                                  return GitAnalyzer.reduceLongName(d.keyword, 60);\n                              });\n                        }\n                        else {\n                            console.log(\"FALSE\")\n                            d3.selectAll(\".file_text\")\n                              .text(d => {\n                                let split = d.keyword.split(\"/\");\n                                return split[split.length - 1];\n                              })\n                        }\n                    }}\n                />\n                Show file path\n            </div>\n            <div style={{position: \"relative\", top: \"-90px\", left: \"-10px\"}}>\n                <svg id=\"compareClusters\" width={width} height={2000}></svg>\n            </div>\n            <div id=\"keywordsCanvas_1\" style={{ width: \"400px\", height: \"200px\", position: \"absolute\", left: \"1960px\", top: \"865px\" }}></div>\n            <div id=\"keywordsCanvas_2\" style={{ width: \"400px\", height: \"200px\", position: \"absolute\", left: \"2360px\", top: \"865px\" }}></div>\n        </div>\n    )\n}\n\nexport default DetailCompare;","import React from 'react';\nimport { useSelector } from \"react-redux\";\nimport DetailCompare from './DetailCompare';\n\nconst CompareSummary = (props) => {\n    const { capturedSummaryInfoListForCompare, gitAnalyzer } = props;\n    const { inspectionPaneWidth } = useSelector(state => state.layout);\n\n    if (capturedSummaryInfoListForCompare === undefined) return (<div></div>);\n// console.log(\"capturedSummaryInfoListForCompare\", capturedSummaryInfoListForCompare);\n    return (\n        <div\n          id=\"compareSummaryDiv\"\n          style={{\n            // visibility:\"hidden\",\n            // width:clusterOverviewWidth + \"px\"\n            width: \"1676px\",\n          }}\n          className=\"flexVerticalPane\"\n        >\n            {/* <div id=\"branchSummaryCompare\">\n                {capturedSummaryInfoListForCompare.map( (capturedSummaryInfo) => (\n                    <div\n                        key = {capturedSummaryInfo.id}\n                    >\n                        {capturedSummaryInfo.id}\n                    </div>\n                ))}\n            </div> */}\n            <div id=\"detailCompare\">\n                <DetailCompare\n                    // gitAnalyzer={gitAnalyzer}\n                    capturedSummaryInfoListForCompare={capturedSummaryInfoListForCompare}\n                    width={inspectionPaneWidth}\n                    corpusData={gitAnalyzer.corpusData}\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default CompareSummary","import React, { useState } from 'react';\nimport { useDispatch } from \"react-redux\";\nimport * as actions from '../modules';\n\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Form from 'react-bootstrap/Form';\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        display: 'flex',    \n        flexDirection: 'column',\n        paddingLeft: theme.spacing(1),\n        paddingRight: theme.spacing(1),\n    },\n    textArea: {\n        marginBottom: \"8px\",\n        minHeight: \"50px\",\n        fontSize: \"12px\",\n    }\n}));\n\nconst HighlightQuery = (props) => {\n    const classes = useStyles();\n    const [ query, setQuery ] = useState(\"\");\n    const dispatch = useDispatch();\n\n    return (\n        <form className={classes.container} noValidate autoComplete=\"on\">\n            <Form.Control\n                    className={classes.textArea}\n                    rows={2}\n                    as=\"textarea\" \n                    placeholder=\"KEYWORD FOR HIGHLIGHT (including tag, branch: ex. pr/123)\"\n                    onChange={(event) => {\n                        setQuery(event.target.value);\n                    }}\n                />\n\n                <Button style={{ \"fontSize\": \"11px\" }} variant=\"outlined\" size=\"small\"\n                    onClick={() => {\n                        let qList = [];\n                        qList = query.split(\"\\n\").map(d => d.trim()).filter(d => d !== \"\");\n                        dispatch(actions.updateHighlightQuery(qList));\n                    }}>\n                    HIGHLIGHT COMMITS\n                </Button>\n        </form>\n    );\n}\n\nexport default HighlightQuery;","import React, { useRef } from 'react';\nimport TemporalFilter from './components/TemporalFilter';\nimport GitAnalyzer from './components/analyzer/GitAnalyzer';\nimport TemporalSelector from './components/TemporalSelector';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\nimport CommitGraph from './components/CommitGraph';\n// import ClusterSummary from './components/ClusterSummary';\nimport { AttributeColors, BranchColors, changeRGBColorByOpacity } from './components/ColorClasses';\n\nimport './App.css';\nimport KeywordTextAreaFilter from './components/KeywordTextAreaFilter';\nimport PreferenceSliders from './components/PreferenceSliders';\nimport ManageParameters from './components/ManageParameters';\nimport InformationFragments from './components/InformationFragments';\nimport CaptureTab from './components/CaptureTab';\nimport Inspection from './components/Inspection';\nimport CompareSummary from './components/CompareSummary';\nimport HighlightQuery from './components/HighlightQuery';\nimport { SidePanelContentUnit } from './components/container/SidePanelContentUnit';\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport { AttributeIconSpecs } from './components/LegendIcons';\nimport { DataTypeByNameMap } from './components/analyzer/GithruClasses';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport * as actions from './modules';\n\n\nconst AppV2 = props => {\n  const defaultThresholdStep = 25;\n  const gitAnalyzerRef = useRef(undefined);\n  // const initRef = useRef(true);\n  // Importing json files\n  const repo = \"realm-java\";\n  const mainStemBranchName = props.match.params.mainStemBranchName;\n  console.log(\"mainStemBranchName\", repo, mainStemBranchName);\n\n  const releasePrefix = props.match.params.releasePrefix;\n  const data = require('./json/' + repo + '.commits.json');\n  const scoreData = require('./json/' + repo + '.score.json');\n  const corpusData = require('./json/' + repo + '.corpus.json');\n  const pullData = require('./json/' + repo + '.pulls.json');\n\n\n  const {\n    leftPaneWidth,\n    clusterOverviewWidth,\n    rightPaneWidth,\n    rightPaneMargin,\n    // selectedClusterDataForSummary,\n    temporalSelectorHeight,\n    clusterOverviewHeight,\n    orgClusterOverviewHeight,\n    capturedSummaryInfoListForCompare,\n    useHeuristicMerge,\n\n  } = useSelector(state => ({\n    leftPaneWidth: state.layout.leftPaneWidth,\n    clusterOverviewWidth: state.layout.clusterOverviewWidth,\n    rightPaneWidth: state.layout.rightPaneWidth,\n    rightPaneMargin: state.layout.rightPaneMargin,\n    // selectedClusterDataForSummary: state.selectedClusterDataForSummary,\n    temporalSelectorHeight: state.layout.temporalSelectorHeight,\n    clusterOverviewHeight: state.layout.clusterOverviewHeight,\n    orgClusterOverviewHeight: state.layout.orgClusterOverviewHeight,\n    capturedSummaryInfoListForCompare: state.capturedSummaryInfoListForCompare,\n    useHeuristicMerge: state.useHeuristicMerge,\n\n  }), shallowEqual);\n\n  const prevUseHeuristicMergeRef = useRef(undefined);\n  if (gitAnalyzerRef.current === undefined || prevUseHeuristicMergeRef.current !== useHeuristicMerge) {\n    gitAnalyzerRef.current = new GitAnalyzer(data, scoreData, corpusData, pullData,\n      defaultThresholdStep, repo, releasePrefix, mainStemBranchName);\n    // initRef.current = false;\n    prevUseHeuristicMergeRef.current = useHeuristicMerge;\n  }\n  const gitAnalyzer = gitAnalyzerRef.current;\n\n  return (\n    <div className=\"bodyDiv flexContainer\" id=\"app-screen-root\">\n      <div className=\"sidebar\" id=\"main-sidebar\">\n        <div className=\"flexVerticalContainer\">\n          <SidePanelContentUnit title=\"Global Temporal Filter\" show={true}>\n            <TemporalFilter\n              gitAnalyzer={gitAnalyzer}\n            />\n          </SidePanelContentUnit>\n\n          <SidePanelContentUnit title=\"Preferences Weights\" show={true}>\n            <PreferenceSliders />\n          </SidePanelContentUnit>\n\n          <SidePanelContentUnit title=\"Parameters\">\n            <ManageParameters />\n          </SidePanelContentUnit>\n\n          <SidePanelContentUnit title=\"Highlight\">\n            <HighlightQuery />\n          </SidePanelContentUnit>\n\n          <SidePanelContentUnit title=\"Keyword Filter\" show={true}>\n            <KeywordTextAreaFilter\n              gitAnalyzer={gitAnalyzer}\n            />            \n          </SidePanelContentUnit>\n          \n        </div>\n      </div>\n\n\n      <div className=\"flexVerticalContainer\" id=\"center-pane\">\n        <div id=\"title-panel\">\n          <div id=\"repository-name\">\n            GIThru: Contextual History of \"{repo}\" repository.\n          </div>\n          <div id=\"legend-container\">\n            ATTRS:\n            {[ \"authors\", \"keywords\", \"commitTypes\", \"clocByFiles\", \"clocByDirs\" ].map((d, i) => {\n            let color = AttributeColors[ DataTypeByNameMap[d] ][ 3 ];\n            return (\n              <div key={i} className=\"legend-element\" style={{\n                background: color,\n              }}>\n\n                <Icon>{AttributeIconSpecs[ d ]}</Icon>\n                <span>{d.split(\"clocBy\").slice(-1)[ 0 ]}</span>\n\n              </div>\n            );\n          })}\n            <div style={{ width: \"20px\" }} />\n            BRANCH:\n            {Object.entries(BranchColors).map((d, i) => {\n              let [ key, color ] = d;\n              color = changeRGBColorByOpacity(color, 0.7);\n\n              return (\n                <div key={i} className=\"legend-element\" style={{\n                  background: color,\n                }}>{key}</div>\n              );\n            })}\n          </div>\n        </div>\n        <div id=\"main-panel-content\">\n          <div id=\"overviewPane\">\n            <TemporalSelector\n              gitAnalyzer={gitAnalyzer}\n            // threshold={this.state.threshold}\n            // keywords={this.state.keywords}\n            />\n          </div>\n          <div id=\"clusterAndDetail\" className=\"flexContainer\">\n            <div id=\"clusterAndDetailPane\" className=\"flexVerticalContainer\">\n              <div id=\"clusterPane\">\n                <CommitGraph\n                  gitAnalyzer={gitAnalyzerRef.current}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div\n        id=\"rightPane\"\n        style={{\n          width: rightPaneWidth + \"px\",\n          background: \"#7a7c90\",\n          overflowY: \"auto\",\n          overflowX: \"hidden\",\n        }}\n        className=\"flexVerticalContainer\"\n      >\n        <div\n          id=\"verticalTab\"\n          style={{\n            width: rightPaneWidth + \"px\",\n          }}\n        >\n          <CaptureTab\n            width={rightPaneWidth}\n            height={temporalSelectorHeight + orgClusterOverviewHeight}\n          />\n        </div>\n        <div >\n          <div id=\"fragments\" class=\"sidepanel-container-content\">\n            <InformationFragments\n              width={rightPaneWidth}\n            />\n          </div>\n        </div>\n      </div>\n      <div>\n        <ScrollButton />\n      </div>\n      <div\n        id=\"inspectionPane\"\n        style = {{\n          width: \"0px\"\n        }}\n      >\n        <Inspection\n          gitAnalyzer={gitAnalyzer}\n        />\n      </div>\n      <div\n        id=\"comparePane\"\n        style={{\n          width: \"1900px\",\n          display: \"none\",\n        }}\n      >\n        <CompareSummary\n          gitAnalyzer={gitAnalyzer}\n          capturedSummaryInfoListForCompare={capturedSummaryInfoListForCompare}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default AppV2;\n\n\nconst ScrollButton = () => {\n  const { scrollToRight } = useSelector(state => state);\n  const dispatch = useDispatch();  \n  \n  return (\n    <div>\n      {scrollToRight &&\n        <Button onClick={() => {\n          dispatch(actions.updateScrollToRight(false));\n          window.scrollTo(0, 0);\n        }}>\n          <ArrowBackIcon fontSize=\"large\"/>\n        </Button>\n      }\n      {!scrollToRight &&\n        <Button onClick={() => {\n          dispatch(actions.updateScrollToRight(true));\n          window.scrollTo({top:0, left:4000});\n        }}>\n          <ArrowForwardIcon fontSize=\"large\" />\n        </Button>\n      }\n    </div>\n  );\n}","import React, { Component } from 'react';\n\n\nclass Home extends Component {\n    state = {\n        id: ''\n      }\n      appChange = (e) => {\n        this.setState({\n          id: e.target.value\n        });\n      }\n\n      appClick = () => {\n        window.open(window.location.href + \"v2/\" + this.state.id, \"_self\");\n      }\n      render() {\n        const { id } = this.state;\n        const { appChange, appClick } = this;\n        return (\n          <div className=\"App\">\n            <header className=\"App-header\">\n              <input type=\"text\" placeholder=\"Repository name\" value={id} onChange={appChange} />\n              <button onClick={appClick}>Open!!</button>\n            </header>\n          </div>\n        );\n      }\n}\n\n\nexport default Home;","import React from 'react';\nimport v2 from './AppV2';\nimport Home from './Home';\nimport { Route, Switch } from 'react-router-dom';\n\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return(\n            <Switch>\n                <Route exact path=\"/\" component = { v2 }/>\n                <Route path = \"/v2/:repo/:releasePrefix/:mainStemBranchName\" component = { v2 }/>\n                <Route path = \"/v2/:repo/:releasePrefix\" component = { v2 }/>\n                <Route path = \"/v2/:repo/\" component = { v2 }/>\n            </Switch>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { BrowserRouter } from 'react-router-dom';\n// import thunk from 'redux-thunk'\n\n// redux import\nimport { createStore } from 'redux';\nimport reducers from './modules';\nimport { Provider } from 'react-redux';\n\nconst store = createStore(reducers\n        ,window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n        // ,applyMiddleware(thunk));\n);\n\nReactDOM.render(\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>\n    , \n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}